import{r as c,b as kl,c as Ss,R as Fo,a as Uo}from"./react-vendor-BcqHGB9P.js";import{j as Al,_ as Vt,C as $o,a as kn,B as Zr,u as qo,A as Il,D as _l,P as Ni,b as Tl,c as Pl,d as Ml,e as Ti,f as Ll,g as ln,V as rt,O as Ol,S as Ri,h as Fl,H as Ul,T as $l,i as An,k as In,M as ql,l as Bl}from"./3d-vendor-CR7OfdSY.js";import{m as R,A as _e,u as zl,a as _n,b as Bo}from"./animation-vendor-BiF_2de2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();var zo={exports:{}},Sr={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=c,s=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),g=Symbol.iterator,N="@@iterator";function p(d){if(d===null||typeof d!="object")return null;var j=g&&d[g]||d[N];return typeof j=="function"?j:null}var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function E(d){{for(var j=arguments.length,I=new Array(j>1?j-1:0),J=1;J<j;J++)I[J-1]=arguments[J];w("error",d,I)}}function w(d,j,I){{var J=v.ReactDebugCurrentFrame,Q=J.getStackAddendum();Q!==""&&(j+="%s",I=I.concat([Q]));var re=I.map(function(ie){return String(ie)});re.unshift("Warning: "+j),Function.prototype.apply.call(console[d],console,re)}}var C=!1,S=!1,Z=!1,D=!1,T=!1,U;U=Symbol.for("react.module.reference");function W(d){return!!(typeof d=="string"||typeof d=="function"||d===r||d===o||T||d===n||d===h||d===u||D||d===x||C||S||Z||typeof d=="object"&&d!==null&&(d.$$typeof===f||d.$$typeof===b||d.$$typeof===a||d.$$typeof===l||d.$$typeof===m||d.$$typeof===U||d.getModuleId!==void 0))}function se(d,j,I){var J=d.displayName;if(J)return J;var Q=j.displayName||j.name||"";return Q!==""?I+"("+Q+")":I}function _(d){return d.displayName||"Context"}function P(d){if(d==null)return null;if(typeof d.tag=="number"&&E("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case r:return"Fragment";case i:return"Portal";case o:return"Profiler";case n:return"StrictMode";case h:return"Suspense";case u:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case l:var j=d;return _(j)+".Consumer";case a:var I=d;return _(I._context)+".Provider";case m:return se(d,d.render,"ForwardRef");case b:var J=d.displayName||null;return J!==null?J:P(d.type)||"Memo";case f:{var Q=d,re=Q._payload,ie=Q._init;try{return P(ie(re))}catch{return null}}}return null}var B=Object.assign,le=0,H,G,z,V,k,Y,ae;function de(){}de.__reactDisabledLog=!0;function Ee(){{if(le===0){H=console.log,G=console.info,z=console.warn,V=console.error,k=console.group,Y=console.groupCollapsed,ae=console.groupEnd;var d={configurable:!0,enumerable:!0,value:de,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}le++}}function je(){{if(le--,le===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:B({},d,{value:H}),info:B({},d,{value:G}),warn:B({},d,{value:z}),error:B({},d,{value:V}),group:B({},d,{value:k}),groupCollapsed:B({},d,{value:Y}),groupEnd:B({},d,{value:ae})})}le<0&&E("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Fe=v.ReactCurrentDispatcher,ee;function A(d,j,I){{if(ee===void 0)try{throw Error()}catch(Q){var J=Q.stack.trim().match(/\n( *(at )?)/);ee=J&&J[1]||""}return`
`+ee+d}}var oe=!1,Ne;{var we=typeof WeakMap=="function"?WeakMap:Map;Ne=new we}function Ae(d,j){if(!d||oe)return"";{var I=Ne.get(d);if(I!==void 0)return I}var J;oe=!0;var Q=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var re;re=Fe.current,Fe.current=null,Ee();try{if(j){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(cs){J=cs}Reflect.construct(d,[],ie)}else{try{ie.call()}catch(cs){J=cs}d.call(ie.prototype)}}else{try{throw Error()}catch(cs){J=cs}d()}}catch(cs){if(cs&&J&&typeof cs.stack=="string"){for(var fe=cs.stack.split(`
`),os=J.stack.split(`
`),Ke=fe.length-1,Xe=os.length-1;Ke>=1&&Xe>=0&&fe[Ke]!==os[Xe];)Xe--;for(;Ke>=1&&Xe>=0;Ke--,Xe--)if(fe[Ke]!==os[Xe]){if(Ke!==1||Xe!==1)do if(Ke--,Xe--,Xe<0||fe[Ke]!==os[Xe]){var Je=`
`+fe[Ke].replace(" at new "," at ");return d.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",d.displayName)),typeof d=="function"&&Ne.set(d,Je),Je}while(Ke>=1&&Xe>=0);break}}}finally{oe=!1,Fe.current=re,je(),Error.prepareStackTrace=Q}var mt=d?d.displayName||d.name:"",ks=mt?A(mt):"";return typeof d=="function"&&Ne.set(d,ks),ks}function Ve(d,j,I){return Ae(d,!1)}function Be(d){var j=d.prototype;return!!(j&&j.isReactComponent)}function Re(d,j,I){if(d==null)return"";if(typeof d=="function")return Ae(d,Be(d));if(typeof d=="string")return A(d);switch(d){case h:return A("Suspense");case u:return A("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case m:return Ve(d.render);case b:return Re(d.type,j,I);case f:{var J=d,Q=J._payload,re=J._init;try{return Re(re(Q),j,I)}catch{}}}return""}var $=Object.prototype.hasOwnProperty,te={},ce=v.ReactDebugCurrentFrame;function ge(d){if(d){var j=d._owner,I=Re(d.type,d._source,j?j.type:null);ce.setExtraStackFrame(I)}else ce.setExtraStackFrame(null)}function he(d,j,I,J,Q){{var re=Function.call.bind($);for(var ie in d)if(re(d,ie)){var fe=void 0;try{if(typeof d[ie]!="function"){var os=Error((J||"React class")+": "+I+" type `"+ie+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[ie]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw os.name="Invariant Violation",os}fe=d[ie](j,ie,J,I,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ke){fe=Ke}fe&&!(fe instanceof Error)&&(ge(Q),E("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",J||"React class",I,ie,typeof fe),ge(null)),fe instanceof Error&&!(fe.message in te)&&(te[fe.message]=!0,ge(Q),E("Failed %s type: %s",I,fe.message),ge(null))}}}var Te=Array.isArray;function Me(d){return Te(d)}function Ze(d){{var j=typeof Symbol=="function"&&Symbol.toStringTag,I=j&&d[Symbol.toStringTag]||d.constructor.name||"Object";return I}}function pe(d){try{return ze(d),!1}catch{return!0}}function ze(d){return""+d}function Le(d){if(pe(d))return E("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ze(d)),ze(d)}var He=v.ReactCurrentOwner,Ds={key:!0,ref:!0,__self:!0,__source:!0},y,F,K;K={};function O(d){if($.call(d,"ref")){var j=Object.getOwnPropertyDescriptor(d,"ref").get;if(j&&j.isReactWarning)return!1}return d.ref!==void 0}function be(d){if($.call(d,"key")){var j=Object.getOwnPropertyDescriptor(d,"key").get;if(j&&j.isReactWarning)return!1}return d.key!==void 0}function ue(d,j){if(typeof d.ref=="string"&&He.current&&j&&He.current.stateNode!==j){var I=P(He.current.type);K[I]||(E('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',P(He.current.type),d.ref),K[I]=!0)}}function ne(d,j){{var I=function(){y||(y=!0,E("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",j))};I.isReactWarning=!0,Object.defineProperty(d,"key",{get:I,configurable:!0})}}function Ce(d,j){{var I=function(){F||(F=!0,E("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",j))};I.isReactWarning=!0,Object.defineProperty(d,"ref",{get:I,configurable:!0})}}var ke=function(d,j,I,J,Q,re,ie){var fe={$$typeof:s,type:d,key:j,ref:I,props:ie,_owner:re};return fe._store={},Object.defineProperty(fe._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(fe,"_self",{configurable:!1,enumerable:!1,writable:!1,value:J}),Object.defineProperty(fe,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Q}),Object.freeze&&(Object.freeze(fe.props),Object.freeze(fe)),fe};function We(d,j,I,J,Q){{var re,ie={},fe=null,os=null;I!==void 0&&(Le(I),fe=""+I),be(j)&&(Le(j.key),fe=""+j.key),O(j)&&(os=j.ref,ue(j,Q));for(re in j)$.call(j,re)&&!Ds.hasOwnProperty(re)&&(ie[re]=j[re]);if(d&&d.defaultProps){var Ke=d.defaultProps;for(re in Ke)ie[re]===void 0&&(ie[re]=Ke[re])}if(fe||os){var Xe=typeof d=="function"?d.displayName||d.name||"Unknown":d;fe&&ne(ie,Xe),os&&Ce(ie,Xe)}return ke(d,fe,os,Q,J,He.current,ie)}}var Se=v.ReactCurrentOwner,Qe=v.ReactDebugCurrentFrame;function ps(d){if(d){var j=d._owner,I=Re(d.type,d._source,j?j.type:null);Qe.setExtraStackFrame(I)}else Qe.setExtraStackFrame(null)}var lt;lt=!1;function Us(d){return typeof d=="object"&&d!==null&&d.$$typeof===s}function ct(){{if(Se.current){var d=P(Se.current.type);if(d)return`

Check the render method of \``+d+"`."}return""}}function fi(d){{if(d!==void 0){var j=d.fileName.replace(/^.*[\\\/]/,""),I=d.lineNumber;return`

Check your code at `+j+":"+I+"."}return""}}var St={};function Ps(d){{var j=ct();if(!j){var I=typeof d=="string"?d:d.displayName||d.name;I&&(j=`

Check the top-level render call using <`+I+">.")}return j}}function Rt(d,j){{if(!d._store||d._store.validated||d.key!=null)return;d._store.validated=!0;var I=Ps(j);if(St[I])return;St[I]=!0;var J="";d&&d._owner&&d._owner!==Se.current&&(J=" It was passed a child from "+P(d._owner.type)+"."),ps(d),E('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',I,J),ps(null)}}function Ms(d,j){{if(typeof d!="object")return;if(Me(d))for(var I=0;I<d.length;I++){var J=d[I];Us(J)&&Rt(J,j)}else if(Us(d))d._store&&(d._store.validated=!0);else if(d){var Q=p(d);if(typeof Q=="function"&&Q!==d.entries)for(var re=Q.call(d),ie;!(ie=re.next()).done;)Us(ie.value)&&Rt(ie.value,j)}}}function Ge(d){{var j=d.type;if(j==null||typeof j=="string")return;var I;if(typeof j=="function")I=j.propTypes;else if(typeof j=="object"&&(j.$$typeof===m||j.$$typeof===b))I=j.propTypes;else return;if(I){var J=P(j);he(I,d.props,"prop",J,d)}else if(j.PropTypes!==void 0&&!lt){lt=!0;var Q=P(j);E("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Q||"Unknown")}typeof j.getDefaultProps=="function"&&!j.getDefaultProps.isReactClassApproved&&E("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Gs(d){{for(var j=Object.keys(d.props),I=0;I<j.length;I++){var J=j[I];if(J!=="children"&&J!=="key"){ps(d),E("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",J),ps(null);break}}d.ref!==null&&(ps(d),E("Invalid attribute `ref` supplied to `React.Fragment`."),ps(null))}}var $s={};function Ks(d,j,I,J,Q,re){{var ie=W(d);if(!ie){var fe="";(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(fe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var os=fi(Q);os?fe+=os:fe+=ct();var Ke;d===null?Ke="null":Me(d)?Ke="array":d!==void 0&&d.$$typeof===s?(Ke="<"+(P(d.type)||"Unknown")+" />",fe=" Did you accidentally export a JSX literal instead of a component?"):Ke=typeof d,E("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ke,fe)}var Xe=We(d,j,I,Q,re);if(Xe==null)return Xe;if(ie){var Je=j.children;if(Je!==void 0)if(J)if(Me(Je)){for(var mt=0;mt<Je.length;mt++)Ms(Je[mt],d);Object.freeze&&Object.freeze(Je)}else E("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ms(Je,d)}if($.call(j,"key")){var ks=P(d),cs=Object.keys(j).filter(function(gi){return gi!=="key"}),Ls=cs.length>0?"{key: someKey, "+cs.join(": ..., ")+": ...}":"{key: someKey}";if(!$s[ks+Ls]){var Zn=cs.length>0?"{"+cs.join(": ..., ")+": ...}":"{}";E(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ls,ks,Zn,ks),$s[ks+Ls]=!0}}return d===r?Gs(Xe):Ge(Xe),Xe}}var ut=Ks;Sr.Fragment=r,Sr.jsxDEV=ut})();zo.exports=Sr;var e=zo.exports,ci=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wt=typeof window>"u"||"Deno"in globalThis;function Ns(){}function Hl(t,s){return typeof t=="function"?t(s):t}function Rr(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ho(t,s){return Math.max(t+(s||0)-Date.now(),0)}function nt(t,s){return typeof t=="function"?t(s):t}function Zs(t,s){return typeof t=="function"?t(s):t}function Tn(t,s){const{type:i="all",exact:r,fetchStatus:n,predicate:o,queryKey:a,stale:l}=t;if(a){if(r){if(s.queryHash!==cn(a,s.options))return!1}else if(!ni(s.queryKey,a))return!1}if(i!=="all"){const m=s.isActive();if(i==="active"&&!m||i==="inactive"&&m)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||n&&n!==s.state.fetchStatus||o&&!o(s))}function Pn(t,s){const{exact:i,status:r,predicate:n,mutationKey:o}=t;if(o){if(!s.options.mutationKey)return!1;if(i){if(ri(s.options.mutationKey)!==ri(o))return!1}else if(!ni(s.options.mutationKey,o))return!1}return!(r&&s.state.status!==r||n&&!n(s))}function cn(t,s){return(s?.queryKeyHashFn||ri)(t)}function ri(t){return JSON.stringify(t,(s,i)=>Ir(i)?Object.keys(i).sort().reduce((r,n)=>(r[n]=i[n],r),{}):i)}function ni(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(i=>ni(t[i],s[i])):!1}function kr(t,s){if(t===s)return t;const i=Mn(t)&&Mn(s);if(i||Ir(t)&&Ir(s)){const r=i?t:Object.keys(t),n=r.length,o=i?s:Object.keys(s),a=o.length,l=i?[]:{},m=new Set(r);let h=0;for(let u=0;u<a;u++){const b=i?u:o[u];(!i&&m.has(b)||i)&&t[b]===void 0&&s[b]===void 0?(l[b]=void 0,h++):(l[b]=kr(t[b],s[b]),l[b]===t[b]&&t[b]!==void 0&&h++)}return n===a&&h===n?t:l}return s}function Ar(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const i in t)if(t[i]!==s[i])return!1;return!0}function Mn(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ir(t){if(!Ln(t))return!1;const s=t.constructor;if(s===void 0)return!0;const i=s.prototype;return!(!Ln(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ln(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wl(t){return new Promise(s=>{setTimeout(s,t)})}function _r(t,s,i){if(typeof i.structuralSharing=="function")return i.structuralSharing(t,s);if(i.structuralSharing!==!1){try{return kr(t,s)}catch(r){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${i.queryHash}]: ${r}`),r}return kr(t,s)}return s}function Gl(t,s,i=0){const r=[...t,s];return i&&r.length>i?r.slice(1):r}function Kl(t,s,i=0){const r=[s,...t];return i&&r.length>i?r.slice(0,-1):r}var Pi=Symbol();function Wo(t,s){return t.queryFn===Pi&&console.error(`Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${t.queryHash}'`),!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===Pi?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Jl(t,s){return typeof t=="function"?t(...s):!!t}var Yl=class extends ci{#s;#e;#t;constructor(){super(),this.#t=t=>{if(!wt&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#t=t,this.#e?.(),this.#e=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#s!==t&&(this.#s=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#s=="boolean"?this.#s:globalThis.document?.visibilityState!=="hidden"}},un=new Yl,Ql=class extends ci{#s=!0;#e;#t;constructor(){super(),this.#t=t=>{if(!wt&&window.addEventListener){const s=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#e||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#t=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#s!==t&&(this.#s=t,this.listeners.forEach(i=>{i(t)}))}isOnline(){return this.#s}},Mi=new Ql;function Tr(){let t,s;const i=new Promise((n,o)=>{t=n,s=o});i.status="pending",i.catch(()=>{});function r(n){Object.assign(i,n),delete i.resolve,delete i.reject}return i.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},i.reject=n=>{r({status:"rejected",reason:n}),s(n)},i}function Xl(t){return Math.min(1e3*2**t,3e4)}function Go(t){return(t??"online")==="online"?Mi.isOnline():!0}var Ko=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Jo(t){let s=!1,i=0,r;const n=Tr(),o=()=>n.status!=="pending",a=N=>{o()||(f(new Ko(N)),t.abort?.())},l=()=>{s=!0},m=()=>{s=!1},h=()=>un.isFocused()&&(t.networkMode==="always"||Mi.isOnline())&&t.canRun(),u=()=>Go(t.networkMode)&&t.canRun(),b=N=>{o()||(r?.(),n.resolve(N))},f=N=>{o()||(r?.(),n.reject(N))},x=()=>new Promise(N=>{r=p=>{(o()||h())&&N(p)},t.onPause?.()}).then(()=>{r=void 0,o()||t.onContinue?.()}),g=()=>{if(o())return;let N;const p=i===0?t.initialPromise:void 0;try{N=p??t.fn()}catch(v){N=Promise.reject(v)}Promise.resolve(N).then(b).catch(v=>{if(o())return;const E=t.retry??(wt?0:3),w=t.retryDelay??Xl,C=typeof w=="function"?w(i,v):w,S=E===!0||typeof E=="number"&&i<E||typeof E=="function"&&E(i,v);if(s||!S){f(v);return}i++,t.onFail?.(i,v),Wl(C).then(()=>h()?void 0:x()).then(()=>{s?f(v):g()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(r?.(),n),cancelRetry:l,continueRetry:m,canStart:u,start:()=>(u()?g():x().then(g),n)}}var ec=t=>setTimeout(t,0);function sc(){let t=[],s=0,i=l=>{l()},r=l=>{l()},n=ec;const o=l=>{s?t.push(l):n(()=>{i(l)})},a=()=>{const l=t;t=[],l.length&&n(()=>{r(()=>{l.forEach(m=>{i(m)})})})};return{batch:l=>{let m;s++;try{m=l()}finally{s--,s||a()}return m},batchCalls:l=>(...m)=>{o(()=>{l(...m)})},schedule:o,setNotifyFunction:l=>{i=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var rs=sc(),Yo=class{#s;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rr(this.gcTime)&&(this.#s=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wt?1/0:5*60*1e3))}clearGcTimeout(){this.#s&&(clearTimeout(this.#s),this.#s=void 0)}},tc=class extends Yo{#s;#e;#t;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#t=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#s=ic(this.options),this.state=t.state??this.#s,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(t,s){const i=_r(this.state.data,t,this.options);return this.#n({data:i,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),i}setState(t,s){this.#n({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(Ns).catch(Ns):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#s)}isActive(){return this.observers.some(t=>Zs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>nt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ho(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(m=>m.options.queryFn);l&&this.setOptions(l.options)}Array.isArray(this.options.queryKey)||console.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']");const i=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,i.signal)})},n=()=>{const l=Wo(this.options,s),h=(()=>{const u={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,h,this):l(h)},a=(()=>{const l={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:n};return r(l),l})();this.options.behavior?.onFetch(a,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#n({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=Jo({initialPromise:s?.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onFail:(l,m)=>{this.#n({type:"failed",failureCount:l,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw console.error(`Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`),new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#t.config.onSuccess?.(l,this),this.#t.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Ko){if(l.silent)return this.#r.promise;if(l.revert)return this.setState({...this.#e,fetchStatus:"idle"}),this.state.data}throw this.#n({type:"error",error:l}),this.#t.config.onError?.(l,this),this.#t.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#n(t){const s=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Qo(i.data,this.options),fetchMeta:t.meta??null};case"success":const r={...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=t.manual?r:void 0,r;case"error":const n=t.error;return{...i,error:n,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=s(this.state),rs.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:t})})}};function Qo(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Go(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ic(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,i=s!==void 0,r=i?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:i?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var rc=class extends ci{constructor(t={}){super(),this.config=t,this.#s=new Map}#s;build(t,s,i){const r=s.queryKey,n=s.queryHash??cn(r,s);let o=this.get(n);return o||(o=new tc({client:t,queryKey:r,queryHash:n,options:t.defaultQueryOptions(s),state:i,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#s.has(t.queryHash)||(this.#s.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#s.get(t.queryHash);s&&(t.destroy(),s===t&&this.#s.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#s.get(t)}getAll(){return[...this.#s.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(i=>Tn(s,i))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(i=>Tn(t,i)):s}notify(t){rs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},nc=class extends Yo{#s;#e;#t;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#s=[],this.state=t.state||oc(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#s.includes(t)||(this.#s.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#s=this.#s.filter(s=>s!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#s.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#t?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#i({type:"continue"})};this.#t=Jo({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,o)=>{this.#i({type:"failed",failureCount:n,error:o})},onPause:()=>{this.#i({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const i=this.state.status==="pending",r=!this.#t.canStart();try{if(i)s();else{this.#i({type:"pending",variables:t,isPaused:r}),await this.#e.config.onMutate?.(t,this);const o=await this.options.onMutate?.(t);o!==this.state.context&&this.#i({type:"pending",context:o,variables:t,isPaused:r})}const n=await this.#t.start();return await this.#e.config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await this.#e.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),this.#i({type:"success",data:n}),n}catch(n){try{throw await this.#e.config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await this.#e.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{this.#i({type:"error",error:n})}}finally{this.#e.runNext(this)}}#i(t){const s=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),rs.batch(()=>{this.#s.forEach(i=>{i.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function oc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ac=class extends ci{constructor(t={}){super(),this.config=t,this.#s=new Set,this.#e=new Map,this.#t=0}#s;#e;#t;build(t,s,i){const r=new nc({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(s),state:i});return this.add(r),r}add(t){this.#s.add(t);const s=xi(t);if(typeof s=="string"){const i=this.#e.get(s);i?i.push(t):this.#e.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#s.delete(t)){const s=xi(t);if(typeof s=="string"){const i=this.#e.get(s);if(i)if(i.length>1){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}else i[0]===t&&this.#e.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=xi(t);if(typeof s=="string"){const r=this.#e.get(s)?.find(n=>n.state.status==="pending");return!r||r===t}else return!0}runNext(t){const s=xi(t);return typeof s=="string"?this.#e.get(s)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){rs.batch(()=>{this.#s.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#s.clear(),this.#e.clear()})}getAll(){return Array.from(this.#s)}find(t){const s={exact:!0,...t};return this.getAll().find(i=>Pn(s,i))}findAll(t={}){return this.getAll().filter(s=>Pn(t,s))}notify(t){rs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return rs.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ns))))}};function xi(t){return t.options.scope?.id}function On(t){return{onFetch:(s,i)=>{const r=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],a=s.state.data?.pageParams||[];let l={pages:[],pageParams:[]},m=0;const h=async()=>{let u=!1;const b=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},f=Wo(s.options,s.fetchOptions),x=async(g,N,p)=>{if(u)return Promise.reject();if(N==null&&g.pages.length)return Promise.resolve(g);const E=(()=>{const Z={client:s.client,queryKey:s.queryKey,pageParam:N,direction:p?"backward":"forward",meta:s.options.meta};return b(Z),Z})(),w=await f(E),{maxPages:C}=s.options,S=p?Kl:Gl;return{pages:S(g.pages,w,C),pageParams:S(g.pageParams,N,C)}};if(n&&o.length){const g=n==="backward",N=g?lc:Fn,p={pages:o,pageParams:a},v=N(r,p);l=await x(p,v,g)}else{const g=t??o.length;do{const N=m===0?a[0]??r.initialPageParam:Fn(r,l);if(m>0&&N==null)break;l=await x(l,N),m++}while(m<g)}return l};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},i):s.fetchFn=h}}}function Fn(t,{pages:s,pageParams:i}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,i[r],i):void 0}function lc(t,{pages:s,pageParams:i}){return s.length>0?t.getPreviousPageParam?.(s[0],s,i[0],i):void 0}var cc=class{#s;#e;#t;#i;#r;#a;#o;#n;constructor(t={}){this.#s=t.queryCache||new rc,this.#e=t.mutationCache||new ac,this.#t=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=un.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#s.onFocus())}),this.#n=Mi.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#s.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#s.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#s.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),i=this.#s.build(this,s),r=i.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime(nt(s.staleTime,i))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return this.#s.findAll(t).map(({queryKey:s,state:i})=>{const r=i.data;return[s,r]})}setQueryData(t,s,i){const r=this.defaultQueryOptions({queryKey:t}),o=this.#s.get(r.queryHash)?.state.data,a=Hl(s,o);if(a!==void 0)return this.#s.build(this,r).setData(a,{...i,manual:!0})}setQueriesData(t,s,i){return rs.batch(()=>this.#s.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,i)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#s.get(s.queryHash)?.state}removeQueries(t){const s=this.#s;rs.batch(()=>{s.findAll(t).forEach(i=>{s.remove(i)})})}resetQueries(t,s){const i=this.#s;return rs.batch(()=>(i.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const i={revert:!0,...s},r=rs.batch(()=>this.#s.findAll(t).map(n=>n.cancel(i)));return Promise.all(r).then(Ns).catch(Ns)}invalidateQueries(t,s={}){return rs.batch(()=>(this.#s.findAll(t).forEach(i=>{i.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const i={...s,cancelRefetch:s.cancelRefetch??!0},r=rs.batch(()=>this.#s.findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,i);return i.throwOnError||(o=o.catch(Ns)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Ns)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const i=this.#s.build(this,s);return i.isStaleByTime(nt(s.staleTime,i))?i.fetch(s):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ns).catch(Ns)}fetchInfiniteQuery(t){return t.behavior=On(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ns).catch(Ns)}ensureInfiniteQueryData(t){return t.behavior=On(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mi.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#s}getMutationCache(){return this.#e}getDefaultOptions(){return this.#t}setDefaultOptions(t){this.#t=t}setQueryDefaults(t,s){this.#i.set(ri(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#i.values()],i={};return s.forEach(r=>{ni(t,r.queryKey)&&Object.assign(i,r.defaultOptions)}),i}setMutationDefaults(t,s){this.#r.set(ri(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],i={};return s.forEach(r=>{ni(t,r.mutationKey)&&Object.assign(i,r.defaultOptions)}),i}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#t.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=cn(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Pi&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#t.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#s.clear(),this.#e.clear()}},uc=class extends ci{constructor(t,s){super(),this.options=s,this.#s=t,this.#n=null,this.#o=Tr(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}#s;#e=void 0;#t=void 0;#i=void 0;#r;#a;#o;#n;#b;#d;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Un(this.#e,this.options)?this.#m():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Pr(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Pr(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#v(),this.#e.removeObserver(this)}setOptions(t){const s=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zs(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#D(),this.#e.setOptions(this.options),s._defaulted&&!Ar(this.options,s)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&$n(this.#e,i,this.options,s)&&this.#m(),this.updateResult(),r&&(this.#e!==i||Zs(this.options.enabled,this.#e)!==Zs(s.enabled,this.#e)||nt(this.options.staleTime,this.#e)!==nt(s.staleTime,this.#e))&&this.#f();const n=this.#g();r&&(this.#e!==i||Zs(this.options.enabled,this.#e)!==Zs(s.enabled,this.#e)||n!==this.#l)&&this.#N(n)}getOptimisticResult(t){const s=this.#s.getQueryCache().build(this.#s,t),i=this.createResult(s,t);return dc(this,i)&&(this.#i=i,this.#a=this.options,this.#r=this.#e.state),i}getCurrentResult(){return this.#i}trackResult(t,s){return new Proxy(t,{get:(i,r)=>(this.trackProp(r),s?.(r),Reflect.get(i,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#s.defaultQueryOptions(t),i=this.#s.getQueryCache().build(this.#s,s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return this.#m({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#m(t){this.#D();let s=this.#e.fetch(this.options,t);return t?.throwOnError||(s=s.catch(Ns)),s}#f(){this.#E();const t=nt(this.options.staleTime,this.#e);if(wt||this.#i.isStale||!Rr(t))return;const i=Ho(this.#i.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#i.isStale||this.updateResult()},i)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#N(t){this.#v(),this.#l=t,!(wt||Zs(this.options.enabled,this.#e)===!1||!Rr(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||un.isFocused())&&this.#m()},this.#l))}#x(){this.#f(),this.#N(this.#g())}#E(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#v(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,s){const i=this.#e,r=this.options,n=this.#i,o=this.#r,a=this.#a,m=t!==i?t.state:this.#t,{state:h}=t;let u={...h},b=!1,f;if(s._optimisticResults){const T=this.hasListeners(),U=!T&&Un(t,s),W=T&&$n(t,i,s,r);(U||W)&&(u={...u,...Qo(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:N}=u;f=u.data;let p=!1;if(s.placeholderData!==void 0&&f===void 0&&N==="pending"){let T;n?.isPlaceholderData&&s.placeholderData===a?.placeholderData?(T=n.data,p=!0):T=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,T!==void 0&&(N="success",f=_r(n?.data,T,s),b=!0)}if(s.select&&f!==void 0&&!p)if(n&&f===o?.data&&s.select===this.#b)f=this.#d;else try{this.#b=s.select,f=s.select(f),f=_r(n?.data,f,s),this.#d=f,this.#n=null}catch(T){this.#n=T}this.#n&&(x=this.#n,f=this.#d,g=Date.now(),N="error");const v=u.fetchStatus==="fetching",E=N==="pending",w=N==="error",C=E&&v,S=f!==void 0,D={status:N,fetchStatus:u.fetchStatus,isPending:E,isSuccess:N==="success",isError:w,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:u.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>m.dataUpdateCount||u.errorUpdateCount>m.errorUpdateCount,isFetching:v,isRefetching:v&&!E,isLoadingError:w&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:w&&S,isStale:mn(t,s),refetch:this.refetch,promise:this.#o,isEnabled:Zs(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=se=>{D.status==="error"?se.reject(D.error):D.data!==void 0&&se.resolve(D.data)},U=()=>{const se=this.#o=D.promise=Tr();T(se)},W=this.#o;switch(W.status){case"pending":t.queryHash===i.queryHash&&T(W);break;case"fulfilled":(D.status==="error"||D.data!==W.value)&&U();break;case"rejected":(D.status!=="error"||D.error!==W.reason)&&U();break}}return D}updateResult(){const t=this.#i,s=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#a=this.options,this.#r.data!==void 0&&(this.#h=this.#e),Ar(s,t))return;this.#i=s;const i=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!this.#p.size)return!0;const o=new Set(n??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#i).some(a=>{const l=a;return this.#i[l]!==t[l]&&o.has(l)})};this.#y({listeners:i()})}#D(){const t=this.#s.getQueryCache().build(this.#s,this.options);if(t===this.#e)return;const s=this.#e;this.#e=t,this.#t=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#y(t){rs.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#i)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function mc(t,s){return Zs(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Un(t,s){return mc(t,s)||t.state.data!==void 0&&Pr(t,s,s.refetchOnMount)}function Pr(t,s,i){if(Zs(s.enabled,t)!==!1&&nt(s.staleTime,t)!=="static"){const r=typeof i=="function"?i(t):i;return r==="always"||r!==!1&&mn(t,s)}return!1}function $n(t,s,i,r){return(t!==s||Zs(r.enabled,t)===!1)&&(!i.suspense||t.state.status!=="error")&&mn(t,i)}function mn(t,s){return Zs(s.enabled,t)!==!1&&t.isStaleByTime(nt(s.staleTime,t))}function dc(t,s){return!Ar(t.getCurrentResult(),s)}var Xo=c.createContext(void 0),hc=t=>{const s=c.useContext(Xo);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},pc=({client:t,children:s})=>(c.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Al.jsx(Xo.Provider,{value:t,children:s})),ea=c.createContext(!1),bc=()=>c.useContext(ea);ea.Provider;function fc(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gc=c.createContext(fc()),Nc=()=>c.useContext(gc),xc=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Ec=t=>{c.useEffect(()=>{t.clearReset()},[t])},vc=({result:t,errorResetBoundary:s,throwOnError:i,query:r,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||Jl(i,[t.error,r])),Dc=t=>{if(t.suspense){const s=r=>r==="static"?r:Math.max(r??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...r)=>s(i(...r)):s(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},yc=(t,s)=>t.isLoading&&t.isFetching&&!s,wc=(t,s)=>t?.suspense&&s.isPending,qn=(t,s,i)=>s.fetchOptimistic(t).catch(()=>{i.clearReset()});function Cc(t,s,i){if(typeof t!="object"||Array.isArray(t))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');const r=bc(),n=Nc(),o=hc(),a=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a.queryFn||console.error(`[${a.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`),a._optimisticResults=r?"isRestoring":"optimistic",Dc(a),xc(a,n),Ec(n);const l=!o.getQueryCache().get(a.queryHash),[m]=c.useState(()=>new s(o,a)),h=m.getOptimisticResult(a),u=!r&&t.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(b=>{const f=u?m.subscribe(rs.batchCalls(b)):Ns;return m.updateResult(),f},[m,u]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),c.useEffect(()=>{m.setOptions(a)},[a,m]),wc(a,h))throw qn(a,m,n);if(vc({result:h,errorResetBoundary:n,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(a,h),a.experimental_prefetchInRender&&!wt&&yc(h,r)&&(l?qn(a,m,n):o.getQueryCache().get(a.queryHash)?.promise)?.catch(Ns).finally(()=>{m.updateResult()}),a.notifyOnChangeProps?h:m.trackResult(h)}function Et(t,s){return Cc(t,uc)}const ws=new cc({defaultOptions:{queries:{staleTime:60*1e3,retry:1,refetchOnWindowFocus:!1}}}),Bi={"--spacing-0":"0rem","--spacing-1":"0.25rem","--spacing-2":"0.5rem","--spacing-3":"0.75rem","--spacing-4":"1rem","--spacing-5":"1.25rem","--spacing-6":"1.5rem","--spacing-8":"2rem","--spacing-10":"2.5rem","--spacing-12":"3rem","--spacing-16":"4rem","--spacing-20":"5rem","--spacing-24":"6rem","--spacing-32":"8rem","--spacing-40":"10rem","--spacing-48":"12rem","--spacing-56":"14rem","--spacing-64":"16rem","--radius-none":"0px","--radius-sm":"0.125rem","--radius-md":"0.25rem","--radius-lg":"0.5rem","--radius-xl":"0.75rem","--radius-2xl":"1rem","--radius-3xl":"1.5rem","--radius-full":"9999px","--font-family-sans":"ui-sans-serif, system-ui, sans-serif","--font-family-mono":'ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, monospace',"--font-family-display":'"Inter Display", ui-sans-serif, system-ui, sans-serif',"--font-size-xs":"0.75rem","--font-size-sm":"0.875rem","--font-size-base":"1rem","--font-size-lg":"1.125rem","--font-size-xl":"1.25rem","--font-size-2xl":"1.5rem","--font-size-3xl":"1.875rem","--font-size-4xl":"2.25rem","--font-size-5xl":"3rem","--font-size-6xl":"3.75rem","--font-weight-light":"300","--font-weight-normal":"400","--font-weight-medium":"500","--font-weight-semibold":"600","--font-weight-bold":"700","--font-weight-extrabold":"800","--line-height-tight":"1.25","--line-height-normal":"1.5","--line-height-relaxed":"1.75","--glass-blur-none":"0px","--glass-blur-sm":"6px","--glass-blur-md":"12px","--glass-blur-lg":"20px","--glass-blur-xl":"32px","--glass-blur-2xl":"48px","--glass-blur-3xl":"80px","--glass-opacity-light":"0.08","--glass-opacity-medium":"0.15","--glass-opacity-heavy":"0.25","--glass-opacity-light-mobile":"0.18","--glass-opacity-medium-mobile":"0.28","--glass-opacity-heavy-mobile":"0.38","--animation-duration-instant":"0ms","--animation-duration-fast":"150ms","--animation-duration-normal":"300ms","--animation-duration-slow":"500ms","--animation-duration-slower":"750ms","--animation-easing-linear":"linear","--animation-easing-ease-in":"cubic-bezier(0.4, 0, 1, 1)","--animation-easing-ease-out":"cubic-bezier(0, 0, 0.2, 1)","--animation-easing-ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)","--animation-easing-spring":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","--shadow-sm":"0 1px 2px 0 rgba(0, 0, 0, 0.05)","--shadow-md":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)","--shadow-lg":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)","--shadow-xl":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","--shadow-2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)","--ring-primary":"rgb(var(--color-primary-500) / 0.30)","--ring-danger":"rgb(var(--color-error-500) / 0.30)","--ring-focus":"rgb(var(--color-primary-500) / 0.30)","--breakpoint-sm":"640px","--breakpoint-md":"768px","--breakpoint-lg":"1024px","--breakpoint-xl":"1280px","--breakpoint-2xl":"1536px"},jc={name:"light",displayName:"Light Mode",type:"light",cssVariables:{...Bi,"--color-primary-50":"250 245 255","--color-primary-100":"243 232 255","--color-primary-200":"233 213 255","--color-primary-300":"216 180 254","--color-primary-400":"196 143 253","--color-primary-500":"168 85 247","--color-primary-600":"147 51 234","--color-primary-700":"126 34 206","--color-primary-800":"107 33 168","--color-primary-900":"88 28 135","--color-primary-950":"59 7 100","--color-secondary-50":"236 254 255","--color-secondary-500":"6 182 212","--color-secondary-900":"22 78 99","--color-success-50":"236 253 245","--color-success-500":"16 185 129","--color-success-900":"6 78 59","--color-error-50":"254 242 242","--color-error-500":"239 68 68","--color-error-900":"127 29 29","--color-warning-50":"255 251 235","--color-warning-500":"245 158 11","--color-warning-900":"146 64 14","--color-neutral-0":"255 255 255","--color-neutral-50":"249 250 251","--color-neutral-100":"243 244 246","--color-neutral-200":"229 231 235","--color-neutral-300":"209 213 219","--color-neutral-400":"156 163 175","--color-neutral-500":"107 114 128","--color-neutral-600":"75 85 99","--color-neutral-700":"55 65 81","--color-neutral-800":"31 41 55","--color-neutral-900":"17 24 39","--color-neutral-950":"3 7 18","--color-neutral-1000":"0 0 0","--color-text-primary":"17 24 39","--color-text-secondary":"55 65 81","--color-text-muted":"107 114 128","--color-text-accent":"17 24 39","--color-financial-revenue":"5 150 105","--color-financial-expense":"220 38 38","--color-financial-asset":"37 99 235","--color-financial-liability":"217 119 6","--color-financial-equity":"147 51 234","--color-financial-profit":"22 163 74","--color-financial-loss":"185 28 28","--glass-background":"rgba(255, 255, 255, var(--glass-opacity-medium))","--glass-border":"var(--glass-border-medium)","--shadow-glass":"0 10px 30px rgba(0, 0, 0, 0.10)","--glass-glow":"var(--shadow-glow-md)","--glass-border-light":"rgba(0, 0, 0, 0.1)","--glass-border-medium":"rgba(0, 0, 0, 0.2)","--glass-border-heavy":"rgba(0, 0, 0, 0.3)","--shadow-glow-sm":"0 0 10px rgba(168, 85, 247, 0.3)","--shadow-glow-md":"0 0 20px rgba(168, 85, 247, 0.4)","--shadow-glow-lg":"0 0 30px rgba(168, 85, 247, 0.5)","--surface-1-bg":"rgba(255, 255, 255, var(--glass-opacity-light))","--surface-1-border":"var(--glass-border-light)","--surface-1-blur":"var(--glass-blur-lg)","--surface-2-bg":"rgba(255, 255, 255, var(--glass-opacity-medium))","--surface-2-border":"var(--glass-border-medium)","--surface-2-blur":"var(--glass-blur-xl)","--surface-3-bg":"rgba(255, 255, 255, var(--glass-opacity-heavy))","--surface-3-border":"var(--glass-border-heavy)","--surface-3-blur":"var(--glass-blur-2xl)","--ring-primary":"rgb(var(--color-primary-500) / 0.35)","--ring-danger":"rgb(var(--color-error-500) / 0.35)","--ring-focus":"rgb(var(--color-primary-500) / 0.35)","--gradient-aurora-start":"rgb(var(--color-primary-500) / 0.10)","--gradient-aurora-stop":"rgb(var(--color-secondary-500) / 0.08)"}},Vc={name:"dark",displayName:"Pure Elegance",type:"dark",cssVariables:{...Bi,"--color-primary-50":"15 15 15","--color-primary-100":"30 30 30","--color-primary-200":"60 60 60","--color-primary-300":"120 120 120","--color-primary-400":"180 180 180","--color-primary-500":"255 255 255","--color-primary-600":"255 255 255","--color-primary-700":"255 255 255","--color-primary-800":"255 255 255","--color-primary-900":"255 255 255","--color-primary-950":"255 255 255","--color-secondary-50":"6 78 59","--color-secondary-500":"6 255 255","--color-secondary-900":"165 255 255","--color-success-50":"6 78 59","--color-success-500":"16 255 136","--color-success-900":"165 255 207","--color-error-50":"127 29 29","--color-error-500":"255 51 85","--color-error-900":"255 182 193","--color-warning-50":"146 64 14","--color-warning-500":"255 215 0","--color-warning-900":"255 248 181","--color-neutral-0":"0 0 0","--color-neutral-50":"4 4 4","--color-neutral-100":"8 8 8","--color-neutral-200":"12 12 12","--color-neutral-300":"18 18 18","--color-neutral-400":"28 28 28","--color-neutral-500":"80 80 80","--color-neutral-600":"140 140 140","--color-neutral-700":"180 180 180","--color-neutral-800":"220 220 220","--color-neutral-900":"240 240 240","--color-neutral-950":"250 250 250","--color-neutral-1000":"255 255 255","--color-text-primary":"255 255 255","--color-text-secondary":"230 230 230","--color-text-muted":"200 200 200","--color-text-accent":"255 255 255","--color-financial-revenue":"16 255 136","--color-financial-expense":"255 51 85","--color-financial-asset":"51 153 255","--color-financial-liability":"255 178 51","--color-financial-equity":"192 38 211","--color-financial-profit":"57 255 112","--color-financial-loss":"255 34 68","--glass-background":"rgba(25, 25, 35, var(--glass-opacity-medium))","--glass-border":"var(--glass-border-medium)","--shadow-glass":"0 8px 32px rgba(0, 0, 0, 0.3)","--glass-glow":"var(--shadow-glow-md)","--glass-border-light":"rgba(255, 255, 255, 0.08)","--glass-border-medium":"rgba(255, 255, 255, 0.12)","--glass-border-heavy":"rgba(255, 255, 255, 0.16)","--shadow-glow-sm":"0 0 8px rgba(255, 255, 255, 0.2)","--shadow-glow-md":"0 0 12px rgba(255, 255, 255, 0.25)","--shadow-glow-lg":"0 0 16px rgba(255, 255, 255, 0.3)","--surface-1-bg":"rgba(25, 25, 35, var(--glass-opacity-light))","--surface-1-border":"var(--glass-border-light)","--surface-1-blur":"var(--glass-blur-lg)","--surface-2-bg":"rgba(25, 25, 35, var(--glass-opacity-medium))","--surface-2-border":"var(--glass-border-medium)","--surface-2-blur":"var(--glass-blur-xl)","--surface-3-bg":"rgba(25, 25, 35, var(--glass-opacity-heavy))","--surface-3-border":"var(--glass-border-heavy)","--surface-3-blur":"var(--glass-blur-2xl)","--ring-primary":"rgb(var(--color-primary-500) / 0.28)","--ring-danger":"rgb(var(--color-error-500) / 0.28)","--ring-focus":"rgb(var(--color-primary-500) / 0.28)","--gradient-aurora-start":"rgb(var(--color-primary-500) / 0.06)","--gradient-aurora-stop":"rgb(var(--color-secondary-500) / 0.05)"}},Zc={name:"blue",displayName:"Cyber Blue",type:"dark",cssVariables:{...Bi,"--color-primary-50":"8 28 68","--color-primary-100":"12 42 95","--color-primary-200":"23 71 140","--color-primary-300":"37 99 235","--color-primary-400":"59 130 246","--color-primary-500":"0 195 255","--color-primary-600":"56 217 255","--color-primary-700":"102 238 255","--color-primary-800":"153 246 255","--color-primary-900":"204 251 255","--color-primary-950":"230 253 255","--color-secondary-50":"4 47 46","--color-secondary-500":"20 255 240","--color-secondary-900":"153 255 251","--color-success-50":"5 46 22","--color-success-500":"57 255 20","--color-success-900":"187 255 153","--color-error-50":"75 5 24","--color-error-500":"255 20 57","--color-error-900":"255 153 187","--color-warning-50":"67 20 7","--color-warning-500":"255 140 0","--color-warning-900":"255 204 153","--color-neutral-0":"0 0 0","--color-neutral-50":"4 4 6","--color-neutral-100":"8 8 12","--color-neutral-200":"12 12 16","--color-neutral-300":"18 18 24","--color-neutral-400":"28 28 35","--color-neutral-500":"80 80 90","--color-neutral-600":"140 140 150","--color-neutral-700":"180 180 190","--color-neutral-800":"220 220 230","--color-neutral-900":"240 240 245","--color-neutral-950":"250 250 252","--color-neutral-1000":"255 255 255","--color-text-primary":"255 255 255","--color-text-secondary":"230 235 245","--color-text-muted":"200 210 220","--color-text-accent":"255 255 255","--color-financial-revenue":"57 255 20","--color-financial-expense":"255 20 57","--color-financial-asset":"0 195 255","--color-financial-liability":"255 140 0","--color-financial-equity":"20 255 240","--color-financial-profit":"102 255 51","--color-financial-loss":"255 51 102","--glass-background":"rgba(25, 28, 38, var(--glass-opacity-medium))","--glass-border":"var(--glass-border-medium)","--shadow-glass":"0 8px 32px rgba(0, 0, 0, 0.4)","--glass-glow":"var(--shadow-glow-md)","--glass-border-light":"rgba(255, 255, 255, 0.08)","--glass-border-medium":"rgba(255, 255, 255, 0.12)","--glass-border-heavy":"rgba(255, 255, 255, 0.16)","--shadow-glow-sm":"0 0 8px rgba(0, 195, 255, 0.25)","--shadow-glow-md":"0 0 12px rgba(0, 195, 255, 0.3)","--shadow-glow-lg":"0 0 16px rgba(0, 195, 255, 0.35)"}},Sc={name:"green",displayName:"Emerald Luxury",type:"dark",cssVariables:{...Bi,"--color-primary-50":"6 78 54","--color-primary-100":"10 120 80","--color-primary-200":"16 150 100","--color-primary-300":"22 180 120","--color-primary-400":"34 197 94","--color-primary-500":"0 255 127","--color-primary-600":"64 255 153","--color-primary-700":"127 255 191","--color-primary-800":"178 255 217","--color-primary-900":"217 255 238","--color-primary-950":"239 255 247","--color-secondary-50":"92 64 14","--color-secondary-500":"255 215 0","--color-secondary-900":"255 243 179","--color-success-50":"6 78 59","--color-success-500":"20 255 147","--color-success-900":"153 255 204","--color-error-50":"87 13 13","--color-error-500":"255 51 51","--color-error-900":"255 153 153","--color-warning-50":"92 64 14","--color-warning-500":"255 191 0","--color-warning-900":"255 235 153","--color-neutral-0":"0 0 0","--color-neutral-50":"4 5 4","--color-neutral-100":"8 10 8","--color-neutral-200":"12 14 12","--color-neutral-300":"18 22 18","--color-neutral-400":"28 32 28","--color-neutral-500":"80 85 80","--color-neutral-600":"140 145 140","--color-neutral-700":"180 185 180","--color-neutral-800":"220 225 220","--color-neutral-900":"240 242 240","--color-neutral-950":"250 252 250","--color-neutral-1000":"255 255 255","--color-text-primary":"255 255 255","--color-text-secondary":"230 235 230","--color-text-muted":"200 210 200","--color-text-accent":"255 255 255","--color-financial-revenue":"0 255 127","--color-financial-expense":"255 51 51","--color-financial-asset":"64 224 208","--color-financial-liability":"255 191 0","--color-financial-equity":"255 215 0","--color-financial-profit":"50 255 126","--color-financial-loss":"255 69 58","--glass-background":"rgba(28, 38, 32, var(--glass-opacity-medium))","--glass-border":"var(--glass-border-medium)","--shadow-glass":"0 8px 32px rgba(0, 0, 0, 0.4)","--glass-glow":"var(--shadow-glow-md)","--glass-border-light":"rgba(255, 255, 255, 0.08)","--glass-border-medium":"rgba(255, 255, 255, 0.12)","--glass-border-heavy":"rgba(255, 255, 255, 0.16)","--shadow-glow-sm":"0 0 8px rgba(0, 255, 127, 0.25)","--shadow-glow-md":"0 0 12px rgba(0, 255, 127, 0.3)","--shadow-glow-lg":"0 0 16px rgba(0, 255, 127, 0.35)","--surface-1-bg":"rgba(28, 38, 32, var(--glass-opacity-light))","--surface-1-border":"var(--glass-border-light)","--surface-1-blur":"var(--glass-blur-lg)","--surface-2-bg":"rgba(28, 38, 32, var(--glass-opacity-medium))","--surface-2-border":"var(--glass-border-medium)","--surface-2-blur":"var(--glass-blur-xl)","--surface-3-bg":"rgba(28, 38, 32, var(--glass-opacity-heavy))","--surface-3-border":"var(--glass-border-heavy)","--surface-3-blur":"var(--glass-blur-2xl)","--ring-primary":"rgb(var(--color-primary-500) / 0.28)","--ring-danger":"rgb(var(--color-error-500) / 0.28)","--ring-focus":"rgb(var(--color-primary-500) / 0.28)","--gradient-aurora-start":"rgb(var(--color-primary-500) / 0.06)","--gradient-aurora-stop":"rgb(var(--color-secondary-500) / 0.05)"}},mr={light:jc,dark:Vc,blue:Zc,green:Sc},sa=c.createContext(void 0),Rc=({children:t,defaultTheme:s="light",enableTransitions:i=!0,storageKey:r="eze-ledger-theme"})=>{const[n,o]=c.useState(()=>{const g=typeof window<"u"?localStorage.getItem(r):null;return g&&mr[g]?g:s}),a=c.useMemo(()=>mr[n],[n]),l=c.useMemo(()=>a.type==="dark",[a.type]),m=c.useMemo(()=>Object.keys(mr),[]),h=c.useRef(!1),u=c.useCallback(g=>{const N=document.documentElement;i&&h.current&&N.classList.add("theme-transitioning"),Object.entries(g.cssVariables).forEach(([p,v])=>{N.style.setProperty(p,v)}),h.current||(h.current=!0),i&&N.classList.contains("theme-transitioning")&&setTimeout(()=>{N.classList.remove("theme-transitioning")},300)},[i]),b=c.useCallback(g=>{o(g),localStorage.setItem(r,g)},[r]),f=c.useCallback(()=>{b(n==="light"?"dark":"light")},[n,b]);c.useEffect(()=>{u(a),document.documentElement.classList.remove("preload"),document.documentElement.classList.add("theme-ready")},[a,u]),c.useEffect(()=>{const g=document.documentElement;g.setAttribute("data-theme",n),a.type==="dark"?(g.classList.add("dark"),g.classList.remove("light"),g.style.colorScheme="dark"):(g.classList.add("light"),g.classList.remove("dark"),g.style.colorScheme="light")},[n,a.type]);const x=c.useMemo(()=>({currentTheme:n,themeConfig:a,setTheme:b,toggleTheme:f,isDark:l,availableThemes:m}),[n,a,b,f,l,m]);return e.jsxDEV(sa.Provider,{value:x,children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/theme/ThemeProvider.tsx",lineNumber:122,columnNumber:5},void 0)},Rs=()=>{const t=c.useContext(sa);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},kc=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...i)=>Vt(async()=>{const{default:r}=await Promise.resolve().then(()=>qt);return{default:r}},void 0).then(({default:r})=>r(...i)):s=fetch,(...i)=>s(...i)};class dn extends Error{constructor(s,i="FunctionsError",r){super(s),this.name=i,this.context=r}}class Ac extends dn{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class Bn extends dn{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class zn extends dn{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Mr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mr||(Mr={}));var Ic=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};class _c{constructor(s,{headers:i={},customFetch:r,region:n=Mr.Any}={}){this.url=s,this.headers=i,this.region=n,this.fetch=kc(r)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,i={}){var r;return Ic(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:a}=i;let l={},{region:m}=i;m||(m=this.region);const h=new URL(`${this.url}/${s}`);m&&m!=="any"&&(l["x-region"]=m,h.searchParams.set("forceFunctionRegion",m));let u;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const b=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(N=>{throw new Ac(N)}),f=b.headers.get("x-relay-error");if(f&&f==="true")throw new Bn(b);if(!b.ok)throw new zn(b);let x=((r=b.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield b.json():x==="application/octet-stream"?g=yield b.blob():x==="text/event-stream"?g=b:x==="multipart/form-data"?g=yield b.formData():g=yield b.text(),{data:g,error:null,response:b}}catch(n){return{data:null,error:n,response:n instanceof zn||n instanceof Bn?n.context:void 0}}})}}var xs={},hn={},zi={},ui={},Hi={},Wi={},Tc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$t=Tc();const Pc=$t.fetch,ta=$t.fetch.bind($t),ia=$t.Headers,Mc=$t.Request,Lc=$t.Response,qt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ia,Request:Mc,Response:Lc,default:ta,fetch:Pc},Symbol.toStringTag,{value:"Module"})),Oc=kl(qt);var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});let Fc=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}};Gi.default=Fc;var ra=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});const Uc=ra(Oc),$c=ra(Gi);let qc=class{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=Uc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,m;let h=null,u=null,b=null,f=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const N=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),p=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");N&&p&&p.length>1&&(b=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(h={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,b=null,f=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const N=await o.text();try{h=JSON.parse(N),Array.isArray(h)&&o.status===404&&(u=[],h=null,f=200,x="OK")}catch{o.status===404&&N===""?(f=204,x="No Content"):h={message:N}}if(h&&this.isMaybeSingle&&(!((m=h?.details)===null||m===void 0)&&m.includes("0 rows"))&&(h=null,f=200,x="OK"),h&&this.shouldThrowOnError)throw new $c.default(h)}return{error:h,data:u,count:b,status:f,statusText:x}});return this.shouldThrowOnError||(n=n.catch(o=>{var a,l,m;return{error:{message:`${(a=o?.name)!==null&&a!==void 0?a:"FetchError"}: ${o?.message}`,details:`${(l=o?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(m=o?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),n.then(s,i)}returns(){return this}overrideTypes(){return this}};Wi.default=qc;var Bc=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hi,"__esModule",{value:!0});const zc=Bc(Wi);let Hc=class extends zc.default{select(s){let i=!1;const r=(s??"*").split("").map(n=>/\s/.test(n)&&!i?"":(n==='"'&&(i=!i),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:r,foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${s}.${i?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:r=i}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,i,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${s}`),this.url.searchParams.set(a,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:a="text"}={}){var l;const m=[s?"analyze":null,i?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${h}"; options=${m};`,a==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Hi.default=Hc;var Wc=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ui,"__esModule",{value:!0});const Gc=Wc(Hi);let Kc=class extends Gc.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const r=Array.from(new Set(i)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:r,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${o}fts${a}.${i}`),this}match(s){return Object.entries(s).forEach(([i,r])=>{this.url.searchParams.append(i,`eq.${r}`)}),this}not(s,i,r){return this.url.searchParams.append(s,`not.${i}.${r}`),this}or(s,{foreignTable:i,referencedTable:r=i}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,i,r){return this.url.searchParams.append(s,`${i}.${r}`),this}};ui.default=Kc;var Jc=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zi,"__esModule",{value:!0});const Kt=Jc(ui);let Yc=class{constructor(s,{headers:i={},schema:r,fetch:n}){this.url=s,this.headers=i,this.schema=r,this.fetch=n}select(s,{head:i=!1,count:r}={}){const n=i?"HEAD":"GET";let o=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Kt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:r=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(s)){const a=s.reduce((l,m)=>l.concat(Object.keys(m)),[]);if(a.length>0){const l=[...new Set(a)].map(m=>`"${m}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const m=s.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(m.length>0){const h=[...new Set(m)].map(u=>`"${u}"`);this.url.searchParams.set("columns",h.join(","))}}return new Kt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),i&&n.push(`count=${i}`),this.headers.Prefer=n.join(","),new Kt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",r=[];return s&&r.push(`count=${s}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};zi.default=Yc;var Ki={},Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.version=void 0;Ji.version="0.0.0-automated";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.DEFAULT_HEADERS=void 0;const Qc=Ji;Ki.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qc.version}`};var na=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});const Xc=na(zi),eu=na(ui),su=Ki;let tu=class oa{constructor(s,{headers:i={},schema:r,fetch:n}={}){this.url=s,this.headers=Object.assign(Object.assign({},su.DEFAULT_HEADERS),i),this.schemaName=r,this.fetch=n}from(s){const i=new URL(`${this.url}/${s}`);return new Xc.default(i,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new oa(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,i={},{head:r=!1,get:n=!1,count:o}={}){let a;const l=new URL(`${this.url}/rpc/${s}`);let m;r||n?(a=r?"HEAD":"GET",Object.entries(i).filter(([u,b])=>b!==void 0).map(([u,b])=>[u,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([u,b])=>{l.searchParams.append(u,b)})):(a="POST",m=i);const h=Object.assign({},this.headers);return o&&(h.Prefer=`count=${o}`),new eu.default({method:a,url:l,headers:h,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}};hn.default=tu;var Bt=Ss&&Ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});xs.PostgrestError=xs.PostgrestBuilder=xs.PostgrestTransformBuilder=xs.PostgrestFilterBuilder=xs.PostgrestQueryBuilder=xs.PostgrestClient=void 0;const aa=Bt(hn);xs.PostgrestClient=aa.default;const la=Bt(zi);xs.PostgrestQueryBuilder=la.default;const ca=Bt(ui);xs.PostgrestFilterBuilder=ca.default;const ua=Bt(Hi);xs.PostgrestTransformBuilder=ua.default;const ma=Bt(Wi);xs.PostgrestBuilder=ma.default;const da=Bt(Gi);xs.PostgrestError=da.default;var iu=xs.default={PostgrestClient:aa.default,PostgrestQueryBuilder:la.default,PostgrestFilterBuilder:ca.default,PostgrestTransformBuilder:ua.default,PostgrestBuilder:ma.default,PostgrestError:da.default};const{PostgrestClient:ru,PostgrestQueryBuilder:Yf,PostgrestFilterBuilder:Qf,PostgrestTransformBuilder:Xf,PostgrestBuilder:eg,PostgrestError:sg}=iu;class nu{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const i=parseInt(process.versions.node.split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const r=this.getWebSocketConstructor();return new r(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const ou="2.15.1",au=`realtime-js/${ou}`,lu="1.0.0",Lr=1e4,cu=1e3,uu=100;var si;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(si||(si={}));var ts;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ts||(ts={}));var _s;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(_s||(_s={}));var Or;(function(t){t.websocket="websocket"})(Or||(Or={}));var vt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vt||(vt={}));class mu{constructor(){this.HEADER_LENGTH=1}decode(s,i){return s.constructor===ArrayBuffer?i(this._binaryDecode(s)):i(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const i=new DataView(s),r=new TextDecoder;return this._decodeBroadcast(s,i,r)}_decodeBroadcast(s,i,r){const n=i.getUint8(1),o=i.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(s.slice(a,a+n));a=a+n;const m=r.decode(s.slice(a,a+o));a=a+o;const h=JSON.parse(r.decode(s.slice(a,s.byteLength)));return{ref:null,topic:l,event:m,payload:h}}}class ha{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const Hn=(t,s,i={})=>{var r;const n=(r=i.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(s).reduce((o,a)=>(o[a]=du(a,t,s,n),o),{})},du=(t,s,i,r)=>{const n=s.find(l=>l.name===t),o=n?.type,a=i[t];return o&&!r.includes(o)?pa(o,a):Fr(a)},pa=(t,s)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return fu(s,i)}switch(t){case $e.bool:return hu(s);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return pu(s);case $e.json:case $e.jsonb:return bu(s);case $e.timestamp:return gu(s);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Fr(s);default:return Fr(s)}},Fr=t=>t,hu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},pu=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},bu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},fu=(t,s)=>{if(typeof t!="string")return t;const i=t.length-1,r=t[i];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,i);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>pa(s,l))}return t},gu=t=>typeof t=="string"?t.replace(" ","T"):t,ba=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class dr{constructor(s,i,r={},n=Lr){this.channel=s,this.event=i,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var r;return this._hasReceived(s)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(r=>r.status===s).forEach(r=>r.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Wn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Wn||(Wn={}));class ti{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ti.syncState(this.state,n,o,a),this.pendingDiffs.forEach(m=>{this.state=ti.syncDiff(this.state,m,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ti.syncDiff(this.state,n,o,a),l())}),this.onJoin((n,o,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:a})}),this.onLeave((n,o,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,r,n){const o=this.cloneDeep(s),a=this.transformState(i),l={},m={};return this.map(o,(h,u)=>{a[h]||(m[h]=u)}),this.map(a,(h,u)=>{const b=o[h];if(b){const f=u.map(p=>p.presence_ref),x=b.map(p=>p.presence_ref),g=u.filter(p=>x.indexOf(p.presence_ref)<0),N=b.filter(p=>f.indexOf(p.presence_ref)<0);g.length>0&&(l[h]=g),N.length>0&&(m[h]=N)}else l[h]=u}),this.syncDiff(o,{joins:l,leaves:m},r,n)}static syncDiff(s,i,r,n){const{joins:o,leaves:a}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(l,m)=>{var h;const u=(h=s[l])!==null&&h!==void 0?h:[];if(s[l]=this.cloneDeep(m),u.length>0){const b=s[l].map(x=>x.presence_ref),f=u.filter(x=>b.indexOf(x.presence_ref)<0);s[l].unshift(...f)}r(l,u,m)}),this.map(a,(l,m)=>{let h=s[l];if(!h)return;const u=m.map(b=>b.presence_ref);h=h.filter(b=>u.indexOf(b.presence_ref)<0),s[l]=h,n(l,h,m),h.length===0&&delete s[l]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(r=>i(r,s[r]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,r)=>{const n=s[r];return"metas"in n?i[r]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):i[r]=n,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Gn||(Gn={}));var ii;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ii||(ii={}));var Ws;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ws||(Ws={}));class pn{constructor(s,i={config:{}},r){this.topic=s,this.params=i,this.socket=r,this.bindings={},this.state=ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new dr(this,_s.join,this.params,this.timeout),this.rejoinTimer=new ha(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ts.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_s.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new ti(this),this.broadcastEndpointURL=ba(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,i=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ts.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,m=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[ii.PRESENCE]&&this.bindings[ii.PRESENCE].length>0,u={},b={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:m,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(f=>s?.(Ws.CHANNEL_ERROR,f)),this._onClose(()=>s?.(Ws.CLOSED)),this.updateJoinPayload(Object.assign({config:b},u)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:f})=>{var x;if(this.socket.setAuth(),f===void 0){s?.(Ws.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,N=(x=g?.length)!==null&&x!==void 0?x:0,p=[];for(let v=0;v<N;v++){const E=g[v],{filter:{event:w,schema:C,table:S,filter:Z}}=E,D=f&&f[v];if(D&&D.event===w&&D.schema===C&&D.table===S&&D.filter===Z)p.push(Object.assign(Object.assign({},E),{id:D.id}));else{this.unsubscribe(),this.state=ts.errored,s?.(Ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,s&&s(Ws.SUBSCRIBED);return}}).receive("error",f=>{this.state=ts.errored,s?.(Ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{s?.(Ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,r){return this.state===ts.joined&&s===ii.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,i,r)}async send(s,i={}){var r,n;if(!this._canPush()&&s.type==="broadcast"){const{event:o,payload:a}=s,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,m;const h=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((m=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||m===void 0)&&m.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=ts.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_s.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new dr(this,_s.leave,{},s),r.receive("ok",()=>{i(),n("ok")}).receive("timeout",()=>{i(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ts.closed,this.bindings={}}async _fetchWithTimeout(s,i,r){const n=new AbortController,o=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:n.signal}));return clearTimeout(o),a}_push(s,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dr(this,s,i,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>uu){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,r){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,r){var n,o;const a=s.toLocaleLowerCase(),{close:l,error:m,leave:h,join:u}=_s;if(r&&[l,m,h,u].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,i,r);if(i&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var g,N,p;return((g=x.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(N=x.filter)===null||N===void 0?void 0:N.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(x=>x.callback(f,r)):(o=this.bindings[a])===null||o===void 0||o.filter(x=>{var g,N,p,v,E,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const C=x.id,S=(g=x.filter)===null||g===void 0?void 0:g.event;return C&&((N=i.ids)===null||N===void 0?void 0:N.includes(C))&&(S==="*"||S?.toLocaleLowerCase()===((p=i.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const C=(E=(v=x?.filter)===null||v===void 0?void 0:v.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return C==="*"||C===((w=i?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:N,table:p,commit_timestamp:v,type:E,errors:w}=g;f=Object.assign(Object.assign({},{schema:N,table:p,commit_timestamp:v,eventType:E,new:{},old:{},errors:w}),this._getPayloadRecords(g))}x.callback(f,r)})}_isClosed(){return this.state===ts.closed}_isJoined(){return this.state===ts.joined}_isJoining(){return this.state===ts.joining}_isLeaving(){return this.state===ts.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,r){const n=s.toLocaleLowerCase(),o={type:n,filter:i,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(s,i){const r=s.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&pn.isEqual(n.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const r in s)if(s[r]!==i[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(_s.close,{},s)}_onError(s){this._on(_s.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ts.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=Hn(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=Hn(s.columns,s.old_record)),i}}const Kn=()=>{},Ei={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Nu=[1e3,2e3,5e3,1e4],xu=1e4,Eu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vu{constructor(s,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lr,this.transport=null,this.heartbeatIntervalMs=Ei.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kn,this.ref=0,this.reconnectTimer=null,this.logger=Kn,this.conn=null,this.sendBuffer=[],this.serializer=new mu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>Vt(async()=>{const{default:l}=await Promise.resolve().then(()=>qt);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=i?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${Or.websocket}`,this.httpEndpoint=ba(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nu.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lu}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},s?this.conn.close(s,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,r){this.logger(s,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case si.connecting:return vt.Connecting;case si.open:return vt.Open;case si.closing:return vt.Closing;default:return vt.Closed}}isConnected(){return this.connectionState()===vt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const r=`realtime:${s}`,n=this.getChannels().find(o=>o.topic===r);if(n)return n;{const o=new pn(`realtime:${s}`,i,this);return this.channels.push(o),o}}push(s){const{topic:i,event:r,payload:n,ref:o}=s,a=()=>{this.encode(s,l=>{var m;(m=this.conn)===null||m===void 0||m.send(l)})};this.log("push",`${i} ${r} (${o})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(cu,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ei.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(r=>r.topic===s&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{i.topic==="phoenix"&&i.event==="phx_reply"&&this.heartbeatCallback(i.payload.status==="ok"?"ok":"error"),i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:o,ref:a}=i,l=a?`(${a})`:"",m=o.status||"";this.log("receive",`${m} ${r} ${n} ${l}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(n,o,a)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(_s.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const r=s.match(/\?/)?"&":"?",n=new URLSearchParams(i);return`${s}${r}${n}`}_workerObjectUrl(s){let i;if(s)i=s;else{const r=new Blob([Eu],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i;s?i=s:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const n={access_token:i,version:au};i&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(_s.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(r=>{try{r(i)}catch(n){this.log("error",`error in ${s} callback`,n)}})}catch(r){this.log("error",`error triggering ${s} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ha(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ei.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,r,n,o,a,l,m,h;if(this.transport=(i=s?.transport)!==null&&i!==void 0?i:null,this.timeout=(r=s?.timeout)!==null&&r!==void 0?r:Lr,this.heartbeatIntervalMs=(n=s?.heartbeatIntervalMs)!==null&&n!==void 0?n:Ei.HEARTBEAT_INTERVAL,this.worker=(o=s?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=s?.accessToken)!==null&&a!==void 0?a:null,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=s?.reconnectAfterMs)!==null&&l!==void 0?l:u=>Nu[u-1]||xu,this.encode=(m=s?.encode)!==null&&m!==void 0?m:(u,b)=>b(JSON.stringify(u)),this.decode=(h=s?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class bn extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function is(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Du extends bn{constructor(s,i,r){super(s),this.name="StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ur extends bn{constructor(s,i){super(s),this.name="StorageUnknownError",this.originalError=i}}var yu=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};const fa=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...i)=>Vt(async()=>{const{default:r}=await Promise.resolve().then(()=>qt);return{default:r}},void 0).then(({default:r})=>r(...i)):s=fetch,(...i)=>s(...i)},wu=()=>yu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vt(()=>Promise.resolve().then(()=>qt),void 0)).Response:Response}),$r=t=>{if(Array.isArray(t))return t.map(i=>$r(i));if(typeof t=="function"||t!==Object(t))return t;const s={};return Object.entries(t).forEach(([i,r])=>{const n=i.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));s[n]=$r(r)}),s},Cu=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Zt=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};const hr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ju=(t,s,i)=>Zt(void 0,void 0,void 0,function*(){const r=yield wu();t instanceof r&&!i?.noResolveJson?t.json().then(n=>{const o=t.status||500,a=n?.statusCode||o+"";s(new Du(hr(n),o,a))}).catch(n=>{s(new Ur(hr(n),n))}):s(new Ur(hr(t),t))}),Vu=(t,s,i,r)=>{const n={method:t,headers:s?.headers||{}};return t==="GET"||!r?n:(Cu(r)?(n.headers=Object.assign({"Content-Type":"application/json"},s?.headers),n.body=JSON.stringify(r)):n.body=r,s?.duplex&&(n.duplex=s.duplex),Object.assign(Object.assign({},n),i))};function mi(t,s,i,r,n,o){return Zt(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(i,Vu(s,r,n,o)).then(m=>{if(!m.ok)throw m;return r?.noResolveJson?m:m.json()}).then(m=>a(m)).catch(m=>ju(m,l,r))})})}function Li(t,s,i,r){return Zt(this,void 0,void 0,function*(){return mi(t,"GET",s,i,r)})}function Fs(t,s,i,r,n){return Zt(this,void 0,void 0,function*(){return mi(t,"POST",s,r,n,i)})}function qr(t,s,i,r,n){return Zt(this,void 0,void 0,function*(){return mi(t,"PUT",s,r,n,i)})}function Zu(t,s,i,r){return Zt(this,void 0,void 0,function*(){return mi(t,"HEAD",s,Object.assign(Object.assign({},i),{noResolveJson:!0}),r)})}function ga(t,s,i,r,n){return Zt(this,void 0,void 0,function*(){return mi(t,"DELETE",s,r,n,i)})}var ds=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};const Su={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ru{constructor(s,i={},r,n){this.url=s,this.headers=i,this.bucketId=r,this.fetch=fa(n)}uploadOrUpdate(s,i,r,n){return ds(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Jn),n);let l=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(a.upsert)});const m=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),m&&o.append("metadata",this.encodeMetadata(m)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),m&&o.append("metadata",this.encodeMetadata(m))):(o=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,m&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));const h=this._removeEmptyFolders(i),u=this._getFinalPath(h),b=yield(s=="PUT"?qr:Fs)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:b.Id,fullPath:b.Key},error:null}}catch(o){if(is(o))return{data:null,error:o};throw o}})}upload(s,i,r){return ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,i,r)})}uploadToSignedUrl(s,i,r,n){return ds(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(s),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",i);try{let m;const h=Object.assign({upsert:Jn.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",h.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",h.cacheControl)):(m=r,u["cache-control"]=`max-age=${h.cacheControl}`,u["content-type"]=h.contentType);const b=yield qr(this.fetch,l.toString(),m,{headers:u});return{data:{path:o,fullPath:b.Key},error:null}}catch(m){if(is(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(s,i){return ds(this,void 0,void 0,function*(){try{let r=this._getFinalPath(s);const n=Object.assign({},this.headers);i?.upsert&&(n["x-upsert"]="true");const o=yield Fs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new bn("No token returned by API");return{data:{signedUrl:a.toString(),path:s,token:l},error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}update(s,i,r){return ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,i,r)})}move(s,i,r){return ds(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}copy(s,i,r){return ds(this,void 0,void 0,function*(){try{return{data:{path:(yield Fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}createSignedUrl(s,i,r){return ds(this,void 0,void 0,function*(){try{let n=this._getFinalPath(s),o=yield Fs(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:i},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}createSignedUrls(s,i,r){return ds(this,void 0,void 0,function*(){try{const n=yield Fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:s},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}download(s,i){return ds(this,void 0,void 0,function*(){const n=typeof i?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(i?.transform||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(s);return{data:yield(yield Li(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(is(l))return{data:null,error:l};throw l}})}info(s){return ds(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{const r=yield Li(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:$r(r),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}exists(s){return ds(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{return yield Zu(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(is(r)&&r instanceof Ur){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(s,i){const r=this._getFinalPath(s),n=[],o=i?.download?`download=${i.download===!0?"":i.download}`:"";o!==""&&n.push(o);const l=typeof i?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(i?.transform||{});m!==""&&n.push(m);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(s){return ds(this,void 0,void 0,function*(){try{return{data:yield ga(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(i){if(is(i))return{data:null,error:i};throw i}})}list(s,i,r){return ds(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Su),i),{prefix:s||""});return{data:yield Fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(is(n))return{data:null,error:n};throw n}})}listV2(s,i){return ds(this,void 0,void 0,function*(){try{const r=Object.assign({},s);return{data:yield Fs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const i=[];return s.width&&i.push(`width=${s.width}`),s.height&&i.push(`height=${s.height}`),s.resize&&i.push(`resize=${s.resize}`),s.format&&i.push(`format=${s.format}`),s.quality&&i.push(`quality=${s.quality}`),i.join("&")}}const ku="2.11.0",Au={"X-Client-Info":`storage-js/${ku}`};var At=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};class Iu{constructor(s,i={},r,n){const o=new URL(s);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Au),i),this.fetch=fa(r)}listBuckets(){return At(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(is(s))return{data:null,error:s};throw s}})}getBucket(s){return At(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(i){if(is(i))return{data:null,error:i};throw i}})}createBucket(s,i={public:!1}){return At(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}updateBucket(s,i){return At(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(is(r))return{data:null,error:r};throw r}})}emptyBucket(s){return At(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(is(i))return{data:null,error:i};throw i}})}deleteBucket(s){return At(this,void 0,void 0,function*(){try{return{data:yield ga(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(is(i))return{data:null,error:i};throw i}})}}class _u extends Iu{constructor(s,i={},r,n){super(s,i,r,n)}from(s){return new Ru(this.url,this.headers,s,this.fetch)}}const Tu="2.55.0";let Xt="";typeof Deno<"u"?Xt="deno":typeof document<"u"?Xt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xt="react-native":Xt="node";const Pu={"X-Client-Info":`supabase-js-${Xt}/${Tu}`},Mu={headers:Pu},Lu={schema:"public"},Ou={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fu={};var Uu=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};const $u=t=>{let s;return t?s=t:typeof fetch>"u"?s=ta:s=fetch,(...i)=>s(...i)},qu=()=>typeof Headers>"u"?ia:Headers,Bu=(t,s,i)=>{const r=$u(i),n=qu();return(o,a)=>Uu(void 0,void 0,void 0,function*(){var l;const m=(l=yield s())!==null&&l!==void 0?l:t;let h=new n(a?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${m}`),r(o,Object.assign(Object.assign({},a),{headers:h}))})};var zu=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};function Hu(t){return t.endsWith("/")?t:t+"/"}function Wu(t,s){var i,r;const{db:n,auth:o,realtime:a,global:l}=t,{db:m,auth:h,realtime:u,global:b}=s,f={db:Object.assign(Object.assign({},m),n),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},b),l),{headers:Object.assign(Object.assign({},(i=b?.headers)!==null&&i!==void 0?i:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>zu(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Na="2.71.1",Lt=30*1e3,Br=3,pr=Br*Lt,Gu="http://localhost:9999",Ku="supabase.auth.token",Ju={"X-Client-Info":`gotrue-js/${Na}`},zr="X-Supabase-Api-Version",xa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qu=10*60*1e3;class fn extends Error{constructor(s,i,r){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Xu extends fn{constructor(s,i,r){super(s,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function em(t){return ve(t)&&t.name==="AuthApiError"}class Ea extends fn{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class at extends fn{constructor(s,i,r,n){super(s,r,n),this.name=i,this.status=r}}class st extends at{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sm(t){return ve(t)&&t.name==="AuthSessionMissingError"}class vi extends at{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Di extends at{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class yi extends at{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tm(t){return ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yn extends at{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hr extends at{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function br(t){return ve(t)&&t.name==="AuthRetryableFetchError"}class Qn extends at{constructor(s,i,r){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class Wr extends at{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xn=` 	
\r=`.split(""),im=(()=>{const t=new Array(128);for(let s=0;s<t.length;s+=1)t[s]=-1;for(let s=0;s<Xn.length;s+=1)t[Xn[s].charCodeAt(0)]=-2;for(let s=0;s<Oi.length;s+=1)t[Oi[s].charCodeAt(0)]=s;return t})();function eo(t,s,i){if(t!==null)for(s.queue=s.queue<<8|t,s.queuedBits+=8;s.queuedBits>=6;){const r=s.queue>>s.queuedBits-6&63;i(Oi[r]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const r=s.queue>>s.queuedBits-6&63;i(Oi[r]),s.queuedBits-=6}}function va(t,s,i){const r=im[t];if(r>-1)for(s.queue=s.queue<<6|r,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function so(t){const s=[],i=a=>{s.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=a=>{om(a,r,i)};for(let a=0;a<t.length;a+=1)va(t.charCodeAt(a),n,o);return s.join("")}function rm(t,s){if(t<=127){s(t);return}else if(t<=2047){s(192|t>>6),s(128|t&63);return}else if(t<=65535){s(224|t>>12),s(128|t>>6&63),s(128|t&63);return}else if(t<=1114111){s(240|t>>18),s(128|t>>12&63),s(128|t>>6&63),s(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nm(t,s){for(let i=0;i<t.length;i+=1){let r=t.charCodeAt(i);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(i+1)-56320&65535|n)+65536,i+=1}rm(r,s)}}function om(t,s,i){if(s.utf8seq===0){if(t<=127){i(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){s.utf8seq=r;break}if(s.utf8seq===2)s.codepoint=t&31;else if(s.utf8seq===3)s.codepoint=t&15;else if(s.utf8seq===4)s.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|t&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function am(t){const s=[],i={queue:0,queuedBits:0},r=n=>{s.push(n)};for(let n=0;n<t.length;n+=1)va(t.charCodeAt(n),i,r);return new Uint8Array(s)}function lm(t){const s=[];return nm(t,i=>s.push(i)),new Uint8Array(s)}function cm(t){const s=[],i={queue:0,queuedBits:0},r=n=>{s.push(n)};return t.forEach(n=>eo(n,i,r)),eo(null,i,r),s.join("")}function um(t){return Math.round(Date.now()/1e3)+t}function mm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Is=()=>typeof window<"u"&&typeof document<"u",ft={tested:!1,writable:!1},Da=()=>{if(!Is())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ft.tested)return ft.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ft.tested=!0,ft.writable=!0}catch{ft.tested=!0,ft.writable=!1}return ft.writable};function dm(t){const s={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((n,o)=>{s[o]=n})}catch{}return i.searchParams.forEach((r,n)=>{s[n]=r}),s}const ya=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...i)=>Vt(async()=>{const{default:r}=await Promise.resolve().then(()=>qt);return{default:r}},void 0).then(({default:r})=>r(...i)):s=fetch,(...i)=>s(...i)},hm=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ot=async(t,s,i)=>{await t.setItem(s,JSON.stringify(i))},gt=async(t,s)=>{const i=await t.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Qs=async(t,s)=>{await t.removeItem(s)};class Yi{constructor(){this.promise=new Yi.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}Yi.promiseConstructor=Promise;function fr(t){const s=t.split(".");if(s.length!==3)throw new Wr("Invalid JWT structure");for(let r=0;r<s.length;r++)if(!Yu.test(s[r]))throw new Wr("JWT not in base64url format");return{header:JSON.parse(so(s[0])),payload:JSON.parse(so(s[1])),signature:am(s[2]),raw:{header:s[0],payload:s[1]}}}async function pm(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function bm(t,s){return new Promise((r,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!s(o,null,a)){r(a);return}}catch(a){if(!s(o,a)){n(a);return}}})()})}function fm(t){return("0"+t.toString(16)).substr(-2)}function gm(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let n="";for(let o=0;o<56;o++)n+=i.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(s),Array.from(s,fm).join("")}async function Nm(t){const i=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",i),n=new Uint8Array(r);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function xm(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await Nm(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function It(t,s,i=!1){const r=gm();let n=r;i&&(n+="/PASSWORD_RECOVERY"),await Ot(t,`${s}-code-verifier`,n);const o=await xm(r);return[o,r===o?"plain":"s256"]}const Em=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vm(t){const s=t.headers.get(zr);if(!s||!s.match(Em))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function Dm(t){if(!t)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(t<=s)throw new Error("JWT has expired")}function ym(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _t(t){if(!wm.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gr(){const t={};return new Proxy(t,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function to(t){return JSON.parse(JSON.stringify(t))}var Cm=function(t,s){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i};const xt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jm=[502,503,504];async function io(t){var s;if(!hm(t))throw new Hr(xt(t),0);if(jm.includes(t.status))throw new Hr(xt(t),t.status);let i;try{i=await t.json()}catch(o){throw new Ea(xt(o),o)}let r;const n=vm(t);if(n&&n.getTime()>=xa["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new Qn(xt(i),t.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(r==="session_not_found")throw new st}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Qn(xt(i),t.status,i.weak_password.reasons);throw new Xu(xt(i),t.status||500,r)}const Vm=(t,s,i,r)=>{const n={method:t,headers:s?.headers||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),i))};async function Ie(t,s,i,r){var n;const o=Object.assign({},r?.headers);o[zr]||(o[zr]=xa["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",m=await Zm(t,s,i+l,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(m):{data:Object.assign({},m),error:null}}async function Zm(t,s,i,r,n,o){const a=Vm(s,r,n,o);let l;try{l=await t(i,Object.assign({},a))}catch(m){throw console.error(m),new Hr(xt(m),0)}if(l.ok||await io(l),r?.noResolveJson)return l;try{return await l.json()}catch(m){await io(m)}}function Hs(t){var s;let i=null;Am(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=um(t.expires_in)));const r=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:i,user:r},error:null}}function ro(t){const s=Hs(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(s.data.weak_password=t.weak_password),s}function tt(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function Sm(t){return{data:t,error:null}}function Rm(t){const{action_link:s,email_otp:i,hashed_token:r,redirect_to:n,verification_type:o}=t,a=Cm(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:s,email_otp:i,hashed_token:r,redirect_to:n,verification_type:o},m=Object.assign({},a);return{data:{properties:l,user:m},error:null}}function km(t){return t}function Am(t){return t.access_token&&t.refresh_token&&t.expires_in}const Nr=["global","local","others"];var Im=function(t,s){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i};class _m{constructor({url:s="",headers:i={},fetch:r}){this.url=s,this.headers=i,this.fetch=ya(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,i=Nr[0]){if(Nr.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nr.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(s,i={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:tt})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(s){try{const{options:i}=s,r=Im(s,["options"]),n=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Rm,redirectTo:i?.redirectTo})}catch(i){if(ve(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:tt})}catch(i){if(ve(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,r,n,o,a,l,m;try{const h={nextPage:null,lastPage:0,total:0},u=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=s?.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(o=(n=s?.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:km});if(u.error)throw u.error;const b=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(m=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(g=>{const N=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);h[`${p}Page`]=N}),h.total=parseInt(f)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(ve(h))return{data:{users:[]},error:h};throw h}}async getUserById(s){_t(s);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:tt})}catch(i){if(ve(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){_t(s);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:tt})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(s,i=!1){_t(s);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:tt})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(s){_t(s.userId);try{const{data:i,error:r}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:i,error:r}}catch(i){if(ve(i))return{data:null,error:i};throw i}}async _deleteFactor(s){_t(s.userId),_t(s.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}}}function no(t={}){return{getItem:s=>t[s]||null,setItem:(s,i)=>{t[s]=i},removeItem:s=>{delete t[s]}}}function Tm(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tt={debug:!!(globalThis&&Da()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wa extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class Pm extends wa{}async function Mm(t,s,i){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const r=new globalThis.AbortController;return s>0&&setTimeout(()=>{r.abort(),Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await i()}finally{Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(s===0)throw Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pm(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Tt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}Tm();const Lm={url:Gu,storageKey:Ku,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ju,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function oo(t,s,i){return await i()}const Pt={};class oi{constructor(s){var i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=oi.nextInstanceID,oi.nextInstanceID+=1,this.instanceID>0&&Is()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Lm),s);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _m({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ya(n.fetch),this.lock=n.lock||oo,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Is()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Mm:this.lock=oo,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Da()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=no(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=no(this.memoryStorage)),Is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var s,i;return(i=(s=Pt[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){Pt[this.storageKey]=Object.assign(Object.assign({},Pt[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=Pt[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Pt[this.storageKey]=Object.assign(Object.assign({},Pt[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Na}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const i=dm(window.location.href);let r="none";if(this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce"),Is()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:o}=await this._getSessionFromURL(i,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),tm(o)){const m=(s=o.details)===null||s===void 0?void 0:s.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ve(i)?{error:i}:{error:new Ea("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,r,n;try{const o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=s?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=s?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Hs}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const m=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(s){var i,r,n;try{let o;if("email"in s){const{email:u,password:b,options:f}=s;let x=null,g=null;this.flowType==="pkce"&&([x,g]=await It(this.storage,this.storageKey)),o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:b,data:(i=f?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:x,code_challenge_method:g},xform:Hs})}else if("phone"in s){const{phone:u,password:b,options:f}=s;o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:b,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Hs})}else throw new Di("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const m=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(s){try{let i;if("email"in s){const{email:o,password:a,options:l}=s;i=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ro})}else if("phone"in s){const{phone:o,password:a,options:l}=s;i=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ro})}else throw new Di("You must provide either an email or phone number and a password");const{data:r,error:n}=i;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(s){var i,r,n,o;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=s.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=s.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=s.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;if(i==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(s){var i,r,n,o,a,l,m,h,u,b,f,x;let g,N;if("message"in s)g=s.message,N=s.signature;else{const{chain:p,wallet:v,statement:E,options:w}=s;let C;if(Is())if(typeof v=="object")C=v;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))C=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=v}const S=new URL((i=w?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in C&&C.signIn){const Z=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),E?{statement:E}:null));let D;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")D=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)D=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)g=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),N=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(r=w?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((m=w?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((h=w?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((b=(u=w?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||b===void 0)&&b.length?["Resources",...w.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const Z=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Z}}try{const{data:p,error:v}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:cm(N)},!((f=s.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=s.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Hs});if(v)throw v;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new vi}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:v})}catch(p){if(ve(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(s){const i=await gt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(i??"").split("/");try{const{data:o,error:a}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:r},xform:Hs});if(await Qs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new vi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:a})}catch(o){if(ve(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(s){try{const{options:i,provider:r,token:n,access_token:o,nonce:a}=s,l=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Hs}),{data:m,error:h}=l;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new vi}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:h})}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(s){var i,r,n,o,a;try{if("email"in s){const{email:l,options:m}=s;let h=null,u=null;this.flowType==="pkce"&&([h,u]=await It(this.storage,this.storageKey));const{error:b}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(i=m?.data)!==null&&i!==void 0?i:{},create_user:(r=m?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:h,code_challenge_method:u},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in s){const{phone:l,options:m}=s,{data:h,error:u}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(a=m?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:u}}throw new Di("You must provide either an email or phone number.")}catch(l){if(ve(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(s){var i,r;try{let n,o;"options"in s&&(n=(i=s.options)===null||i===void 0?void 0:i.redirectTo,o=(r=s.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Hs});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const m=a.session,h=a.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(s){var i,r,n;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await It(this.storage,this.storageKey)),await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(r=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=s?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Sm})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:r}=s;if(r)throw r;if(!i)throw new st;const{error:n}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:n}})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:r,type:n,options:o}=s,{error:a}=await Ie(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in s){const{phone:r,type:n,options:o}=s,{data:a,error:l}=await Ie(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Di("You must provide either an email or phone number and a type")}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const r=s.expires_at?s.expires_at*1e3-Date.now()<pr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",s.expires_at),!r){if(this.userStorage){const a=await gt(this.userStorage,this.storageKey+"-user");a?.user?s.user=a.user:s.user=gr()}if(this.storage.isServer&&s.user){let a=this.suppressGetSessionWarning;s=new Proxy(s,{get:(m,h,u)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,h,u))})}return{data:{session:s},error:null}}const{session:n,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:tt}):await this._useSession(async i=>{var r,n,o;const{data:a,error:l}=i;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:tt})})}catch(i){if(ve(i))return sm(i)&&(await this._removeSession(),await Qs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async r=>{const{data:n,error:o}=r;if(o)throw o;if(!n.session)throw new st;const a=n.session;let l=null,m=null;this.flowType==="pkce"&&s.email!=null&&([l,m]=await It(this.storage,this.storageKey));const{data:h,error:u}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:l,code_challenge_method:m}),jwt:a.access_token,xform:tt});if(u)throw u;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new st;const i=Date.now()/1e3;let r=i,n=!0,o=null;const{payload:a}=fr(s.access_token);if(a.exp&&(r=a.exp,n=r<=i),n){const{session:l,error:m}=await this._callRefreshToken(s.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:m}=await this._getUser(s.access_token);if(m)throw m;o={access_token:s.access_token,refresh_token:s.refresh_token,user:l.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(i){if(ve(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var r;if(!s){const{data:a,error:l}=i;if(l)throw l;s=(r=a.session)!==null&&r!==void 0?r:void 0}if(!s?.refresh_token)throw new st;const{session:n,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(s,i){try{if(!Is())throw new yi("No browser detected.");if(s.error||s.error_description||s.error_code)throw new yi(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Yn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yi("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Yn("No code detected.");const{data:E,error:w}=await this._exchangeCodeForSession(s.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:o,refresh_token:a,expires_in:l,expires_at:m,token_type:h}=s;if(!o||!l||!a||!h)throw new yi("No session defined in URL");const u=Math.round(Date.now()/1e3),b=parseInt(l);let f=u+b;m&&(f=parseInt(m));const x=f-u;x*1e3<=Lt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${b}s`);const g=f-b;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:N,error:p}=await this._getUser(o);if(p)throw p;const v={provider_token:r,provider_refresh_token:n,access_token:o,expires_in:b,expires_at:f,refresh_token:a,token_type:h,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:s.type},error:null}}catch(r){if(ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await gt(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:n,error:o}=i;if(o)return{error:o};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,s);if(l&&!(em(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return s!=="others"&&(await this._removeSession(),await Qs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const i=mm(),r={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(s){return await this._useSession(async i=>{var r,n;try{const{data:{session:o},error:a}=i;if(a)throw a;await((r=this.stateChangeEmitters.get(s))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",s,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(s))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",o),console.error(o)}})}async resetPasswordForEmail(s,i={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await It(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async getUserIdentities(){var s;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}}async linkIdentity(s){var i;try{const{data:r,error:n}=await this._useSession(async o=>{var a,l,m,h,u;const{data:b,error:f}=o;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(a=s.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=s.options)===null||l===void 0?void 0:l.scopes,queryParams:(m=s.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Is()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:s.provider,url:r?.url},error:null}}catch(r){if(ve(r))return{data:{provider:s.provider,url:null},error:r};throw r}}async unlinkIdentity(s){try{return await this._useSession(async i=>{var r,n;const{data:o,error:a}=i;if(a)throw a;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await bm(async n=>(n>0&&await pm(200*Math.pow(2,n-1)),this._debug(i,"refreshing attempt",n),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Hs})),(n,o)=>{const a=200*Math.pow(2,n);return o&&br(o)&&Date.now()+a-r<Lt})}catch(r){if(this._debug(i,"error",r),ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",r),Is()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:s,url:r},error:null}}async _recoverAndRefresh(){var s,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await gt(this.storage,this.storageKey);if(n&&this.userStorage){let a=await gt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await Ot(this.userStorage,this.storageKey+"-user",a)),n.user=(s=a?.user)!==null&&s!==void 0?s:gr()}else if(n&&!n.user&&!n.user){const a=await gt(this.storage,this.storageKey+"-user");a&&a?.user?(n.user=a.user,await Qs(this.storage,this.storageKey+"-user"),await Ot(this.storage,this.storageKey,n)):n.user=gr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const o=((i=n.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<pr;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${pr}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),br(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(n.access_token);!l&&a?.user?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(s){var i,r;if(!s)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Yi;const{data:o,error:a}=await this._refreshAccessToken(s);if(a)throw a;if(!o.session)throw new st;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),ve(o)){const a={session:null,error:o};return br(o)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(s,i,r=!0){const n=`#_notifyAllSubscribers(${s})`;this._debug(n,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:s,session:i});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(s,i)}catch(m){o.push(m)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const i=Object.assign({},s),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await Ot(this.userStorage,this.storageKey+"-user",{user:i.user});const n=Object.assign({},i);delete n.user;const o=to(n);await Ot(this.storage,this.storageKey,o)}else{const n=to(i);await Ot(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Qs(this.storage,this.storageKey),await Qs(this.storage,this.storageKey+"-code-verifier"),await Qs(this.storage,this.storageKey+"-user"),this.userStorage&&await Qs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Is()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Lt);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-s)/Lt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Lt}ms, refresh threshold is ${Br} ticks`),n<=Br&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof wa)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Is()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,r){const n=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await It(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);n.push(o.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${s}?${n.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var r;const{data:n,error:o}=i;return o?{data:null,error:o}:await Ie(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async _enroll(s){try{return await this._useSession(async i=>{var r,n;const{data:o,error:a}=i;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:m,error:h}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(s.factorType==="totp"&&(!((n=m?.totp)===null||n===void 0)&&n.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:n,error:o}=i;if(o)return{data:null,error:o};const{data:a,error:l}=await Ie(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(i){if(ve(i))return{data:null,error:i};throw i}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:n,error:o}=i;return o?{data:null,error:o}:await Ie(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(ve(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(s){const{data:i,error:r}=await this._challenge({factorId:s.factorId});return r?{data:null,error:r}:await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const r=s?.factors||[],n=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var i,r;const{data:{session:n},error:o}=s;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=fr(n.access_token);let l=null;a.aal&&(l=a.aal);let m=l;((r=(i=n.user.factors)===null||i===void 0?void 0:i.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:m,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(s,i={keys:[]}){let r=i.keys.find(l=>l.kid===s);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(l=>l.kid===s),r&&this.jwks_cached_at+Qu>n)return r;const{data:o,error:a}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,r=o.keys.find(l=>l.kid===s),!r)?null:r}async getClaims(s,i={}){try{let r=s;if(!r){const{data:x,error:g}=await this.getSession();if(g||!x.session)return{data:null,error:g};r=x.session.access_token}const{header:n,payload:o,signature:a,raw:{header:l,payload:m}}=fr(r);i?.allowExpired||Dm(o.exp);const h=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!h){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:o,header:n,signature:a},error:null}}const u=ym(n.alg),b=await crypto.subtle.importKey("jwk",h,u,!0,["verify"]);if(!await crypto.subtle.verify(u,b,a,lm(`${l}.${m}`)))throw new Wr("Invalid JWT signature");return{data:{claims:o,header:n,signature:a},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}}oi.nextInstanceID=0;const Om=oi;class Fm extends Om{constructor(s){super(s)}}var Um=function(t,s,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function l(u){try{h(r.next(u))}catch(b){a(b)}}function m(u){try{h(r.throw(u))}catch(b){a(b)}}function h(u){u.done?o(u.value):n(u.value).then(l,m)}h((r=r.apply(t,s||[])).next())})};class $m{constructor(s,i,r){var n,o,a;if(this.supabaseUrl=s,this.supabaseKey=i,!s)throw new Error("supabaseUrl is required.");if(!i)throw new Error("supabaseKey is required.");const l=Hu(s),m=new URL(l);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const h=`sb-${m.hostname.split(".")[0]}-auth-token`,u={db:Lu,realtime:Fu,auth:Object.assign(Object.assign({},Ou),{storageKey:h}),global:Mu},b=Wu(r??{},u);this.storageKey=(n=b.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=b.global.headers)!==null&&o!==void 0?o:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,b.global.fetch),this.fetch=Bu(i,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new ru(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new _u(this.storageUrl.href,this.headers,this.fetch,r?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new _c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,i={},r={}){return this.rest.rpc(s,i,r)}channel(s,i={config:{}}){return this.realtime.channel(s,i)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,i;return Um(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(i=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:i,detectSessionInUrl:r,storage:n,storageKey:o,flowType:a,lock:l,debug:m},h,u){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fm({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),h),storageKey:o,autoRefreshToken:s,persistSession:i,detectSessionInUrl:r,storage:n,flowType:a,lock:l,debug:m,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(s){return new vu(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r?.access_token)})}_handleTokenChanged(s,i,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:s==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qm=(t,s,i)=>new $m(t,s,i);function Bm(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Bm()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zm="https://stqquljwxmvfyxxclrkb.supabase.co",Hm="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN0cXF1bGp3eG12Znl4eGNscmtiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4MDA5NDksImV4cCI6MjA3MTM3Njk0OX0.0m6N03FzJ3Q8eDdL7S6__IOUpvihu8KzdY18VJxqN_M",Ca=t=>(t||"").toString().trim(),Wm=t=>Ca(t).replace(/[^A-Za-z0-9._-]/g,""),Gr=Ca(zm),Kr=Wm(Hm);(!Gr||!/^https?:\/\//i.test(Gr))&&console.error("[supabase] Invalid VITE_SUPABASE_URL env");(!Kr||Kr.length<20)&&console.error("[supabase] Invalid VITE_SUPABASE_ANON_KEY env");const hs=qm(Gr,Kr);function ja(t,s){return function(){return t.apply(s,arguments)}}const{toString:Gm}=Object.prototype,{getPrototypeOf:gn}=Object,{iterator:Qi,toStringTag:Va}=Symbol,Xi=(t=>s=>{const i=Gm.call(s);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Ts=t=>(t=t.toLowerCase(),s=>Xi(s)===t),er=t=>s=>typeof s===t,{isArray:zt}=Array,ai=er("undefined");function di(t){return t!==null&&!ai(t)&&t.constructor!==null&&!ai(t.constructor)&&Es(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Za=Ts("ArrayBuffer");function Km(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Za(t.buffer),s}const Jm=er("string"),Es=er("function"),Sa=er("number"),hi=t=>t!==null&&typeof t=="object",Ym=t=>t===!0||t===!1,ki=t=>{if(Xi(t)!=="object")return!1;const s=gn(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Va in t)&&!(Qi in t)},Qm=t=>{if(!hi(t)||di(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Xm=Ts("Date"),ed=Ts("File"),sd=Ts("Blob"),td=Ts("FileList"),id=t=>hi(t)&&Es(t.pipe),rd=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Es(t.append)&&((s=Xi(t))==="formdata"||s==="object"&&Es(t.toString)&&t.toString()==="[object FormData]"))},nd=Ts("URLSearchParams"),[od,ad,ld,cd]=["ReadableStream","Request","Response","Headers"].map(Ts),ud=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pi(t,s,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),zt(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(di(t))return;const o=i?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let l;for(r=0;r<a;r++)l=o[r],s.call(null,t[l],l,t)}}function Ra(t,s){if(di(t))return null;s=s.toLowerCase();const i=Object.keys(t);let r=i.length,n;for(;r-- >0;)if(n=i[r],s===n.toLowerCase())return n;return null}const Dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ka=t=>!ai(t)&&t!==Dt;function Jr(){const{caseless:t}=ka(this)&&this||{},s={},i=(r,n)=>{const o=t&&Ra(s,n)||n;ki(s[o])&&ki(r)?s[o]=Jr(s[o],r):ki(r)?s[o]=Jr({},r):zt(r)?s[o]=r.slice():s[o]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&pi(arguments[r],i);return s}const md=(t,s,i,{allOwnKeys:r}={})=>(pi(s,(n,o)=>{i&&Es(n)?t[o]=ja(n,i):t[o]=n},{allOwnKeys:r}),t),dd=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hd=(t,s,i,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),i&&Object.assign(t.prototype,i)},pd=(t,s,i,r)=>{let n,o,a;const l={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)a=n[o],(!r||r(a,t,s))&&!l[a]&&(s[a]=t[a],l[a]=!0);t=i!==!1&&gn(t)}while(t&&(!i||i(t,s))&&t!==Object.prototype);return s},bd=(t,s,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=s.length;const r=t.indexOf(s,i);return r!==-1&&r===i},fd=t=>{if(!t)return null;if(zt(t))return t;let s=t.length;if(!Sa(s))return null;const i=new Array(s);for(;s-- >0;)i[s]=t[s];return i},gd=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&gn(Uint8Array)),Nd=(t,s)=>{const r=(t&&t[Qi]).call(t);let n;for(;(n=r.next())&&!n.done;){const o=n.value;s.call(t,o[0],o[1])}},xd=(t,s)=>{let i;const r=[];for(;(i=t.exec(s))!==null;)r.push(i);return r},Ed=Ts("HTMLFormElement"),vd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,n){return r.toUpperCase()+n}),ao=(({hasOwnProperty:t})=>(s,i)=>t.call(s,i))(Object.prototype),Dd=Ts("RegExp"),Aa=(t,s)=>{const i=Object.getOwnPropertyDescriptors(t),r={};pi(i,(n,o)=>{let a;(a=s(n,o,t))!==!1&&(r[o]=a||n)}),Object.defineProperties(t,r)},yd=t=>{Aa(t,(s,i)=>{if(Es(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=t[i];if(Es(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},wd=(t,s)=>{const i={},r=n=>{n.forEach(o=>{i[o]=!0})};return zt(t)?r(t):r(String(t).split(s)),i},Cd=()=>{},jd=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Vd(t){return!!(t&&Es(t.append)&&t[Va]==="FormData"&&t[Qi])}const Zd=t=>{const s=new Array(10),i=(r,n)=>{if(hi(r)){if(s.indexOf(r)>=0)return;if(di(r))return r;if(!("toJSON"in r)){s[n]=r;const o=zt(r)?[]:{};return pi(r,(a,l)=>{const m=i(a,n+1);!ai(m)&&(o[l]=m)}),s[n]=void 0,o}}return r};return i(t,0)},Sd=Ts("AsyncFunction"),Rd=t=>t&&(hi(t)||Es(t))&&Es(t.then)&&Es(t.catch),Ia=((t,s)=>t?setImmediate:s?((i,r)=>(Dt.addEventListener("message",({source:n,data:o})=>{n===Dt&&o===i&&r.length&&r.shift()()},!1),n=>{r.push(n),Dt.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Es(Dt.postMessage)),kd=typeof queueMicrotask<"u"?queueMicrotask.bind(Dt):typeof process<"u"&&process.nextTick||Ia,Ad=t=>t!=null&&Es(t[Qi]),M={isArray:zt,isArrayBuffer:Za,isBuffer:di,isFormData:rd,isArrayBufferView:Km,isString:Jm,isNumber:Sa,isBoolean:Ym,isObject:hi,isPlainObject:ki,isEmptyObject:Qm,isReadableStream:od,isRequest:ad,isResponse:ld,isHeaders:cd,isUndefined:ai,isDate:Xm,isFile:ed,isBlob:sd,isRegExp:Dd,isFunction:Es,isStream:id,isURLSearchParams:nd,isTypedArray:gd,isFileList:td,forEach:pi,merge:Jr,extend:md,trim:ud,stripBOM:dd,inherits:hd,toFlatObject:pd,kindOf:Xi,kindOfTest:Ts,endsWith:bd,toArray:fd,forEachEntry:Nd,matchAll:xd,isHTMLForm:Ed,hasOwnProperty:ao,hasOwnProp:ao,reduceDescriptors:Aa,freezeMethods:yd,toObjectSet:wd,toCamelCase:vd,noop:Cd,toFiniteNumber:jd,findKey:Ra,global:Dt,isContextDefined:ka,isSpecCompliantForm:Vd,toJSONObject:Zd,isAsyncFn:Sd,isThenable:Rd,setImmediate:Ia,asap:kd,isIterable:Ad};function De(t,s,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}M.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const _a=De.prototype,Ta={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ta[t]={value:t}});Object.defineProperties(De,Ta);Object.defineProperty(_a,"isAxiosError",{value:!0});De.from=(t,s,i,r,n,o)=>{const a=Object.create(_a);return M.toFlatObject(t,a,function(m){return m!==Error.prototype},l=>l!=="isAxiosError"),De.call(a,t.message,s,i,r,n),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const Id=null;function Yr(t){return M.isPlainObject(t)||M.isArray(t)}function Pa(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function lo(t,s,i){return t?t.concat(s).map(function(n,o){return n=Pa(n),!i&&o?"["+n+"]":n}).join(i?".":""):s}function _d(t){return M.isArray(t)&&!t.some(Yr)}const Td=M.toFlatObject(M,{},null,function(s){return/^is[A-Z]/.test(s)});function sr(t,s,i){if(!M.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,i=M.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,p){return!M.isUndefined(p[N])});const r=i.metaTokens,n=i.visitor||u,o=i.dots,a=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(s);if(!M.isFunction(n))throw new TypeError("visitor must be a function");function h(g){if(g===null)return"";if(M.isDate(g))return g.toISOString();if(M.isBoolean(g))return g.toString();if(!m&&M.isBlob(g))throw new De("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(g)||M.isTypedArray(g)?m&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,N,p){let v=g;if(g&&!p&&typeof g=="object"){if(M.endsWith(N,"{}"))N=r?N:N.slice(0,-2),g=JSON.stringify(g);else if(M.isArray(g)&&_d(g)||(M.isFileList(g)||M.endsWith(N,"[]"))&&(v=M.toArray(g)))return N=Pa(N),v.forEach(function(w,C){!(M.isUndefined(w)||w===null)&&s.append(a===!0?lo([N],C,o):a===null?N:N+"[]",h(w))}),!1}return Yr(g)?!0:(s.append(lo(p,N,o),h(g)),!1)}const b=[],f=Object.assign(Td,{defaultVisitor:u,convertValue:h,isVisitable:Yr});function x(g,N){if(!M.isUndefined(g)){if(b.indexOf(g)!==-1)throw Error("Circular reference detected in "+N.join("."));b.push(g),M.forEach(g,function(v,E){(!(M.isUndefined(v)||v===null)&&n.call(s,v,M.isString(E)?E.trim():E,N,f))===!0&&x(v,N?N.concat(E):[E])}),b.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return x(t),s}function co(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Nn(t,s){this._pairs=[],t&&sr(t,this,s)}const Ma=Nn.prototype;Ma.append=function(s,i){this._pairs.push([s,i])};Ma.toString=function(s){const i=s?function(r){return s.call(this,r,co)}:co;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function Pd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function La(t,s,i){if(!s)return t;const r=i&&i.encode||Pd;M.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let o;if(n?o=n(s,i):o=M.isURLSearchParams(s)?s.toString():new Nn(s,i).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class uo{constructor(){this.handlers=[]}use(s,i,r){return this.handlers.push({fulfilled:s,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){M.forEach(this.handlers,function(r){r!==null&&s(r)})}}const Oa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Md=typeof URLSearchParams<"u"?URLSearchParams:Nn,Ld=typeof FormData<"u"?FormData:null,Od=typeof Blob<"u"?Blob:null,Fd={isBrowser:!0,classes:{URLSearchParams:Md,FormData:Ld,Blob:Od},protocols:["http","https","file","blob","url","data"]},xn=typeof window<"u"&&typeof document<"u",Qr=typeof navigator=="object"&&navigator||void 0,Ud=xn&&(!Qr||["ReactNative","NativeScript","NS"].indexOf(Qr.product)<0),$d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qd=xn&&window.location.href||"http://localhost",Bd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xn,hasStandardBrowserEnv:Ud,hasStandardBrowserWebWorkerEnv:$d,navigator:Qr,origin:qd},Symbol.toStringTag,{value:"Module"})),as={...Bd,...Fd};function zd(t,s){return sr(t,new as.classes.URLSearchParams,{visitor:function(i,r,n,o){return as.isNode&&M.isBuffer(i)?(this.append(r,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...s})}function Hd(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Wd(t){const s={},i=Object.keys(t);let r;const n=i.length;let o;for(r=0;r<n;r++)o=i[r],s[o]=t[o];return s}function Fa(t){function s(i,r,n,o){let a=i[o++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),m=o>=i.length;return a=!a&&M.isArray(n)?n.length:a,m?(M.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!l):((!n[a]||!M.isObject(n[a]))&&(n[a]=[]),s(i,r,n[a],o)&&M.isArray(n[a])&&(n[a]=Wd(n[a])),!l)}if(M.isFormData(t)&&M.isFunction(t.entries)){const i={};return M.forEachEntry(t,(r,n)=>{s(Hd(r),n,i,0)}),i}return null}function Gd(t,s,i){if(M.isString(t))try{return(s||JSON.parse)(t),M.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(t)}const bi={transitional:Oa,adapter:["xhr","http","fetch"],transformRequest:[function(s,i){const r=i.getContentType()||"",n=r.indexOf("application/json")>-1,o=M.isObject(s);if(o&&M.isHTMLForm(s)&&(s=new FormData(s)),M.isFormData(s))return n?JSON.stringify(Fa(s)):s;if(M.isArrayBuffer(s)||M.isBuffer(s)||M.isStream(s)||M.isFile(s)||M.isBlob(s)||M.isReadableStream(s))return s;if(M.isArrayBufferView(s))return s.buffer;if(M.isURLSearchParams(s))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zd(s,this.formSerializer).toString();if((l=M.isFileList(s))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return sr(l?{"files[]":s}:s,m&&new m,this.formSerializer)}}return o||n?(i.setContentType("application/json",!1),Gd(s)):s}],transformResponse:[function(s){const i=this.transitional||bi.transitional,r=i&&i.forcedJSONParsing,n=this.responseType==="json";if(M.isResponse(s)||M.isReadableStream(s))return s;if(s&&M.isString(s)&&(r&&!this.responseType||n)){const a=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(s)}catch(l){if(a)throw l.name==="SyntaxError"?De.from(l,De.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:as.classes.FormData,Blob:as.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{bi.headers[t]={}});const Kd=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jd=t=>{const s={};let i,r,n;return t&&t.split(`
`).forEach(function(a){n=a.indexOf(":"),i=a.substring(0,n).trim().toLowerCase(),r=a.substring(n+1).trim(),!(!i||s[i]&&Kd[i])&&(i==="set-cookie"?s[i]?s[i].push(r):s[i]=[r]:s[i]=s[i]?s[i]+", "+r:r)}),s},mo=Symbol("internals");function Jt(t){return t&&String(t).trim().toLowerCase()}function Ai(t){return t===!1||t==null?t:M.isArray(t)?t.map(Ai):String(t)}function Yd(t){const s=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(t);)s[r[1]]=r[2];return s}const Qd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xr(t,s,i,r,n){if(M.isFunction(r))return r.call(this,s,i);if(n&&(s=i),!!M.isString(s)){if(M.isString(r))return s.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(s)}}function Xd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,i,r)=>i.toUpperCase()+r)}function eh(t,s){const i=M.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+i,{value:function(n,o,a){return this[r].call(this,s,n,o,a)},configurable:!0})})}let vs=class{constructor(s){s&&this.set(s)}set(s,i,r){const n=this;function o(l,m,h){const u=Jt(m);if(!u)throw new Error("header name must be a non-empty string");const b=M.findKey(n,u);(!b||n[b]===void 0||h===!0||h===void 0&&n[b]!==!1)&&(n[b||m]=Ai(l))}const a=(l,m)=>M.forEach(l,(h,u)=>o(h,u,m));if(M.isPlainObject(s)||s instanceof this.constructor)a(s,i);else if(M.isString(s)&&(s=s.trim())&&!Qd(s))a(Jd(s),i);else if(M.isObject(s)&&M.isIterable(s)){let l={},m,h;for(const u of s){if(!M.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[h=u[0]]=(m=l[h])?M.isArray(m)?[...m,u[1]]:[m,u[1]]:u[1]}a(l,i)}else s!=null&&o(i,s,r);return this}get(s,i){if(s=Jt(s),s){const r=M.findKey(this,s);if(r){const n=this[r];if(!i)return n;if(i===!0)return Yd(n);if(M.isFunction(i))return i.call(this,n,r);if(M.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,i){if(s=Jt(s),s){const r=M.findKey(this,s);return!!(r&&this[r]!==void 0&&(!i||xr(this,this[r],r,i)))}return!1}delete(s,i){const r=this;let n=!1;function o(a){if(a=Jt(a),a){const l=M.findKey(r,a);l&&(!i||xr(r,r[l],l,i))&&(delete r[l],n=!0)}}return M.isArray(s)?s.forEach(o):o(s),n}clear(s){const i=Object.keys(this);let r=i.length,n=!1;for(;r--;){const o=i[r];(!s||xr(this,this[o],o,s,!0))&&(delete this[o],n=!0)}return n}normalize(s){const i=this,r={};return M.forEach(this,(n,o)=>{const a=M.findKey(r,o);if(a){i[a]=Ai(n),delete i[o];return}const l=s?Xd(o):String(o).trim();l!==o&&delete i[o],i[l]=Ai(n),r[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const i=Object.create(null);return M.forEach(this,(r,n)=>{r!=null&&r!==!1&&(i[n]=s&&M.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,i])=>s+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...i){const r=new this(s);return i.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[mo]=this[mo]={accessors:{}}).accessors,n=this.prototype;function o(a){const l=Jt(a);r[l]||(eh(n,a),r[l]=!0)}return M.isArray(s)?s.forEach(o):o(s),this}};vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(vs.prototype,({value:t},s)=>{let i=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[i]=r}}});M.freezeMethods(vs);function Er(t,s){const i=this||bi,r=s||i,n=vs.from(r.headers);let o=r.data;return M.forEach(t,function(l){o=l.call(i,o,n.normalize(),s?s.status:void 0)}),n.normalize(),o}function Ua(t){return!!(t&&t.__CANCEL__)}function Ht(t,s,i){De.call(this,t??"canceled",De.ERR_CANCELED,s,i),this.name="CanceledError"}M.inherits(Ht,De,{__CANCEL__:!0});function $a(t,s,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):s(new De("Request failed with status code "+i.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function sh(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function th(t,s){t=t||10;const i=new Array(t),r=new Array(t);let n=0,o=0,a;return s=s!==void 0?s:1e3,function(m){const h=Date.now(),u=r[o];a||(a=h),i[n]=m,r[n]=h;let b=o,f=0;for(;b!==n;)f+=i[b++],b=b%t;if(n=(n+1)%t,n===o&&(o=(o+1)%t),h-a<s)return;const x=u&&h-u;return x?Math.round(f*1e3/x):void 0}}function ih(t,s){let i=0,r=1e3/s,n,o;const a=(h,u=Date.now())=>{i=u,n=null,o&&(clearTimeout(o),o=null),t(...h)};return[(...h)=>{const u=Date.now(),b=u-i;b>=r?a(h,u):(n=h,o||(o=setTimeout(()=>{o=null,a(n)},r-b)))},()=>n&&a(n)]}const Fi=(t,s,i=3)=>{let r=0;const n=th(50,250);return ih(o=>{const a=o.loaded,l=o.lengthComputable?o.total:void 0,m=a-r,h=n(m),u=a<=l;r=a;const b={loaded:a,total:l,progress:l?a/l:void 0,bytes:m,rate:h||void 0,estimated:h&&l&&u?(l-a)/h:void 0,event:o,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(b)},i)},ho=(t,s)=>{const i=t!=null;return[r=>s[0]({lengthComputable:i,total:t,loaded:r}),s[1]]},po=t=>(...s)=>M.asap(()=>t(...s)),rh=as.hasStandardBrowserEnv?((t,s)=>i=>(i=new URL(i,as.origin),t.protocol===i.protocol&&t.host===i.host&&(s||t.port===i.port)))(new URL(as.origin),as.navigator&&/(msie|trident)/i.test(as.navigator.userAgent)):()=>!0,nh=as.hasStandardBrowserEnv?{write(t,s,i,r,n,o){const a=[t+"="+encodeURIComponent(s)];M.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),M.isString(r)&&a.push("path="+r),M.isString(n)&&a.push("domain="+n),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oh(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ah(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function qa(t,s,i){let r=!oh(s);return t&&(r||i==!1)?ah(t,s):s}const bo=t=>t instanceof vs?{...t}:t;function Ct(t,s){s=s||{};const i={};function r(h,u,b,f){return M.isPlainObject(h)&&M.isPlainObject(u)?M.merge.call({caseless:f},h,u):M.isPlainObject(u)?M.merge({},u):M.isArray(u)?u.slice():u}function n(h,u,b,f){if(M.isUndefined(u)){if(!M.isUndefined(h))return r(void 0,h,b,f)}else return r(h,u,b,f)}function o(h,u){if(!M.isUndefined(u))return r(void 0,u)}function a(h,u){if(M.isUndefined(u)){if(!M.isUndefined(h))return r(void 0,h)}else return r(void 0,u)}function l(h,u,b){if(b in s)return r(h,u);if(b in t)return r(void 0,h)}const m={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(h,u,b)=>n(bo(h),bo(u),b,!0)};return M.forEach(Object.keys({...t,...s}),function(u){const b=m[u]||n,f=b(t[u],s[u],u);M.isUndefined(f)&&b!==l||(i[u]=f)}),i}const Ba=t=>{const s=Ct({},t);let{data:i,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:o,headers:a,auth:l}=s;s.headers=a=vs.from(a),s.url=La(qa(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let m;if(M.isFormData(i)){if(as.hasStandardBrowserEnv||as.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((m=a.getContentType())!==!1){const[h,...u]=m?m.split(";").map(b=>b.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...u].join("; "))}}if(as.hasStandardBrowserEnv&&(r&&M.isFunction(r)&&(r=r(s)),r||r!==!1&&rh(s.url))){const h=n&&o&&nh.read(o);h&&a.set(n,h)}return s},lh=typeof XMLHttpRequest<"u",ch=lh&&function(t){return new Promise(function(i,r){const n=Ba(t);let o=n.data;const a=vs.from(n.headers).normalize();let{responseType:l,onUploadProgress:m,onDownloadProgress:h}=n,u,b,f,x,g;function N(){x&&x(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout;function v(){if(!p)return;const w=vs.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:w,config:t,request:p};$a(function(D){i(D),N()},function(D){r(D),N()},S),p=null}"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(r(new De("Request aborted",De.ECONNABORTED,t,p)),p=null)},p.onerror=function(){r(new De("Network Error",De.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let C=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||Oa;n.timeoutErrorMessage&&(C=n.timeoutErrorMessage),r(new De(C,S.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,t,p)),p=null},o===void 0&&a.setContentType(null),"setRequestHeader"in p&&M.forEach(a.toJSON(),function(C,S){p.setRequestHeader(S,C)}),M.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),l&&l!=="json"&&(p.responseType=n.responseType),h&&([f,g]=Fi(h,!0),p.addEventListener("progress",f)),m&&p.upload&&([b,x]=Fi(m),p.upload.addEventListener("progress",b),p.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=w=>{p&&(r(!w||w.type?new Ht(null,t,p):w),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const E=sh(n.url);if(E&&as.protocols.indexOf(E)===-1){r(new De("Unsupported protocol "+E+":",De.ERR_BAD_REQUEST,t));return}p.send(o||null)})},uh=(t,s)=>{const{length:i}=t=t?t.filter(Boolean):[];if(s||i){let r=new AbortController,n;const o=function(h){if(!n){n=!0,l();const u=h instanceof Error?h:this.reason;r.abort(u instanceof De?u:new Ht(u instanceof Error?u.message:u))}};let a=s&&setTimeout(()=>{a=null,o(new De(`timeout ${s} of ms exceeded`,De.ETIMEDOUT))},s);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),t=null)};t.forEach(h=>h.addEventListener("abort",o));const{signal:m}=r;return m.unsubscribe=()=>M.asap(l),m}},mh=function*(t,s){let i=t.byteLength;if(i<s){yield t;return}let r=0,n;for(;r<i;)n=r+s,yield t.slice(r,n),r=n},dh=async function*(t,s){for await(const i of hh(t))yield*mh(i,s)},hh=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:i,value:r}=await s.read();if(i)break;yield r}}finally{await s.cancel()}},fo=(t,s,i,r)=>{const n=dh(t,s);let o=0,a,l=m=>{a||(a=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:h,value:u}=await n.next();if(h){l(),m.close();return}let b=u.byteLength;if(i){let f=o+=b;i(f)}m.enqueue(new Uint8Array(u))}catch(h){throw l(h),h}},cancel(m){return l(m),n.return()}},{highWaterMark:2})},tr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",za=tr&&typeof ReadableStream=="function",ph=tr&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ha=(t,...s)=>{try{return!!t(...s)}catch{return!1}},bh=za&&Ha(()=>{let t=!1;const s=new Request(as.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),go=64*1024,Xr=za&&Ha(()=>M.isReadableStream(new Response("").body)),Ui={stream:Xr&&(t=>t.body)};tr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!Ui[s]&&(Ui[s]=M.isFunction(t[s])?i=>i[s]():(i,r)=>{throw new De(`Response type '${s}' is not supported`,De.ERR_NOT_SUPPORT,r)})})})(new Response);const fh=async t=>{if(t==null)return 0;if(M.isBlob(t))return t.size;if(M.isSpecCompliantForm(t))return(await new Request(as.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(M.isArrayBufferView(t)||M.isArrayBuffer(t))return t.byteLength;if(M.isURLSearchParams(t)&&(t=t+""),M.isString(t))return(await ph(t)).byteLength},gh=async(t,s)=>{const i=M.toFiniteNumber(t.getContentLength());return i??fh(s)},Nh=tr&&(async t=>{let{url:s,method:i,data:r,signal:n,cancelToken:o,timeout:a,onDownloadProgress:l,onUploadProgress:m,responseType:h,headers:u,withCredentials:b="same-origin",fetchOptions:f}=Ba(t);h=h?(h+"").toLowerCase():"text";let x=uh([n,o&&o.toAbortSignal()],a),g;const N=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let p;try{if(m&&bh&&i!=="get"&&i!=="head"&&(p=await gh(u,r))!==0){let S=new Request(s,{method:"POST",body:r,duplex:"half"}),Z;if(M.isFormData(r)&&(Z=S.headers.get("content-type"))&&u.setContentType(Z),S.body){const[D,T]=ho(p,Fi(po(m)));r=fo(S.body,go,D,T)}}M.isString(b)||(b=b?"include":"omit");const v="credentials"in Request.prototype;g=new Request(s,{...f,signal:x,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?b:void 0});let E=await fetch(g,f);const w=Xr&&(h==="stream"||h==="response");if(Xr&&(l||w&&N)){const S={};["status","statusText","headers"].forEach(U=>{S[U]=E[U]});const Z=M.toFiniteNumber(E.headers.get("content-length")),[D,T]=l&&ho(Z,Fi(po(l),!0))||[];E=new Response(fo(E.body,go,D,()=>{T&&T(),N&&N()}),S)}h=h||"text";let C=await Ui[M.findKey(Ui,h)||"text"](E,t);return!w&&N&&N(),await new Promise((S,Z)=>{$a(S,Z,{data:C,headers:vs.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:g})})}catch(v){throw N&&N(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,t,g),{cause:v.cause||v}):De.from(v,v&&v.code,t,g)}}),en={http:Id,xhr:ch,fetch:Nh};M.forEach(en,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const No=t=>`- ${t}`,xh=t=>M.isFunction(t)||t===null||t===!1,Wa={getAdapter:t=>{t=M.isArray(t)?t:[t];const{length:s}=t;let i,r;const n={};for(let o=0;o<s;o++){i=t[o];let a;if(r=i,!xh(i)&&(r=en[(a=String(i)).toLowerCase()],r===void 0))throw new De(`Unknown adapter '${a}'`);if(r)break;n[a||"#"+o]=r}if(!r){const o=Object.entries(n).map(([l,m])=>`adapter ${l} `+(m===!1?"is not supported by the environment":"is not available in the build"));let a=s?o.length>1?`since :
`+o.map(No).join(`
`):" "+No(o[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:en};function vr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ht(null,t)}function xo(t){return vr(t),t.headers=vs.from(t.headers),t.data=Er.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Wa.getAdapter(t.adapter||bi.adapter)(t).then(function(r){return vr(t),r.data=Er.call(t,t.transformResponse,r),r.headers=vs.from(r.headers),r},function(r){return Ua(r)||(vr(t),r&&r.response&&(r.response.data=Er.call(t,t.transformResponse,r.response),r.response.headers=vs.from(r.response.headers))),Promise.reject(r)})}const Ga="1.11.0",ir={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{ir[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Eo={};ir.transitional=function(s,i,r){function n(o,a){return"[Axios v"+Ga+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,l)=>{if(s===!1)throw new De(n(a," has been removed"+(i?" in "+i:"")),De.ERR_DEPRECATED);return i&&!Eo[a]&&(Eo[a]=!0,console.warn(n(a," has been deprecated since v"+i+" and will be removed in the near future"))),s?s(o,a,l):!0}};ir.spelling=function(s){return(i,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Eh(t,s,i){if(typeof t!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const o=r[n],a=s[o];if(a){const l=t[o],m=l===void 0||a(l,o,t);if(m!==!0)throw new De("option "+o+" must be "+m,De.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new De("Unknown option "+o,De.ERR_BAD_OPTION)}}const Ii={assertOptions:Eh,validators:ir},Os=Ii.validators;let yt=class{constructor(s){this.defaults=s||{},this.interceptors={request:new uo,response:new uo}}async request(s,i){try{return await this._request(s,i)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(s,i){typeof s=="string"?(i=i||{},i.url=s):i=s||{},i=Ct(this.defaults,i);const{transitional:r,paramsSerializer:n,headers:o}=i;r!==void 0&&Ii.assertOptions(r,{silentJSONParsing:Os.transitional(Os.boolean),forcedJSONParsing:Os.transitional(Os.boolean),clarifyTimeoutError:Os.transitional(Os.boolean)},!1),n!=null&&(M.isFunction(n)?i.paramsSerializer={serialize:n}:Ii.assertOptions(n,{encode:Os.function,serialize:Os.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Ii.assertOptions(i,{baseUrl:Os.spelling("baseURL"),withXsrfToken:Os.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let a=o&&M.merge(o.common,o[i.method]);o&&M.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),i.headers=vs.concat(a,o);const l=[];let m=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(i)===!1||(m=m&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const h=[];this.interceptors.response.forEach(function(N){h.push(N.fulfilled,N.rejected)});let u,b=0,f;if(!m){const g=[xo.bind(this),void 0];for(g.unshift(...l),g.push(...h),f=g.length,u=Promise.resolve(i);b<f;)u=u.then(g[b++],g[b++]);return u}f=l.length;let x=i;for(b=0;b<f;){const g=l[b++],N=l[b++];try{x=g(x)}catch(p){N.call(this,p);break}}try{u=xo.call(this,x)}catch(g){return Promise.reject(g)}for(b=0,f=h.length;b<f;)u=u.then(h[b++],h[b++]);return u}getUri(s){s=Ct(this.defaults,s);const i=qa(s.baseURL,s.url,s.allowAbsoluteUrls);return La(i,s.params,s.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(s){yt.prototype[s]=function(i,r){return this.request(Ct(r||{},{method:s,url:i,data:(r||{}).data}))}});M.forEach(["post","put","patch"],function(s){function i(r){return function(o,a,l){return this.request(Ct(l||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}yt.prototype[s]=i(),yt.prototype[s+"Form"]=i(!0)});let vh=class Ka{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const r=this;this.promise.then(n=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](n);r._listeners=null}),this.promise.then=n=>{let o;const a=new Promise(l=>{r.subscribe(l),o=l}).then(n);return a.cancel=function(){r.unsubscribe(o)},a},s(function(o,a,l){r.reason||(r.reason=new Ht(o,a,l),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const i=this._listeners.indexOf(s);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const s=new AbortController,i=r=>{s.abort(r)};return this.subscribe(i),s.signal.unsubscribe=()=>this.unsubscribe(i),s.signal}static source(){let s;return{token:new Ka(function(n){s=n}),cancel:s}}};function Dh(t){return function(i){return t.apply(null,i)}}function yh(t){return M.isObject(t)&&t.isAxiosError===!0}const sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sn).forEach(([t,s])=>{sn[s]=t});function Ja(t){const s=new yt(t),i=ja(yt.prototype.request,s);return M.extend(i,yt.prototype,s,{allOwnKeys:!0}),M.extend(i,s,null,{allOwnKeys:!0}),i.create=function(n){return Ja(Ct(t,n))},i}const ss=Ja(bi);ss.Axios=yt;ss.CanceledError=Ht;ss.CancelToken=vh;ss.isCancel=Ua;ss.VERSION=Ga;ss.toFormData=sr;ss.AxiosError=De;ss.Cancel=ss.CanceledError;ss.all=function(s){return Promise.all(s)};ss.spread=Dh;ss.isAxiosError=yh;ss.mergeConfig=Ct;ss.AxiosHeaders=vs;ss.formToJSON=t=>Fa(M.isHTMLForm(t)?new FormData(t):t);ss.getAdapter=Wa.getAdapter;ss.HttpStatusCode=sn;ss.default=ss;const{Axios:rg,AxiosError:ng,CanceledError:og,isCancel:ag,CancelToken:lg,VERSION:cg,all:ug,Cancel:mg,isAxiosError:dg,spread:hg,toFormData:pg,AxiosHeaders:bg,HttpStatusCode:fg,formToJSON:gg,getAdapter:Ng,mergeConfig:xg}=ss,tn="AILEGR_ACTIVE_TENANT_ID";function En(){try{return localStorage.getItem(tn)}catch{return null}}function Ya(t){try{t?localStorage.setItem(tn,t):localStorage.removeItem(tn)}catch{}}async function Qa(){try{const{data:t}=await hs.auth.getSession();return t?.session?.access_token||null}catch{return null}}const wh="http://localhost:4000",X=ss.create({baseURL:wh,timeout:6e4,headers:{"Content-Type":"application/json"}});X.interceptors.request.use(async t=>{try{const s=await Qa();s?(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${s}`):t.headers&&"Authorization"in t.headers&&delete t.headers.Authorization}catch{}try{const s=En();s&&(t.headers=t.headers||{},t.headers["X-Tenant-Id"]=s)}catch{}return t});function Ch(t,s,i){const r=String(i||"").toLowerCase(),n=o=>o.replace(/gemini/gi,"AI").replace(/openai/gi,"AI");return t===409&&s==="DUPLICATE_INVOICE_NUMBER"?"Invoice number already exists.":t===409&&s==="DUPLICATE_VENDOR_INVOICE"?"A bill with this Vendor Invoice No. already exists.":t===422&&s==="VALIDATION_FAILED"?"Please check the form and fix highlighted fields.":t===422&&(r.includes("amount")||r.includes("date"))?"Invalid input. Please review amounts and dates.":t===401?"You are not signed in. Please log in and try again.":t===403?"You do not have permission to perform this action.":t===404?"Not found.":t===429?"You’re doing that too fast. Please try again in a moment.":t&&t>=500?"Something went wrong on the server. Please try again.":n(i||"Something went wrong. Please try again.")}X.interceptors.response.use(t=>t,async t=>{try{const o=t?.response?.status,a=t?.config||{};if(o===401&&!a.__isRetry){const l=await Qa();if(l){a.__isRetry=!0,a.headers=a.headers||{},a.headers.Authorization=`Bearer ${l}`;const m=En();return m&&(a.headers["X-Tenant-Id"]=m),X.request(a)}}}catch{}const s=t?.response?.status,i=t?.response?.data?.code,r=t?.response?.data?.message||t?.response?.data?.error,n=Ch(s,i,r||t.message);try{const o={level:"error",ts:new Date().toISOString(),url:t?.config?.url||"",method:(t?.config?.method||"").toUpperCase(),status:s||0,code:i||void 0,message:n};if(typeof window<"u")try{window.dispatchEvent(new CustomEvent("api:error",{detail:o}))}catch{}import.meta&&console.warn("[api:error]",o)}catch{}return Promise.reject(new Error(n))});async function Xa(){const{data:t}=await X.post("/api/setup/ensure-core-accounts",{});return t}async function el(t=1e4,s){const{data:i}=await X.post("/api/setup/initial-capital",{amount:t,reference:s});return i}async function sl(t=5e3,s){const{data:i}=await X.post("/api/setup/sample-revenue",{amount:t,reference:s});return i}async function tl(t={}){const{data:s}=await X.post("/api/setup/bootstrap-tenant",t);return s}async function vn(t="us-gaap",s){const{data:i}=await X.post(`/api/setup/seed-coa?preset=${t}`,{tenantId:s});return i}const _i={ensureCoreAccounts:Xa,addInitialCapital:el,addSampleRevenue:sl,bootstrapTenant:tl,seedCoa:vn},il=c.createContext({user:null,session:null,loading:!0});function jh({children:t}){const[s,i]=c.useState(null),[r,n]=c.useState(null),[o,a]=c.useState(!0),[l,m]=c.useState(!1);c.useEffect(()=>{let u=!0;(async()=>{const{data:f}=await hs.auth.getSession();u&&(n(f.session),i(f.session?.user??null),a(!1))})();const{data:b}=hs.auth.onAuthStateChange((f,x)=>{n(x),i(x?.user??null)});return()=>{u=!1,b.subscription.unsubscribe()}},[]),c.useEffect(()=>{if(!r||!s)return;let u=!1;return(async()=>{try{m(!0);const b=`Personal - ${s.email||s.id}`,f=await tl({tenantName:b,userId:s.id,role:"OWNER"});if(u)return;f?.tenantId&&Ya(f.tenantId)}catch(b){const f=b?.message||"Tenant bootstrap failed";window.dispatchEvent(new CustomEvent("toast",{detail:{message:f,type:"error"}}))}finally{m(!1)}})(),()=>{u=!0}},[r?.access_token,s?.id]);const h=c.useMemo(()=>({user:s,session:r,loading:o||s&&l}),[s,r,o,l]);return e.jsxDEV(il.Provider,{value:h,children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/theme/AuthProvider.tsx",lineNumber:56,columnNumber:9},this)}function rr(){return c.useContext(il)}function rl(t){var s,i,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(i=rl(t[s]))&&(r&&(r+=" "),r+=i)}else for(i in t)t[i]&&(r&&(r+=" "),r+=i);return r}function Vh(){for(var t,s,i=0,r="",n=arguments.length;i<n;i++)(t=arguments[i])&&(s=rl(t))&&(r&&(r+=" "),r+=s);return r}const Dn="-",Zh=t=>{const s=Rh(t),{conflictingClassGroups:i,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Dn);return l[0]===""&&l.length!==1&&l.shift(),nl(l,s)||Sh(a)},getConflictingClassGroupIds:(a,l)=>{const m=i[a]||[];return l&&r[a]?[...m,...r[a]]:m}}},nl=(t,s)=>{if(t.length===0)return s.classGroupId;const i=t[0],r=s.nextPart.get(i),n=r?nl(t.slice(1),r):void 0;if(n)return n;if(s.validators.length===0)return;const o=t.join(Dn);return s.validators.find(({validator:a})=>a(o))?.classGroupId},vo=/^\[(.+)\]$/,Sh=t=>{if(vo.test(t)){const s=vo.exec(t)[1],i=s?.substring(0,s.indexOf(":"));if(i)return"arbitrary.."+i}},Rh=t=>{const{theme:s,prefix:i}=t,r={nextPart:new Map,validators:[]};return Ah(Object.entries(t.classGroups),i).forEach(([o,a])=>{rn(a,r,o,s)}),r},rn=(t,s,i,r)=>{t.forEach(n=>{if(typeof n=="string"){const o=n===""?s:Do(s,n);o.classGroupId=i;return}if(typeof n=="function"){if(kh(n)){rn(n(r),s,i,r);return}s.validators.push({validator:n,classGroupId:i});return}Object.entries(n).forEach(([o,a])=>{rn(a,Do(s,o),i,r)})})},Do=(t,s)=>{let i=t;return s.split(Dn).forEach(r=>{i.nextPart.has(r)||i.nextPart.set(r,{nextPart:new Map,validators:[]}),i=i.nextPart.get(r)}),i},kh=t=>t.isThemeGetter,Ah=(t,s)=>s?t.map(([i,r])=>{const n=r.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[s+a,l])):o);return[i,n]}):t,Ih=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,i=new Map,r=new Map;const n=(o,a)=>{i.set(o,a),s++,s>t&&(s=0,r=i,i=new Map)};return{get(o){let a=i.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return n(o,a),a},set(o,a){i.has(o)?i.set(o,a):n(o,a)}}},ol="!",_h=t=>{const{separator:s,experimentalParseClassName:i}=t,r=s.length===1,n=s[0],o=s.length,a=l=>{const m=[];let h=0,u=0,b;for(let p=0;p<l.length;p++){let v=l[p];if(h===0){if(v===n&&(r||l.slice(p,p+o)===s)){m.push(l.slice(u,p)),u=p+o;continue}if(v==="/"){b=p;continue}}v==="["?h++:v==="]"&&h--}const f=m.length===0?l:l.substring(u),x=f.startsWith(ol),g=x?f.substring(1):f,N=b&&b>u?b-u:void 0;return{modifiers:m,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:N}};return i?l=>i({className:l,parseClassName:a}):a},Th=t=>{if(t.length<=1)return t;const s=[];let i=[];return t.forEach(r=>{r[0]==="["?(s.push(...i.sort(),r),i=[]):i.push(r)}),s.push(...i.sort()),s},Ph=t=>({cache:Ih(t.cacheSize),parseClassName:_h(t),...Zh(t)}),Mh=/\s+/,Lh=(t,s)=>{const{parseClassName:i,getClassGroupId:r,getConflictingClassGroupIds:n}=s,o=[],a=t.trim().split(Mh);let l="";for(let m=a.length-1;m>=0;m-=1){const h=a[m],{modifiers:u,hasImportantModifier:b,baseClassName:f,maybePostfixModifierPosition:x}=i(h);let g=!!x,N=r(g?f.substring(0,x):f);if(!N){if(!g){l=h+(l.length>0?" "+l:l);continue}if(N=r(f),!N){l=h+(l.length>0?" "+l:l);continue}g=!1}const p=Th(u).join(":"),v=b?p+ol:p,E=v+N;if(o.includes(E))continue;o.push(E);const w=n(N,g);for(let C=0;C<w.length;++C){const S=w[C];o.push(v+S)}l=h+(l.length>0?" "+l:l)}return l};function Oh(){let t=0,s,i,r="";for(;t<arguments.length;)(s=arguments[t++])&&(i=al(s))&&(r&&(r+=" "),r+=i);return r}const al=t=>{if(typeof t=="string")return t;let s,i="";for(let r=0;r<t.length;r++)t[r]&&(s=al(t[r]))&&(i&&(i+=" "),i+=s);return i};function Fh(t,...s){let i,r,n,o=a;function a(m){const h=s.reduce((u,b)=>b(u),t());return i=Ph(h),r=i.cache.get,n=i.cache.set,o=l,l(m)}function l(m){const h=r(m);if(h)return h;const u=Lh(m,i);return n(m,u),u}return function(){return o(Oh.apply(null,arguments))}}const qe=t=>{const s=i=>i[t]||[];return s.isThemeGetter=!0,s},ll=/^\[(?:([a-z-]+):)?(.+)\]$/i,Uh=/^\d+\/\d+$/,$h=new Set(["px","full","screen"]),qh=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zh=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hh=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wh=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bs=t=>Ut(t)||$h.has(t)||Uh.test(t),Xs=t=>Wt(t,"length",sp),Ut=t=>!!t&&!Number.isNaN(Number(t)),Dr=t=>Wt(t,"number",Ut),Yt=t=>!!t&&Number.isInteger(Number(t)),Gh=t=>t.endsWith("%")&&Ut(t.slice(0,-1)),ye=t=>ll.test(t),et=t=>qh.test(t),Kh=new Set(["length","size","percentage"]),Jh=t=>Wt(t,Kh,cl),Yh=t=>Wt(t,"position",cl),Qh=new Set(["image","url"]),Xh=t=>Wt(t,Qh,ip),ep=t=>Wt(t,"",tp),Qt=()=>!0,Wt=(t,s,i)=>{const r=ll.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):i(r[2]):!1},sp=t=>Bh.test(t)&&!zh.test(t),cl=()=>!1,tp=t=>Hh.test(t),ip=t=>Wh.test(t),rp=()=>{const t=qe("colors"),s=qe("spacing"),i=qe("blur"),r=qe("brightness"),n=qe("borderColor"),o=qe("borderRadius"),a=qe("borderSpacing"),l=qe("borderWidth"),m=qe("contrast"),h=qe("grayscale"),u=qe("hueRotate"),b=qe("invert"),f=qe("gap"),x=qe("gradientColorStops"),g=qe("gradientColorStopPositions"),N=qe("inset"),p=qe("margin"),v=qe("opacity"),E=qe("padding"),w=qe("saturate"),C=qe("scale"),S=qe("sepia"),Z=qe("skew"),D=qe("space"),T=qe("translate"),U=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],se=()=>["auto",ye,s],_=()=>[ye,s],P=()=>["",Bs,Xs],B=()=>["auto",Ut,ye],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ye],k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[Ut,ye];return{cacheSize:500,separator:":",theme:{colors:[Qt],spacing:[Bs,Xs],blur:["none","",et,ye],brightness:Y(),borderColor:[t],borderRadius:["none","","full",et,ye],borderSpacing:_(),borderWidth:P(),contrast:Y(),grayscale:V(),hueRotate:Y(),invert:V(),gap:_(),gradientColorStops:[t],gradientColorStopPositions:[Gh,Xs],inset:se(),margin:se(),opacity:Y(),padding:_(),saturate:Y(),scale:Y(),sepia:V(),skew:Y(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[et]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),ye]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yt,ye]}],basis:[{basis:se()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Yt,ye]}],"grid-cols":[{"grid-cols":[Qt]}],"col-start-end":[{col:["auto",{span:["full",Yt,ye]},ye]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Qt]}],"row-start-end":[{row:["auto",{span:[Yt,ye]},ye]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,s]}],"min-w":[{"min-w":[ye,s,"min","max","fit"]}],"max-w":[{"max-w":[ye,s,"none","full","min","max","fit","prose",{screen:[et]},et]}],h:[{h:[ye,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,s,"auto","min","max","fit"]}],"font-size":[{text:["base",et,Xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Dr]}],"font-family":[{font:[Qt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Ut,Dr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bs,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bs,Xs]}],"underline-offset":[{"underline-offset":["auto",Bs,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),Yh]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Jh]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Xh]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:H()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Bs,ye]}],"outline-w":[{outline:[Bs,Xs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Bs,Xs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",et,ep]}],"shadow-color":[{shadow:[Qt]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[r]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",et,ye]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[b]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Yt,ye]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Bs,Xs,Dr]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},np=Fh(rp);function L(...t){return np(Vh(t))}const q=c.forwardRef(({children:t,className:s,variant:i="medium",elevation:r=2,glow:n=!1,hover:o=!0,depth:a=3,style:l,...m},h)=>{const{currentTheme:u}=Rs(),b=p=>({light:"backdrop-blur-xl bg-white/[0.08] dark:bg-white/[0.06] border-white/[0.08] dark:border-white/[0.08]",medium:"backdrop-blur-2xl bg-white/[0.15] dark:bg-white/[0.12] border-white/[0.12] dark:border-white/[0.12]",heavy:"backdrop-blur-3xl bg-white/[0.25] dark:bg-white/[0.20] border-white/[0.16] dark:border-white/[0.16]"})[p],f=p=>n?{light:"shadow-[var(--shadow-glow-sm)]",medium:"shadow-[var(--shadow-glow-md)]",heavy:"shadow-[var(--shadow-glow-lg)]"}[p]:"",x={1:{backdropFilter:"blur(var(--surface-1-blur))",WebkitBackdropFilter:"blur(var(--surface-1-blur))",background:"var(--surface-1-bg)",borderColor:"var(--surface-1-border)"},2:{backdropFilter:"blur(var(--surface-2-blur))",WebkitBackdropFilter:"blur(var(--surface-2-blur))",background:"var(--surface-2-bg)",borderColor:"var(--surface-2-border)"},3:{backdropFilter:"blur(var(--surface-3-blur))",WebkitBackdropFilter:"blur(var(--surface-3-blur))",background:"var(--surface-3-bg)",borderColor:"var(--surface-3-border)"}},g=p=>u==="light"?{light:"shadow-md",medium:"shadow-lg",heavy:"shadow-xl"}[p]:{light:"shadow-sm",medium:"shadow-md",heavy:"shadow-lg"}[p],N=p=>u==="light"?{light:"border-gray-200/60",medium:"border-gray-300/70",heavy:"border-gray-400/80"}[p]:"";return e.jsxDEV(R.div,{ref:h,className:L("relative rounded-2xl border",b(i),g(i),N(i),"before:absolute before:inset-0 before:rounded-2xl before:will-change-transform","before:bg-gradient-to-br before:from-white/25 before:via-white/8 before:to-transparent","before:opacity-70 before:pointer-events-none","after:absolute after:inset-x-0 after:top-0 after:h-px after:rounded-t-2xl","after:bg-gradient-to-r after:from-transparent after:via-white/40 after:to-transparent","after:pointer-events-none",f(i),"transition-all duration-300 ease-out",s),style:{...x[r],...l},whileHover:o?{scale:1.02,y:-4,boxShadow:u==="light"?"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 10px 20px rgba(0, 0, 0, 0.1)":void 0,filter:void 0,backdropFilter:void 0,transition:{type:"spring",stiffness:400,damping:25,duration:.2}}:void 0,whileTap:o?{scale:.99}:void 0,...m,children:e.jsxDEV("div",{className:"relative z-10 h-full min-h-0 flex flex-col",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/ThemedGlassSurface.tsx",lineNumber:162,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/ThemedGlassSurface.tsx",lineNumber:109,columnNumber:5},void 0)});q.displayName="ThemedGlassSurface";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var op={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,s)=>{const i=c.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:m,...h},u)=>c.createElement("svg",{ref:u,...op,width:n,height:n,stroke:r,strokeWidth:a?Number(o)*24/Number(n):o,className:["lucide",`lucide-${ap(t)}`,l].join(" "),...h},[...s.map(([b,f])=>c.createElement(b,f)),...Array.isArray(m)?m:[m]]));return i.displayName=`${t}`,i};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=me("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=me("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=me("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=me("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=me("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=me("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=me("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=me("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=me("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=me("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=me("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=me("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=me("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=me("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=me("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=me("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=me("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=me("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=me("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=me("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=me("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=me("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=me("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=me("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=me("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ap=[{id:"dashboard",label:"Command Center",icon:bp,description:"Financial mission control",badge:"AI"},{id:"universe",label:"Financial Universe",icon:$i,description:"3D data exploration",badge:"3D"},{id:"transactions",label:"Transaction Flow",icon:cp,description:"Liquid money movement",badge:"LIVE"},{id:"assets",label:"Assets",icon:up,description:"Fixed assets & depreciation"},{id:"reports",label:"Intelligence Reports",icon:wn,description:"AI-powered insights"},{id:"customers",label:"Customers",icon:nr,description:"Manage clients"},{id:"settings",label:"System Config",icon:Dp,description:"Customize your universe"}];function Ip({currentView:t,onViewChange:s,businessHealth:i}){const[r,n]=c.useState(!1),[o,a]=c.useState(!1),[l,m]=c.useState(null),[h,u]=c.useState(!1),{currentTheme:b,isDark:f}=Rs(),[x,g]=c.useState([]),[N,p]=c.useState(En());c.useEffect(()=>{let D=!1;return(async()=>{try{const{data:T}=await X.get("/api/memberships");D||g(Array.isArray(T?.memberships)?T.memberships:[])}catch{}})(),()=>{D=!0}},[]);const v=c.useMemo(()=>x.find(D=>D.tenantId===N)?.tenantName||"Workspace",[x,N]),E=async D=>{try{await X.post("/api/memberships/switch",{tenantId:D}),Ya(D),p(D),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Tenant switched",type:"success"}})),window.dispatchEvent(new Event("data:refresh"))}catch(T){const U=T?.message||"Failed to switch tenant";window.dispatchEvent(new CustomEvent("toast",{detail:{message:U,type:"error"}}))}},C=i>=80?{label:"Thriving",color:"text-green-400",icon:"🚀"}:i>=60?{label:"Stable",color:"text-blue-400",icon:"📈"}:i>=40?{label:"Cautious",color:"text-yellow-400",icon:"⚠️"}:{label:"Critical",color:"text-red-400",icon:"🔴"},S=async()=>{try{a(!0),await hs.auth.signOut(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Signed out",type:"success"}})),s("login");try{window.history.pushState({view:"login"},"","/login"),window.dispatchEvent(new PopStateEvent("popstate"))}catch{}}catch(D){const T=D?.message||"Sign out failed";window.dispatchEvent(new CustomEvent("toast",{detail:{message:T,type:"error"}}))}finally{a(!1)}},Z={hidden:{opacity:0,x:-20,scale:.95},visible:D=>({opacity:1,x:0,scale:1,transition:{delay:D*.1,duration:.4,ease:[.23,1,.32,1]}}),hover:{scale:1.05,x:8,transition:{duration:.2,ease:[.23,1,.32,1]}}};return e.jsxDEV("div",{className:L("fixed left-2 md:left-4 top-1/2 -translate-y-1/2 z-40 transition-all duration-500",r?"w-72":"w-16"),children:[e.jsxDEV(q,{variant:"medium",elevation:2,className:"h-auto w-full flex flex-col z-40 transition-all duration-500 ease-out breathe",children:[e.jsxDEV("div",{className:"p-4 border-b border-border/20",children:e.jsxDEV(R.button,{onClick:()=>n(!r),className:"w-full flex items-center gap-3 text-left group",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center group-hover:from-primary/30 group-hover:to-primary/20 transition-all",children:e.jsxDEV(Gt,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:191,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"overflow-hidden",children:[e.jsxDEV("div",{className:"text-sm font-bold tracking-tight whitespace-nowrap",children:[e.jsxDEV("span",{className:"text-primary",children:"AI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:203,columnNumber:21},this),"Ledger"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:202,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Automated Bookkeeping"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:205,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:196,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:194,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:184,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:183,columnNumber:9},this),e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 border-b border-border/20",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("span",{className:"text-lg",children:C.icon},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:224,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:L("text-sm font-medium",f?C.color:"text-foreground/90"),children:C.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:226,columnNumber:19},this),e.jsxDEV("div",{className:L("text-xs",f?"text-muted-contrast":"text-foreground/60"),children:["Health Score: ",i.toFixed(0),"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:229,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:225,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV("div",{className:"w-full h-2 bg-surface rounded-full overflow-hidden",children:e.jsxDEV(R.div,{className:L("h-full rounded-full",i>=80&&"bg-gradient-to-r from-green-500 to-emerald-400",i>=60&&i<80&&"bg-gradient-to-r from-blue-500 to-indigo-400",i>=40&&i<60&&"bg-gradient-to-r from-yellow-500 to-orange-400",i<40&&"bg-gradient-to-r from-red-500 to-pink-400"),initial:{width:0},animate:{width:`${i}%`},transition:{duration:1,ease:[.23,1,.32,1]}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:237,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:217,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:215,columnNumber:9},this),e.jsxDEV("nav",{className:"flex-1 p-2 space-y-1",children:Ap.map((D,T)=>{const U=D.icon,W=t===D.id,se=l===D.id;return e.jsxDEV(R.div,{custom:T,variants:Z,initial:"hidden",animate:"visible",whileHover:"hover",className:"relative",children:[e.jsxDEV("button",{onClick:()=>{s(D.id),r&&n(!1)},onMouseEnter:()=>m(D.id),onMouseLeave:()=>m(null),className:L("w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200","group relative overflow-hidden",W?"bg-primary/10 text-primary":f?"hover:bg-surface/50 text-muted-contrast hover:text-primary-contrast":"text-foreground/90 hover:text-primary hover:bg-surface/70"),children:[W&&e.jsxDEV(R.div,{layoutId:"activeIndicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r-full",transition:{duration:.3,ease:[.23,1,.32,1]}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:287,columnNumber:21},this),se&&e.jsxDEV(R.div,{className:"absolute inset-0 bg-primary/5 rounded-lg",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:296,columnNumber:21},this),e.jsxDEV("div",{className:L("w-6 h-6 flex items-center justify-center relative z-10",W&&"animate-pulse"),children:e.jsxDEV(U,{className:L("w-5 h-5",!W&&!f&&"text-foreground/90 group-hover:text-primary")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:310,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:306,columnNumber:19},this),e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"flex-1 text-left overflow-hidden relative z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:L("text-sm font-medium",!f&&"text-foreground/90"),children:D.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:323,columnNumber:27},this),D.badge&&e.jsxDEV("span",{className:L("px-1.5 py-0.5 text-xs rounded",f?"bg-primary/20 text-primary":"bg-primary/10 text-primary/90"),children:D.badge},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:327,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:322,columnNumber:25},this),e.jsxDEV("div",{className:L("text-xs",f?"text-muted-contrast":"text-foreground/60"),children:D.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:332,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:316,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:314,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:271,columnNumber:17},this),e.jsxDEV(_e,{children:!r&&se&&e.jsxDEV(R.div,{initial:{opacity:0,x:-10,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.9},className:"absolute left-16 top-1/2 -translate-y-1/2 z-50",children:e.jsxDEV(q,{variant:"heavy",className:"px-3 py-2 text-sm whitespace-nowrap",children:[e.jsxDEV("div",{className:"font-medium text-primary-contrast",children:D.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:353,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:D.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:349,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:343,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:341,columnNumber:17},this)]},D.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:262,columnNumber:15},this)})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:255,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 border-t border-border/20",children:e.jsxDEV(_e,{children:r?e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:"Tenant"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:377,columnNumber:19},this),e.jsxDEV("select",{value:N||"",onChange:D=>E(D.target.value),className:"text-xs bg-white/10 border border-white/10 rounded px-2 py-1",children:(x.length?x:[{tenantId:N||"",tenantName:v,role:"MEMBER"}]).map(D=>e.jsxDEV("option",{value:D.tenantId,children:D.tenantName||D.tenantId},D.tenantId,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:380,columnNumber:23},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:378,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:376,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-muted-contrast",children:[e.jsxDEV(nr,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:385,columnNumber:19},this),e.jsxDEV("span",{children:"Real-time sync active"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:386,columnNumber:19},this),e.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:387,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:384,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-muted-contrast",children:[e.jsxDEV(jt,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV("span",{children:"Performance: 60 FPS"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:391,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:389,columnNumber:17},this),e.jsxDEV("button",{onClick:S,className:L("mt-2 w-full flex items-center gap-3 p-3 rounded-lg transition-all duration-200","bg-transparent hover:bg-primary/10 text-foreground/90 hover:text-primary"),disabled:o,children:[e.jsxDEV(jo,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:403,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:o?"Signing out…":"Log out"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:404,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:395,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:370,columnNumber:15},this):e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center gap-3 py-1",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:414,columnNumber:17},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{onClick:S,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:L("w-10 h-10 flex items-center justify-center rounded-xl hover:bg-primary/10 transition-all",o&&"opacity-60 cursor-not-allowed"),"aria-label":"Log out",disabled:o,children:e.jsxDEV(jo,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:425,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:417,columnNumber:19},this),e.jsxDEV(_e,{children:!r&&h&&e.jsxDEV(R.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},className:"absolute left-12 top-1/2 -translate-y-1/2 z-50",children:e.jsxDEV(q,{variant:"heavy",className:"px-3 py-2 text-sm whitespace-nowrap",hover:!1,children:e.jsxDEV("div",{className:"font-medium text-primary-contrast",children:"Log out"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:436,columnNumber:27},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:435,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:429,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:427,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:416,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:408,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:368,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:367,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:177,columnNumber:7},this),e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-30 md:hidden",style:{background:"transparent",backdropFilter:"none"},onClick:()=>n(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:451,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:449,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/Navigation.tsx",lineNumber:172,columnNumber:5},this)}const _p={revenue:{icon:"text-financial-revenue",background:"from-financial-revenue/20 to-financial-revenue/10",glow:"revenue-glow",border:"border-financial-revenue/30"},expense:{icon:"text-financial-expense",background:"from-financial-expense/20 to-financial-expense/10",glow:"expense-glow",border:"border-financial-expense/30"},profit:{icon:"text-financial-profit",background:"from-financial-profit/20 to-financial-profit/10",glow:"profit-glow",border:"border-financial-profit/30"},primary:{icon:"text-primary",background:"from-primary/20 to-primary/10",glow:"shadow-primary",border:"border-primary/30"}};function Ci({title:t,value:s,previousValue:i,trend:r,change:n,icon:o,color:a,sparkline:l}){const m=_p[a],h=r==="up",{currentTheme:u,isDark:b}=Rs(),f=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),x=c.useMemo(()=>{const g=Array.isArray(l)?l.filter(U=>Number.isFinite(U)):[];if(!g||g.length<2)return null;const N=160,p=40,v=2,E=4,w=Math.min(...g),S=Math.max(...g)-w||1,Z=g.map((U,W)=>{const se=v+W*(N-v*2)/(g.length-1),_=p-E-(U-w)/S*(p-E*2);return{x:se,y:_}});let D=`M ${Z[0].x} ${Z[0].y}`;for(let U=1;U<Z.length;U++){const W=Z[U-1],se=Z[U],_=W.x+(se.x-W.x)/3,P=W.x+2*(se.x-W.x)/3;D+=` C ${_} ${W.y}, ${P} ${se.y}, ${se.x} ${se.y}`}const T=Z[Z.length-1];return{d:D,lastX:T.x,lastY:T.y,width:N,height:p}},[l]);return e.jsxDEV(q,{variant:"medium",elevation:2,glow:!1,hover:!1,className:L("p-6 h-full enhanced-card-hover shimmer-effect",b&&u==="dark"&&"white-glow"),children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:L("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center",m.background),children:e.jsxDEV(o,{className:L("w-6 h-6",m.icon)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:119,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:115,columnNumber:9},this),e.jsxDEV("div",{className:L("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",h?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:[e.jsxDEV("div",{className:L("w-3 h-3",!h&&"rotate-180"),children:"▲"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:129,columnNumber:11},this),n.toFixed(1),"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:123,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:114,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:L("text-3xl font-bold tracking-tight leading-none text-primary-contrast",b&&"text-bright-glow"),children:f(s)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:138,columnNumber:9},this),e.jsxDEV("div",{className:"text-sm font-medium text-secondary-contrast uppercase tracking-wide",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:145,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:137,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 pt-4 border-t border-border/20",children:e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("span",{className:"text-muted-contrast",children:["Previous: ",f(i)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV("span",{className:L("font-medium",h?"text-green-400":"text-red-400"),children:[h?"+":"",f(s-i)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4",children:x?e.jsxDEV("div",{className:"w-full h-10",children:e.jsxDEV("svg",{width:"100%",height:"100%",viewBox:`0 0 ${x.width} ${x.height}`,preserveAspectRatio:"none",className:L(a==="revenue"&&"text-financial-revenue",a==="expense"&&"text-financial-expense",a==="profit"&&"text-financial-profit",a==="primary"&&"text-primary"),children:[e.jsxDEV("path",{d:x.d,fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.9"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:181,columnNumber:15},this),e.jsxDEV("circle",{cx:x.lastX,cy:x.lastY,r:"2.5",fill:"currentColor"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:182,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:168,columnNumber:11},this):e.jsxDEV("div",{className:"w-full h-1 bg-surface rounded-full overflow-hidden",children:e.jsxDEV("div",{className:L("h-full rounded-full bg-gradient-to-r",a==="revenue"&&"from-financial-revenue/60 to-financial-revenue",a==="expense"&&"from-financial-expense/60 to-financial-expense",a==="profit"&&"from-financial-profit/60 to-financial-profit",a==="primary"&&"from-primary/60 to-primary"),style:{width:`${Math.min(100,s/(i*1.5)*100)}%`}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:187,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:186,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:166,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/FinancialMetricCard.tsx",lineNumber:103,columnNumber:5},this)}const wr=(t,s,i,r,n=1)=>{if(i&&i.length>0){const h=[...i];return Math.abs(h[h.length-1]-t)>t*.001&&(h[h.length-1]=t),h.map((u,b)=>({value:Math.round(u),month:b,label:r?.[b]}))}const o=[];let a=t*.7;const l=t*.05,m=s==="up"?1.15:.95;for(let h=0;h<12;h++){const b=Math.sin(n*h*.5)*.5*l;a=a*(1+(m-1)*.1)+b,o.push({value:Math.round(a),month:h})}return o};function Tp({data:t}){const{isDark:s}=Rs(),[i,r]=c.useState(null),[,n]=c.useState(0),o=c.useRef(null),a=c.useRef(null),[l,m]=c.useState(null),h=c.useMemo(()=>{const _=t.series?.labels,P=wr(t.revenue.current,t.revenue.trend,t.series?.revenue,_,1),B=wr(t.expenses.current,t.expenses.trend,t.series?.expenses,_,2),le=t.series?.profit??(t.series?.revenue&&t.series?.expenses?t.series.revenue.map((G,z)=>G-t.series.expenses[z]):void 0),H=le?wr(t.profit.current,t.profit.trend,le,_,3):P.map((G,z)=>({value:Math.max(0,G.value-(B[z]?.value??0)),month:z}));return{revenueData:P,expenseData:B,profitData:H}},[t.revenue.current,t.revenue.trend,t.expenses.current,t.expenses.trend,t.profit.current,t.profit.trend,t.series?.revenue,t.series?.expenses,t.series?.profit,t.series?.labels]),u=_=>{if(!_||_.length===0)return[{value:0,month:0},{value:0,month:1}];if(_.length>=2)return _;const P=_[0];return[P,{...P,month:(P.month??0)+1}]},b=u(h.revenueData),f=u(h.expenseData),x=u(h.profitData);c.useEffect(()=>{const _=setInterval(()=>{n(P=>(P+1)%100)},200);return()=>clearInterval(_)},[]);const g=500,N=300,p=48,v=[...b.map(_=>_.value),...f.map(_=>_.value),...x.map(_=>_.value)],E=Math.max(...v),w=Math.min(...v),C=Math.max(1,E-w),S=v.some(_=>Number.isFinite(_)),Z=_=>!Number.isFinite(_)||C===0?0:(_-w)/C,D=_=>{if(!o.current||!a.current)return;const P=o.current.clientWidth||g,le=(p+_*(g-2*p)/(b.length-1))/g*P,H=a.current.clientWidth||220,G=8,z=Math.min(Math.max(le-H/2,G),P-H-G);m(z)};c.useEffect(()=>{if(!i){m(null);return}const[,_]=i.split("-"),P=parseInt(_),B=requestAnimationFrame(()=>D(P));return()=>cancelAnimationFrame(B)},[i]),c.useEffect(()=>{if(!i)return;const _=()=>{const[,P]=i.split("-");D(parseInt(P))};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[i]);const T=(_,P,B=0)=>{if(!_||_.length===0)return"";let le="";_.forEach((G,z)=>{const V=p+z*(g-2*p)/(_.length-1),k=Z(G.value),Y=N-p-k*(N-2*p)+B;if(z===0)le+=`M ${V} ${Y}`;else{const ae=p+(z-1)*(g-2*p)/(_.length-1),de=ae+(V-ae)/3,Ee=ae+2*(V-ae)/3,je=N-p-Z(_[z-1].value)*(N-2*p)+B;le+=` C ${de} ${je}, ${Ee} ${Y}, ${V} ${Y}`}});const H=p+(_.length-1)*(g-2*p)/(_.length-1);return le+=` L ${H} ${N-p} L ${p} ${N-p} Z`,le},U=(_,P=0)=>{let B="";return _.forEach((le,H)=>{const G=p+H*(g-2*p)/(_.length-1),z=Z(le.value),V=N-p-z*(N-2*p)+P;if(H===0)B+=`M ${G} ${V}`;else{const k=p+(H-1)*(g-2*p)/(_.length-1),Y=k+(G-k)/3,ae=k+2*(G-k)/3,de=N-p-Z(_[H-1].value)*(N-2*p)+P;B+=` C ${Y} ${de}, ${ae} ${V}, ${G} ${V}`}}),B},W=(_,P,B=0)=>{const le=p+P*(g-2*p)/(_.length-1),H=Z(_[P].value),G=N-p-H*(N-2*p)+B;return{x:le,y:G}},se=(_,P)=>{switch(_){case"revenue":return b[P];case"expense":return f[P];case"profit":return x[P];default:return null}};return e.jsxDEV(q,{variant:"medium",className:"p-4 sm:p-6 h-full enhanced-card-hover",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-3 sm:gap-0",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(nr,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:251,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:250,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Liquid Cash Flow"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:254,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Real-time financial movement visualization"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:255,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:253,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:249,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-financial-revenue"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:264,columnNumber:13},this),e.jsxDEV("span",{children:"Revenue"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:265,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:263,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-financial-expense"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:268,columnNumber:13},this),e.jsxDEV("span",{children:"Expenses"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:269,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:267,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 rounded-full bg-financial-profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:272,columnNumber:13},this),e.jsxDEV("span",{children:"Profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:271,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:262,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:248,columnNumber:7},this),e.jsxDEV("div",{ref:o,className:"relative w-full h-[250px] sm:h-[300px] lg:h-[350px] rounded-lg overflow-hidden bg-gradient-to-br from-surface/30 to-transparent",children:[e.jsxDEV("svg",{width:"100%",height:"100%",viewBox:`0 0 ${g} ${N}`,className:"absolute inset-0",preserveAspectRatio:"xMidYMid meet",children:[e.jsxDEV("defs",{children:[e.jsxDEV("linearGradient",{id:"revenueGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"rgb(var(--color-financial-revenue))",stopOpacity:"0.8"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:290,columnNumber:15},this),e.jsxDEV("stop",{offset:"100%",stopColor:"rgb(var(--color-financial-revenue))",stopOpacity:"0.2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:291,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:289,columnNumber:13},this),e.jsxDEV("linearGradient",{id:"expenseGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"rgb(var(--color-financial-expense))",stopOpacity:"0.8"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:295,columnNumber:15},this),e.jsxDEV("stop",{offset:"100%",stopColor:"rgb(var(--color-financial-expense))",stopOpacity:"0.2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:294,columnNumber:13},this),e.jsxDEV("linearGradient",{id:"profitGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"rgb(var(--color-financial-profit))",stopOpacity:"0.8"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:300,columnNumber:15},this),e.jsxDEV("stop",{offset:"100%",stopColor:"rgb(var(--color-financial-profit))",stopOpacity:"0.2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:301,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:299,columnNumber:13},this),e.jsxDEV("pattern",{id:"liquidFlow",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsxDEV(R.rect,{width:"20",height:"20",fill:"url(#revenueGradient)",animate:{x:[0,20,0],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:306,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:305,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:287,columnNumber:11},this),e.jsxDEV("g",{opacity:"0.12",children:[Array.from({length:4}).map((_,P)=>e.jsxDEV("line",{x1:p,y1:p+P*(N-2*p)/4,x2:g-p,y2:p+P*(N-2*p)/4,stroke:"currentColor",strokeWidth:"1"},`h-${P}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:326,columnNumber:15},this)),Array.from({length:b.length}).map((_,P)=>e.jsxDEV("line",{x1:p+P*(g-2*p)/(b.length-1||1),y1:p,x2:p+P*(g-2*p)/(b.length-1||1),y2:N-p,stroke:"currentColor",strokeWidth:"1"},`v-${P}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:337,columnNumber:15},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:324,columnNumber:11},this),S&&e.jsxDEV(R.path,{d:T(f,"expense",20),fill:"url(#expenseGradient)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:2,delay:.5}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:353,columnNumber:13},this),S&&e.jsxDEV(R.path,{d:T(b,"revenue",0),fill:"url(#revenueGradient)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:2,delay:1}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:363,columnNumber:13},this),S&&e.jsxDEV(R.path,{d:T(x,"profit",-10),fill:"url(#profitGradient)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:2,delay:1.5}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:373,columnNumber:13},this),S&&e.jsxDEV(R.path,{d:U(f,20),stroke:"rgb(var(--color-financial-expense))",strokeWidth:"2.5",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.9},transition:{duration:1.6,delay:.5}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:384,columnNumber:13},this),e.jsxDEV(R.path,{d:S?U(b,0):"",stroke:"rgb(var(--color-financial-revenue))",strokeWidth:"3",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:S?.95:0},transition:{duration:1.6,delay:1}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:394,columnNumber:11},this),S&&e.jsxDEV(R.path,{d:U(x,-10),stroke:"rgb(var(--color-financial-profit))",strokeWidth:"2.5",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.9},transition:{duration:1.6,delay:1.5}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:404,columnNumber:13},this),S&&b.map((_,P)=>{const{x:B,y:le}=W(b,P,0);return e.jsxDEV(R.circle,{cx:B,cy:le,r:i===`revenue-${P}`?7:5,fill:"rgb(var(--color-financial-revenue))",stroke:s?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.85)",strokeWidth:"2",className:"cursor-pointer drop-shadow-lg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},whileHover:{scale:1.3},onMouseEnter:()=>r(`revenue-${P}`),onMouseLeave:()=>r(null),onTouchStart:()=>r(`revenue-${P}`),onTouchEnd:()=>r(null)},`revenue-${P}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:422,columnNumber:15},this)}),S&&f.map((_,P)=>{const{x:B,y:le}=W(f,P,20);return e.jsxDEV(R.circle,{cx:B,cy:le,r:i===`expense-${P}`?7:5,fill:"rgb(var(--color-financial-expense))",stroke:s?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.85)",strokeWidth:"2",className:"cursor-pointer drop-shadow-lg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},whileHover:{scale:1.3},onMouseEnter:()=>r(`expense-${P}`),onMouseLeave:()=>r(null),onTouchStart:()=>r(`expense-${P}`),onTouchEnd:()=>r(null)},`expense-${P}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:446,columnNumber:15},this)}),S&&x.map((_,P)=>{const{x:B,y:le}=W(x,P,-10);return e.jsxDEV(R.circle,{cx:B,cy:le,r:i===`profit-${P}`?7:5,fill:"rgb(var(--color-financial-profit))",stroke:s?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.85)",strokeWidth:"2",className:"cursor-pointer drop-shadow-lg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},whileHover:{scale:1.3},onMouseEnter:()=>r(`profit-${P}`),onMouseLeave:()=>r(null),onTouchStart:()=>r(`profit-${P}`),onTouchEnd:()=>r(null)},`profit-${P}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:470,columnNumber:15},this)})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:280,columnNumber:9},this),e.jsxDEV(_e,{children:i!==null&&(()=>{const[_,P]=i.split("-"),B=parseInt(P);return se(_,B)?e.jsxDEV(R.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"absolute z-10 pointer-events-none",style:{left:`${l??0}px`,top:"16px",transform:"none",maxWidth:"min(280px, calc(100% - 16px))"},ref:a,children:e.jsxDEV(q,{variant:"heavy",className:"px-4 py-3 text-sm shadow-xl chart-tooltip liquid-glass",hover:!1,children:[(()=>{const H=b[B]?.label||"",G=b.length-B,z=B===b.length-1?" (current)":"";return e.jsxDEV("div",{className:"font-semibold text-foreground mb-2",children:[H||`Month ${G}`,z]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:524,columnNumber:23},this)})(),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-financial-revenue"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:531,columnNumber:23},this),e.jsxDEV("span",{className:"text-financial-revenue font-medium",children:["Revenue: $",b[B]?.value.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:532,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:530,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-financial-expense"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:537,columnNumber:23},this),e.jsxDEV("span",{className:"text-financial-expense font-medium",children:["Expenses: $",f[B]?.value.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:538,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:536,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-financial-profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:543,columnNumber:23},this),e.jsxDEV("span",{className:"text-financial-profit font-medium",children:["Profit: $",x[B]?.value.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:544,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:542,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:529,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-contrast mt-2 pt-2 border-t border-border/30",children:["Hovering: ",e.jsxDEV("span",{className:"font-medium",children:_.charAt(0).toUpperCase()+_.slice(1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:550,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:549,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:518,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:505,columnNumber:15},this):null})()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:491,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:279,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6 grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-xl sm:text-2xl md:text-3xl font-black text-financial-revenue tracking-tight leading-none drop-shadow-sm",children:["$",t.revenue.current.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:564,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs sm:text-sm font-medium text-secondary-contrast uppercase tracking-wide mt-1",children:"Total Revenue"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:567,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:563,columnNumber:9},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-xl sm:text-2xl md:text-3xl font-black text-financial-expense tracking-tight leading-none drop-shadow-sm",children:["$",t.expenses.current.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:570,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs sm:text-sm font-medium text-secondary-contrast uppercase tracking-wide mt-1",children:"Total Expenses"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:573,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:569,columnNumber:9},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-xl sm:text-2xl md:text-3xl font-black text-financial-profit tracking-tight leading-none drop-shadow-sm",children:["$",t.profit.current.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:576,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs sm:text-sm font-medium text-secondary-contrast uppercase tracking-wide mt-1",children:"Net Profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:579,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:575,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:562,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/LiquidCashFlowVisualization.tsx",lineNumber:247,columnNumber:5},this)}function Pp({healthScore:t,metrics:s}){const i=c.useRef(null),[r,n]=c.useState(!1),[,o]=c.useState({x:0,y:0}),{currentTheme:a}=Rs(),l=[s?.revenue?.current,s?.expenses?.current,s?.profit?.current,s?.cashFlow?.current].every(N=>!(Number.isFinite(N)&&Number(N)!==0)),m=l?0:t,h=zl(0,{stiffness:100,damping:30});c.useEffect(()=>{h.set(m)},[m]),_n(h,[0,100],[0,360]),_n(h,[0,100],[.9,1.1]);const b=l?{score:0,label:"Getting Started",color:a==="blue"?"from-blue-400 via-indigo-500 to-blue-600":a==="green"?"from-teal-400 via-cyan-500 to-teal-600":"from-violet-400 via-purple-500 to-violet-600",icon:So,description:"Add your first transaction to compute health",pulse:!1}:m>=80?{score:m,label:"Thriving",color:a==="green"?"from-emerald-400 via-green-500 to-emerald-600":a==="blue"?"from-emerald-400 via-teal-500 to-cyan-500":"from-emerald-400 via-green-500 to-emerald-600",icon:jt,description:"Your business is performing exceptionally well",pulse:!0}:m>=60?{score:m,label:"Stable",color:a==="blue"?"from-blue-400 via-indigo-500 to-blue-600":a==="green"?"from-teal-400 via-cyan-500 to-teal-600":a==="light"?"from-indigo-400 via-purple-500 to-indigo-600":"from-violet-400 via-purple-500 to-violet-600",icon:So,description:"Solid performance with room for growth",pulse:!1}:m>=40?{score:m,label:"Cautious",color:a==="green"?"from-yellow-400 via-amber-500 to-orange-500":"from-amber-400 via-yellow-500 to-orange-500",icon:ul,description:"Some areas need attention",pulse:!0}:{score:m,label:"Critical",color:a==="blue"?"from-red-400 via-rose-500 to-pink-500":"from-red-400 via-red-500 to-rose-500",icon:pp,description:"Immediate action required",pulse:!0},f=b.icon;c.useEffect(()=>{const N=p=>{if(i.current){const v=i.current.getBoundingClientRect(),E=v.left+v.width/2,w=v.top+v.height/2;o({x:(p.clientX-E)/v.width,y:(p.clientY-w)/v.height})}};return r&&document.addEventListener("mousemove",N),()=>{document.removeEventListener("mousemove",N)}},[r]);const x=N=>{const p=Number(N?.current)||0,v=Number(N?.previous)||0;let E=Number(N?.change);Number.isFinite(E)||(v===0?E=0:E=(p-v)/Math.abs(v)*100);const w=N?.trend||(E>=0?"up":"down"),C=Math.abs(E),S=50,Z=w==="up"?Math.min(100,S+C):Math.max(0,S-C);return Number.isFinite(Z)?Math.round(Z):0},g={revenue:x(s.revenue),expenses:100-x(s.expenses),profit:x(s.profit),cashFlow:x(s.cashFlow)};return e.jsxDEV(q,{variant:"medium",glow:!0,className:"p-6 h-full relative",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxDEV(R.div,{className:L("w-10 h-10 rounded-xl flex items-center justify-center shadow-lg","bg-gradient-to-br border border-white/20",b.color),whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400,damping:10},children:e.jsxDEV(f,{className:"w-5 h-5 text-white drop-shadow-lg"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:193,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:184,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-xl font-bold text-primary-contrast mb-1",children:"Business Health"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:196,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Real-time wellness monitoring"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:197,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:195,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:183,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxDEV(R.div,{ref:i,className:"relative w-36 h-36 cursor-pointer",onHoverStart:()=>n(!0),onHoverEnd:()=>n(!1),whileHover:{scale:1.05,rotateX:5,rotateY:5},transition:{type:"spring",stiffness:400,damping:25},children:[e.jsxDEV(R.div,{className:L("absolute inset-0 rounded-full blur-2xl",`bg-gradient-to-br ${b.color}`,b.pulse&&"animate-pulse"),animate:{scale:r?1.3:1.1,opacity:r?.6:.4},transition:{duration:.3}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:216,columnNumber:11},this),e.jsxDEV(R.div,{className:L("relative w-full h-full rounded-full border-4","backdrop-blur-sm shadow-2xl overflow-hidden",`bg-gradient-to-br ${b.color}`,a==="light"?"border-white/30":"border-white/20"),animate:{rotate:r?360:0,boxShadow:r?"0 0 60px rgba(139, 92, 246, 0.6), 0 0 100px rgba(139, 92, 246, 0.3)":"0 0 30px rgba(139, 92, 246, 0.3)"},transition:{rotate:{duration:2,ease:"easeInOut"},boxShadow:{duration:.3}},children:[e.jsxDEV("div",{className:"absolute inset-2 rounded-full bg-white/10 backdrop-blur-sm"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:249,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxDEV(R.div,{className:"text-center text-white",animate:{scale:r?1.15:1},transition:{type:"spring",stiffness:300,damping:20},children:[e.jsxDEV(R.div,{className:"text-5xl font-black tracking-tight leading-none",style:{fontWeight:900},animate:{textShadow:r?"0 0 40px rgba(255,255,255,1), 0 0 80px rgba(255,255,255,0.7), 0 0 120px rgba(255,255,255,0.4)":"0 0 20px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,0.4)"},transition:{duration:.3},children:l?"N/A":Math.round(h.get())},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:258,columnNumber:17},this),e.jsxDEV(R.div,{className:"text-xs font-bold opacity-95 uppercase tracking-widest mt-1",animate:{textShadow:r?"0 0 20px rgba(255,255,255,0.8)":"0 0 10px rgba(255,255,255,0.5)"},children:"SCORE"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:270,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:253,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:252,columnNumber:13},this),Array.from({length:8}).map((N,p)=>e.jsxDEV(R.div,{className:"absolute w-1 h-1 bg-white/40 rounded-full",animate:{x:[Math.cos(p*Math.PI*2/8)*40,Math.cos(p*Math.PI*2/8+Math.PI)*40,Math.cos(p*Math.PI*2/8)*40],y:[Math.sin(p*Math.PI*2/8)*40,Math.sin(p*Math.PI*2/8+Math.PI)*40,Math.sin(p*Math.PI*2/8)*40],opacity:[.1,.4,.1]},transition:{duration:8+p*1,repeat:1/0,ease:"easeInOut"},style:{left:"50%",top:"50%",marginLeft:"-2px",marginTop:"-2px"}},p,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:285,columnNumber:15},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:230,columnNumber:11},this),[1,2,3].map(N=>e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full border border-white/10",style:{width:`${100+N*20}%`,height:`${100+N*20}%`,left:`${-N*10}%`,top:`${-N*10}%`},animate:{rotate:[0,N%2===0?-360:360]},transition:{duration:20+N*5,repeat:1/0,ease:"linear"}},N,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:318,columnNumber:13},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:203,columnNumber:9},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(R.h4,{className:L("text-2xl font-bold mb-2 bg-gradient-to-r bg-clip-text text-transparent",b.score>=80&&(a==="green"?"from-emerald-400 to-green-500":a==="blue"?"from-emerald-400 to-teal-500":"from-emerald-400 to-green-500"),b.score>=60&&b.score<80&&(a==="blue"?"from-blue-400 to-indigo-500":a==="green"?"from-teal-400 to-cyan-500":a==="light"?"from-indigo-400 to-purple-500":"from-violet-400 to-purple-500"),b.score>=40&&b.score<60&&"from-amber-400 to-orange-500",b.score<40&&"from-red-400 to-rose-500"),animate:{scale:r?1.05:1,textShadow:r?"0 0 20px rgba(139, 92, 246, 0.5)":"0 0 0px rgba(139, 92, 246, 0)"},transition:{type:"spring",stiffness:300,damping:20},children:b.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:341,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast max-w-[220px] mx-auto leading-relaxed",children:b.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:371,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:340,columnNumber:9},this),e.jsxDEV("div",{className:"w-full space-y-3",children:Object.entries(g).map(([N,p],v)=>{const E=w=>w>=80?a==="green"?"from-emerald-400 via-green-500 to-emerald-600":a==="blue"?"from-emerald-400 via-teal-500 to-cyan-500":"from-emerald-400 via-green-500 to-emerald-600":w>=60?a==="blue"?"from-blue-400 via-indigo-500 to-blue-600":a==="green"?"from-teal-400 via-cyan-500 to-teal-600":a==="light"?"from-indigo-400 via-purple-500 to-indigo-600":"from-violet-400 via-purple-500 to-violet-600":w>=40?"from-amber-400 via-yellow-500 to-orange-500":"from-red-400 via-red-500 to-rose-500";return e.jsxDEV(R.div,{className:L("flex items-center justify-between p-3 rounded-xl backdrop-blur-sm border transition-all duration-300 cursor-pointer","bg-gradient-to-r from-white/5 to-white/10",a==="light"?"border-white/20 hover:border-white/30":"border-white/10 hover:border-white/20","hover:from-white/10 hover:to-white/15 hover:shadow-lg"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.1+.5,type:"spring",stiffness:100,damping:15},whileHover:{scale:1.03,x:6},whileTap:{scale:.98},children:[e.jsxDEV("span",{className:"text-sm font-bold capitalize text-primary-contrast",children:N==="cashFlow"?"Cash Flow":N},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:416,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:L("w-24 h-3 rounded-full overflow-hidden shadow-inner relative",a==="light"?"bg-neutral-200/50":"bg-neutral-700/50"),children:e.jsxDEV(R.div,{className:L("h-full rounded-full relative shadow-lg",`bg-gradient-to-r ${E(p)}`),initial:{width:0},animate:{width:`${l?0:p}%`},transition:{duration:1.5,delay:v*.2+.8,ease:"easeOut"},children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/30 to-transparent rounded-full"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:433,columnNumber:23},this),e.jsxDEV(R.div,{className:"absolute right-0 top-0 w-1 h-full bg-white/60 rounded-r-full",animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:434,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:424,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:420,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-bold text-primary-contrast w-12 text-right",children:[l?"—":Number.isFinite(p)?Math.round(p):0,"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:441,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:419,columnNumber:17},this)]},N,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:402,columnNumber:15},this)})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:377,columnNumber:9},this),e.jsxDEV(R.button,{whileHover:{scale:1.06,y:-3,boxShadow:"0 20px 40px rgba(139, 92, 246, 0.3), 0 10px 20px rgba(0, 0, 0, 0.2)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},className:L("w-full py-4 px-6 rounded-xl text-sm font-bold transition-all duration-300","text-white shadow-xl border-2 relative overflow-hidden cursor-pointer",`bg-gradient-to-r ${b.color}`,a==="light"?"border-white/30 hover:border-white/50":"border-white/20 hover:border-white/40","hover:shadow-2xl"),children:[e.jsxDEV(R.span,{className:"relative z-10 flex items-center justify-center gap-2",animate:{textShadow:"0 0 20px rgba(255,255,255,0.8)"},children:[e.jsxDEV("span",{className:"text-lg",children:b.score>=80?"🚀":"💡"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:473,columnNumber:13},this),b.score>=80?"Optimize Further":"Improve Health"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(R.div,{className:"absolute inset-0 bg-gradient-to-r from-white/20 via-white/10 to-transparent",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:480,columnNumber:11},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/15 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:493,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:451,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:202,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/BusinessHealthOrb.tsx",lineNumber:177,columnNumber:5},this)}const Mp=(t,s)=>{const i=[];s.revenue.trend==="up"&&s.revenue.change>20&&i.push({id:"revenue-growth",type:"opportunity",title:"Accelerating Revenue Growth",description:`Revenue is up ${s.revenue.change.toFixed(1)}%. Consider scaling marketing efforts to capitalize on this momentum.`,impact:"high",confidence:87,icon:jt,action:"Scale Marketing",priority:1}),s.expenses.change>15&&i.push({id:"expense-warning",type:"warning",title:"Rising Expense Pattern",description:`Expenses increased by ${s.expenses.change.toFixed(1)}%. Review variable costs for optimization opportunities.`,impact:"medium",confidence:92,icon:lp,action:"Review Expenses",priority:2});const r=s.cashFlow.current*(1+s.cashFlow.change/100);i.push({id:"cashflow-prediction",type:"prediction",title:"Next Month Cash Flow",description:`Based on current trends, expect $${r.toLocaleString()} cash flow next month.`,impact:"high",confidence:78,icon:dl,priority:3}),t<70&&i.push({id:"health-recommendation",type:"recommendation",title:"Business Health Improvement",description:"Focus on increasing profit margins and optimizing operational efficiency to boost overall health score.",impact:"high",confidence:85,icon:gl,action:"Optimize Operations",priority:1});const n=s.profit.current/s.revenue.current*100;return n>25&&i.push({id:"profit-opportunity",type:"opportunity",title:"Strong Profit Margins",description:`Excellent ${n.toFixed(1)}% profit margin. Consider reinvesting in growth initiatives.`,impact:"medium",confidence:94,icon:hl,action:"Reinvest in Growth",priority:4}),i.push({id:"seasonal-prediction",type:"prediction",title:"Seasonal Trend Analysis",description:"Historical data suggests 15% revenue increase likely in the next quarter based on seasonal patterns.",impact:"medium",confidence:73,icon:ar,priority:5}),i.sort((o,a)=>o.priority-a.priority).slice(0,4)};function Lp({businessHealth:t,metrics:s}){const[i,r]=c.useState([]),[n,o]=c.useState(null),[a,l]=c.useState(!0);c.useEffect(()=>{l(!0);const u=setTimeout(()=>{r(Mp(t,s)),l(!1)},2e3);return()=>clearTimeout(u)},[t,s]);const m=u=>{switch(u){case"opportunity":return{bg:"from-green-500/20 to-emerald-500/10",border:"border-green-500/30",icon:"text-green-400",glow:"shadow-green-500/20"};case"warning":return{bg:"from-yellow-500/20 to-orange-500/10",border:"border-yellow-500/30",icon:"text-yellow-400",glow:"shadow-yellow-500/20"};case"prediction":return{bg:"from-blue-500/20 to-indigo-500/10",border:"border-blue-500/30",icon:"text-blue-400",glow:"shadow-blue-500/20"};case"recommendation":return{bg:"from-purple-500/20 to-pink-500/10",border:"border-purple-500/30",icon:"text-purple-400",glow:"shadow-purple-500/20"}}},h=u=>{switch(u){case"high":return"🔥";case"medium":return"⚡";case"low":return"💡"}};return e.jsxDEV(q,{variant:"medium",className:"p-6 h-full enhanced-card-hover",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(ar,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:194,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:193,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"AI Insights"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Predictive intelligence for your business"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:198,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:196,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:192,columnNumber:7},this),e.jsxDEV(_e,{children:a&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center py-8",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(R.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-12 h-12 rounded-full border-4 border-primary/20 border-t-primary mx-auto mb-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:214,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast",children:"AI analyzing your financial patterns..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:219,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center justify-center gap-1 mt-2",children:[0,1,2].map(u=>e.jsxDEV(R.div,{className:"w-2 h-2 bg-primary/60 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:u*.2}},u,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:224,columnNumber:19},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:222,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:213,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:207,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:205,columnNumber:7},this),e.jsxDEV(_e,{children:!a&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:i.map((u,b)=>{const f=m(u.type),x=u.icon,g=n===u.id;return e.jsxDEV(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},className:L("p-4 rounded-lg border cursor-pointer transition-all duration-300 group","bg-gradient-to-r backdrop-blur-sm",f.bg,g?[f.border,f.glow,"shadow-lg"]:"border-border/20 hover:border-border/40"),onClick:()=>o(g?null:u.id),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:L("w-8 h-8 rounded-lg bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center flex-shrink-0",g&&"scale-110"),children:e.jsxDEV(x,{className:L("w-4 h-4",f.icon)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:275,columnNumber:21},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("h4",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:u.title},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:284,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs",children:h(u.impact)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:287,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs text-muted-contrast ml-auto",children:[e.jsxDEV("span",{children:[u.confidence,"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:291,columnNumber:27},this),e.jsxDEV("div",{className:"w-1 h-1 bg-current rounded-full"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:292,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:290,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:283,columnNumber:23},this),e.jsxDEV("p",{className:"text-xs text-muted-contrast leading-relaxed",children:u.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:296,columnNumber:23},this),u.action&&e.jsxDEV(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-2 px-3 py-1 text-xs bg-primary/10 text-primary rounded-md hover:bg-primary/20 transition-colors flex items-center gap-1",children:[e.jsxDEV(Gt,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:306,columnNumber:27},this),u.action,e.jsxDEV(hp,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:308,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:301,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:282,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:274,columnNumber:19},this),e.jsxDEV("div",{className:"mt-3 w-full h-1 bg-surface/50 rounded-full overflow-hidden",children:e.jsxDEV(R.div,{className:L("h-full rounded-full",f.icon.replace("text-","bg-")),initial:{width:0},animate:{width:`${u.confidence}%`},transition:{duration:1,delay:b*.1+.5}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:316,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:315,columnNumber:19},this)]},u.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:259,columnNumber:17},this)})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:247,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:245,columnNumber:7},this),e.jsxDEV("div",{className:"mt-6 pt-4 border-t border-border/20",children:e.jsxDEV("div",{className:"flex items-center justify-between text-xs text-muted-contrast",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:334,columnNumber:13},this),e.jsxDEV("span",{children:"AI Engine Active"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:335,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:333,columnNumber:11},this),e.jsxDEV("span",{children:"Last updated: Now"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:337,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:332,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:331,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/PredictiveInsights.tsx",lineNumber:191,columnNumber:5},this)}function on({options:t,value:s,onChange:i,className:r,size:n="sm"}){return e.jsxDEV("div",{className:L("inline-flex items-center gap-1 rounded-xl border transition-all","backdrop-blur-lg","bg-surface/30 border-border/30",r),role:"tablist","aria-label":"Segmented control",children:t.map(o=>{const a=o.value===s;return e.jsxDEV("button",{role:"tab","aria-selected":a,onClick:()=>i(o.value),className:L("relative rounded-lg font-semibold transition-all focus:outline-none focus:ring-focus",n==="sm"?"px-3 py-1.5 text-xs":"px-4 py-2 text-sm",a?"bg-primary/20 text-primary border border-primary/30 shadow-md":"text-muted-contrast hover:text-primary-contrast hover:bg-surface/40"),children:o.label},o.value,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/SegmentedControl.tsx",lineNumber:28,columnNumber:11},this)})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/SegmentedControl.tsx",lineNumber:15,columnNumber:5},this)}function Op({title:t,subtitle:s,className:i}){return e.jsxDEV("div",{className:L("h-full w-full flex items-center justify-center px-4",i),children:e.jsxDEV(q,{variant:"heavy",elevation:3,className:L("relative w-full max-w-md text-center px-6 py-6 sm:px-8 sm:py-8 overflow-hidden"),children:[e.jsxDEV("div",{className:"pointer-events-none absolute -top-10 -right-12 w-40 h-40 rounded-full opacity-25",style:{background:"radial-gradient(circle, rgb(var(--color-primary-500) / 0.25), transparent 60%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("div",{className:"pointer-events-none absolute -bottom-12 -left-16 w-48 h-48 rounded-full opacity-20",style:{background:"radial-gradient(circle, rgb(var(--color-secondary-500) / 0.20), transparent 60%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:21,columnNumber:9},this),e.jsxDEV("div",{className:"relative mx-auto mb-5 w-16 h-16 sm:w-20 sm:h-20",children:[e.jsxDEV("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:25,columnNumber:11},this),e.jsxDEV("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-primary animate-spin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:26,columnNumber:11},this),e.jsxDEV(R.div,{className:"absolute inset-2 rounded-full",style:{background:"radial-gradient(circle at 30% 30%, rgb(var(--color-primary-500) / 0.25), transparent 55%)"},initial:{opacity:.6},animate:{opacity:[.6,.25,.6]},transition:{duration:2.4,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:27,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:24,columnNumber:9},this),e.jsxDEV("div",{className:"text-lg font-semibold text-gradient-primary mb-1",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:37,columnNumber:9},this),s&&e.jsxDEV("div",{className:"text-sm text-muted-contrast mb-4",role:"status","aria-live":"polite",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:41,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1 h-1.5 w-full rounded-full bg-surface overflow-hidden",children:e.jsxDEV(R.div,{className:"h-full w-1/2 bg-gradient-to-r from-primary/30 via-primary/60 to-primary/30",initial:{x:"-100%"},animate:{x:["-100%","100%"]},transition:{duration:1.4,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:47,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/PremiumLoader.tsx",lineNumber:13,columnNumber:5},this)}async function Nl(t){const s=new FormData;s.append("file",t);const{data:i}=await X.post("/api/ocr",s,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});return i}async function xl(t){const{data:s}=await X.post("/api/posting/preview",t);return s}async function El(t){const s={...t,dueDays:t.dueDays!=null?typeof t.dueDays=="string"?parseInt(t.dueDays,10):t.dueDays:void 0},{data:i}=await X.post("/api/expenses",s);return i}async function Fp(t,s){const i=new FormData;i.append("file",s);const{data:r}=await X.post(`/api/expenses/${encodeURIComponent(t)}/receipt`,i,{headers:{"Content-Type":"multipart/form-data"}});return r}async function Up(){const{data:t}=await X.get("/api/expenses");return Array.isArray(t)?t:[]}async function $p(t,s){const i=new URLSearchParams;t&&i.set("vendor",t),s&&i.set("vendorInvoiceNo",s);const{data:r}=await X.get(`/api/expenses/check-duplicate?${i.toString()}`);return r}async function qp(t){const{data:s}=await X.post(`/api/expenses/${encodeURIComponent(t)}/mark-paid`,{});return s}async function Bp(t,s){const i={amount:typeof s.amount=="string"?parseFloat(s.amount):s.amount,date:s.date},{data:r}=await X.post(`/api/expenses/${encodeURIComponent(t)}/record-payment`,i);return r}async function zp(t){const{data:s}=await X.post(`/api/expenses/${encodeURIComponent(t)}/mark-unpaid`,{});return s}const es={uploadOcr:Nl,previewExpense:xl,postExpense:El,attachReceipt:Fp,listExpenses:Up,checkDuplicate:$p,markExpensePaid:qp,markExpenseUnpaid:zp,recordExpensePayment:Bp,listExpensePayments:Hp,voidPayment:Wp};async function Hp(t){const{data:s}=await X.get(`/api/expenses/${encodeURIComponent(t)}/payments`);return s?.payments||[]}async function Wp(t){const{data:s}=await X.post(`/api/payments/${encodeURIComponent(t)}/void`,{});return s}async function Gp(t){const s={customer:t.customer,amount:typeof t.amount=="string"?parseFloat(t.amount):t.amount,date:t.date,description:t.description,revenueAccount:t.revenueAccount||"4020",cashAccount:t.cashAccount||"1010",paymentMethod:t.paymentMethod||"CASH",invoiceNumber:t.invoiceNumber,reference:t.reference},{data:i}=await X.post("/api/transactions/revenue",s);return i}async function vl(t){const s={customerName:t.customerName,amount:typeof t.amount=="string"?parseFloat(t.amount):t.amount,date:t.date,description:t.description||`Invoice for ${t.customerName}`,paymentStatus:t.paymentStatus||"paid",invoiceNumber:t.invoiceNumber,dueDate:t.dueDate,dueDays:t.dueDays!=null?typeof t.dueDays=="string"?parseInt(t.dueDays,10):t.dueDays:void 0,subtotal:t.subtotal!=null?typeof t.subtotal=="string"?parseFloat(t.subtotal):t.subtotal:void 0,amountPaid:t.amountPaid!=null?typeof t.amountPaid=="string"?parseFloat(t.amountPaid):t.amountPaid:void 0,balanceDue:t.balanceDue!=null?typeof t.balanceDue=="string"?parseFloat(t.balanceDue):t.balanceDue:void 0,taxSettings:t.taxSettings?{enabled:!!t.taxSettings.enabled,type:t.taxSettings.type,rate:t.taxSettings.type==="percentage"?Number(t.taxSettings.rate||0):void 0,amount:t.taxSettings.type==="amount"?Number(t.taxSettings.amount||0):void 0}:void 0,discount:t.discount&&t.discount.enabled?{enabled:!0,amount:Number(t.discount.amount||0)}:void 0,lineItems:Array.isArray(t.lineItems)?t.lineItems.map(r=>({description:r.description,amount:typeof r.amount=="string"?parseFloat(r.amount):r.amount,quantity:r.quantity!=null?typeof r.quantity=="string"?parseFloat(r.quantity):r.quantity:void 0,rate:r.rate!=null?typeof r.rate=="string"?parseFloat(r.rate):r.rate:void 0,category:r.category,accountCode:r.accountCode})):void 0},{data:i}=await X.post("/api/invoices",s);return i}async function Kp(t){const s=typeof t.amount=="string"?parseFloat(t.amount):t.amount,i=t.amountPaid!=null?typeof t.amountPaid=="string"?parseFloat(t.amountPaid):t.amountPaid:s,r={customerName:(t.customerName||t.customer||"").trim(),amount:s,amountPaid:i,balanceDue:t.balanceDue!=null?typeof t.balanceDue=="string"?parseFloat(t.balanceDue):t.balanceDue:Math.max(0,s-i),date:t.date,description:t.description||`Revenue from ${(t.customerName||t.customer||"Customer").trim()}`,paymentStatus:t.paymentStatus||"paid",categoryKey:t.categoryKey||"PROFESSIONAL_SERVICES",subtotal:t.subtotal!=null?typeof t.subtotal=="string"?parseFloat(t.subtotal):t.subtotal:void 0,taxSettings:t.taxSettings?{enabled:!!t.taxSettings.enabled,type:t.taxSettings.type||"amount",rate:t.taxSettings.type==="percentage"?Number(t.taxSettings.rate||0):void 0,amount:t.taxSettings.type==="amount"?Number(t.taxSettings.amount||0):void 0}:void 0,discount:t.discount&&t.discount.enabled?{enabled:!0,amount:Number(t.discount.amount||0)}:void 0,lineItems:Array.isArray(t.lineItems)?t.lineItems.map(o=>({description:o.description,amount:typeof o.amount=="string"?parseFloat(o.amount):o.amount,quantity:o.quantity!=null?typeof o.quantity=="string"?parseFloat(o.quantity):o.quantity:void 0,rate:o.rate!=null?typeof o.rate=="string"?parseFloat(o.rate):o.rate:void 0,accountCode:o.accountCode,category:o.category})):void 0,dueDate:t.dueDate,recognitionDate:t.recognitionDate},{data:n}=await X.post("/api/posting/preview",r);return n}async function Dl(){const{data:t}=await X.get("/api/invoices");return Array.isArray(t)?t:[]}async function Jp(){const{data:t}=await X.get("/api/invoices/suggest-number");return t?.suggestion}async function Yp(){const{data:t}=await X.get("/api/invoices/next-seq");return t?.suggestion}async function Qp(t){const{data:s}=await X.post(`/api/invoices/${t}/mark-paid`,{});return s}async function Xp(t){const{data:s}=await X.post(`/api/invoices/${t}/mark-unpaid`,{});return s}async function eb(t,s){const i={amount:typeof s.amount=="string"?parseFloat(s.amount):s.amount,date:s.date},{data:r}=await X.post(`/api/invoices/${t}/record-payment`,i);return r}async function sb(t){const{data:s}=await X.get(`/api/invoices/${t}/payments`);return s?.payments||[]}async function tb(t){const{data:s}=await X.post(`/api/payments/${t}/void`,{});return s}const Vs={postRevenue:Gp,postInvoice:vl,previewRevenue:Kp,postCapital:ib,listInvoices:Dl,markInvoicePaid:Qp,markInvoiceUnpaid:Xp,recordInvoicePayment:eb,listInvoicePayments:sb,voidPayment:tb,suggestInvoiceNumber:Jp,nextSequentialInvoiceNumber:Yp};async function ib(t){const s={contributor:t.contributor,amount:typeof t.amount=="string"?parseFloat(t.amount):t.amount,date:t.date,description:t.description,reference:t.reference},{data:i}=await X.post("/api/transactions/capital",s);return i}const Cs={async getPnl(t,s){const i={};t&&(i.asOf=t),s?.period&&(i.period=s.period),s?.compare&&(i.compare=!0);const{data:r}=await X.get("/api/reports/pnl",{params:i});return r},async getBalanceSheet(t){const{data:s}=await X.get("/api/reports/balance-sheet",{params:t?{asOf:t}:{}});return s},async getTrialBalance(t){const{data:s}=await X.get("/api/reports/trial-balance",{params:t?{asOf:t}:{}});return s},async getChartOfAccounts(){const{data:t}=await X.get("/api/reports/chart-of-accounts");return t},async getAccountTransactions(t,s=100){const{data:i}=await X.get(`/api/accounts/${encodeURIComponent(t)}/transactions`,{params:{limit:s}});return i},async updateAccount(t,s){const{data:i}=await X.put(`/api/accounts/${encodeURIComponent(t)}`,s);return i},async deleteAccount(t){const{data:s}=await X.delete(`/api/accounts/${encodeURIComponent(t)}`);return s}};async function rb(t){const{data:s}=await X.get("/api/customers",{params:{query:t}});return s}async function yl(t){const{data:s}=await X.get("/api/customers",{params:t?{query:t}:{}});return Array.isArray(s?.customers)?s.customers:[]}async function wl(t){const{data:s}=await X.post("/api/customers",t);return s?.customer}async function Cl(t,s){const{data:i}=await X.put(`/api/customers/${t}`,s);return i?.customer}const lr={searchCustomers:rb,listCustomers:yl,createCustomer:wl,updateCustomer:Cl};class li{static async getDashboardData(){const{data:s}=await X.get("/api/dashboard");return s}static async getAiUsage(){const{data:s}=await X.get("/api/ai/usage");return s}static async getHealthCheck(){const{data:s}=await X.get("/api/health");return s}static async getPnlData(s,i){return Cs.getPnl(s,i)}static async getBalanceSheetData(s){return Cs.getBalanceSheet(s)}static async getTrialBalanceData(s){return Cs.getTrialBalance(s)}static async getChartOfAccountsData(){return Cs.getChartOfAccounts()}static async getAccountTransactions(s,i=100){return Cs.getAccountTransactions(s,i)}static async addExpenseTransaction(s){const i={date:s.date,amount:s.amount.toFixed(2),paymentStatus:s.paymentStatus==="invoice"?"unpaid":s.paymentStatus==="partial"?"partial":s.paymentStatus==="overpaid"?"overpaid":"paid",categoryKey:s.category.toUpperCase(),vendorName:s.vendor,reference:`AI-EXP-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,notes:s.description,receiptUrl:s.receiptUrl,amountPaid:typeof s.amountPaid=="number"?s.amountPaid.toFixed(2):void 0,balanceDue:typeof s.balanceDue=="number"?s.balanceDue.toFixed(2):void 0,overdue:s.overdue??void 0,recurring:s.recurring??void 0,invoiceNumber:s.invoiceNumber??void 0,dueDate:s.dueDate??void 0};return El(i)}static async addInvoiceTransaction(s){const i={customerName:s.customerName,amount:s.amount,date:s.date,description:s.description,invoiceNumber:s.invoiceNumber,paymentStatus:s.paymentStatus||"paid",amountPaid:s.amountPaid??s.amount,balanceDue:s.balanceDue??0,categoryKey:(s.category||"PROFESSIONAL_SERVICES").toUpperCase(),lineItems:s.lineItems||[],taxSettings:s.taxSettings||{enabled:!1},discount:s.discount||{enabled:!1}};return vl(i)}static async getCustomers(s){return yl(s)}static async addCustomer(s){return wl(s)}static async updateCustomer(s,i){return Cl(s,i)}static async ensureCoreAccounts(){return Xa()}static async seedInitialCapital(s=1e4,i){return el(s,i)}static async seedSampleRevenue(s=5e3,i){return sl(s,i)}}function nb({businessHealth:t}){const[s,i]=c.useState("1M"),[r,n]=c.useState(!0),{currentTheme:o}=Rs(),[a,l]=c.useState([]);c.useEffect(()=>{const N=setTimeout(()=>n(!1),1e3);return()=>clearTimeout(N)},[]);const m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.23,1,.32,1]}}},[u,b]=c.useState(()=>({revenue:{current:125840,previous:98760,trend:"up",change:27.4},expenses:{current:89340,previous:76890,trend:"up",change:16.2},profit:{current:36500,previous:21870,trend:"up",change:66.9},cashFlow:{current:45200,previous:32100,trend:"up",change:40.8},series:void 0})),f=N=>{switch(N){case"1M":return 6;case"3M":return 6;case"6M":return 12;default:return 12}},x=Et({queryKey:["dashboard",s],queryFn:async()=>await li.getDashboardData(),select:N=>{if(!N?.metrics)return null;const p=N.metrics;return{revenue:{current:Number(p.totalRevenue||0),previous:Number(p.totalRevenue||0),trend:"up",change:0},expenses:{current:Number(p.totalExpenses||0),previous:Number(p.totalExpenses||0),trend:"up",change:0},profit:{current:Number(p.netProfit||0),previous:Number(p.netProfit||0),trend:"up",change:0},cashFlow:{current:Number((p.netProfit??p.totalRevenue-p.totalExpenses)||0),previous:Number((p.netProfit??p.totalRevenue-p.totalExpenses)||0),trend:"up",change:0},series:void 0,aiInsights:Array.isArray(N.aiInsights)?N.aiInsights:[]}},placeholderData:N=>N,staleTime:15e3,refetchInterval:3e4}),g=Et({queryKey:["metrics-time-series",s],queryFn:async()=>{const N=f(s),{data:p}=await X.get("/api/metrics/time-series",{params:{months:N,metrics:"revenue,expenses,profit"}});return p},placeholderData:N=>N,staleTime:15e3,refetchInterval:3e4});return c.useEffect(()=>{let N=!1;return(async()=>{try{const[p,v]=await Promise.all([es.listExpenses().catch(()=>[]),Dl().catch(()=>[])]);if(N)return;const E=(Array.isArray(p)?p:[]).slice(0,50).map(S=>({id:S.id,description:S.description||S.transaction?.description||`Expense: ${S.vendor}`,amount:-Math.abs(Number(S.amount||0)),type:"expense",category:S.categoryKey,date:S.date||S.transaction?.date})),w=(Array.isArray(v)?v:[]).slice(0,50).map(S=>({id:S.id,description:S.description||S.transaction?.description||`Invoice: ${S.customer}`,amount:Math.abs(Number(S.amount||S.transaction?.amount||0)),type:"revenue",category:"Invoice",date:S.date||S.transaction?.date})),C=[...E,...w].filter(S=>Number.isFinite(S.amount)).sort((S,Z)=>new Date(Z.date||0).getTime()-new Date(S.date||0).getTime()).slice(0,10);l(C)}catch{}})(),()=>{N=!0}},[]),c.useEffect(()=>{const N=x.data;if(!N)return;const p=g.data,v=p?{labels:Array.isArray(p.labels)?p.labels.slice():void 0,revenue:Array.isArray(p.revenue)?p.revenue.slice():void 0,expenses:Array.isArray(p.expenses)?p.expenses.slice():void 0,profit:Array.isArray(p.profit)?p.profit.slice():void 0}:void 0;b({revenue:N.revenue,expenses:N.expenses,profit:N.profit,cashFlow:N.cashFlow,series:v})},[x.data,g.data]),c.useEffect(()=>{const N=async()=>{try{ws.invalidateQueries({queryKey:["dashboard"]})}catch{}};return window.addEventListener("data:refresh",N),()=>window.removeEventListener("data:refresh",N)},[s]),r?e.jsxDEV(Op,{title:"Initializing Financial Universe",subtitle:"Loading your financial command center..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:195,columnNumber:12},this):e.jsxDEV(R.div,{variants:m,initial:"hidden",animate:"visible",className:"h-full space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxDEV(R.div,{variants:h,children:[e.jsxDEV("div",{className:"flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between 2xl:gap-8",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h1",{className:L("text-2xl sm:text-3xl font-bold mb-2 truncate",o==="light"?"text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent":o==="blue"?"text-white bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent":o==="green"?"text-white bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent":"text-white bg-gradient-to-r from-violet-400 to-purple-400 bg-clip-text text-transparent"),children:"Financial Command Center"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:210,columnNumber:13},this),e.jsxDEV("p",{className:"text-secondary-contrast text-sm sm:text-base",children:"Real-time business intelligence at your fingertips"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:223,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:209,columnNumber:11},this),e.jsxDEV("div",{className:"hidden 2xl:flex flex-shrink-0",children:e.jsxDEV(on,{options:[{value:"1M",label:"1M"},{value:"3M",label:"3M"},{value:"6M",label:"6M"},{value:"1Y",label:"1Y"}],value:s,onChange:N=>i(N)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:230,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:229,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:208,columnNumber:9},this),e.jsxDEV("div",{className:"2xl:hidden flex justify-end mt-3",children:e.jsxDEV(on,{options:[{value:"1M",label:"1M"},{value:"3M",label:"3M"},{value:"6M",label:"6M"},{value:"1Y",label:"1Y"}],value:s,onChange:N=>i(N)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:245,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:206,columnNumber:7},this),e.jsxDEV(R.div,{variants:h,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxDEV(Ci,{title:"Revenue",value:u.revenue.current,previousValue:u.revenue.previous,trend:u.revenue.trend,change:u.revenue.change??0,icon:yn,color:"revenue",sparkline:u.series?.revenue},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:263,columnNumber:9},this),e.jsxDEV(Ci,{title:"Expenses",value:u.expenses.current,previousValue:u.expenses.previous,trend:u.expenses.trend,change:u.expenses.change??0,icon:Vp,color:"expense",sparkline:u.series?.expenses},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:274,columnNumber:9},this),e.jsxDEV(Ci,{title:"Net Profit",value:u.profit.current,previousValue:u.profit.previous,trend:u.profit.trend,change:u.profit.change??0,icon:jt,color:"profit",sparkline:u.series?.profit},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:285,columnNumber:9},this),e.jsxDEV(Ci,{title:"Cash Flow",value:u.cashFlow.current,previousValue:u.cashFlow.previous,trend:u.cashFlow.trend,change:u.cashFlow.change??0,icon:nr,color:"primary",sparkline:(()=>{const N=u.series;if(!(!N?.revenue||!N?.expenses))return N.revenue.map((p,v)=>p-(N.expenses[v]||0))})()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:296,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:259,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxDEV(R.div,{variants:h,className:"lg:col-span-2",children:e.jsxDEV(Tp,{data:u,timeRange:s,activeMetric:"revenue"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:315,columnNumber:9},this),e.jsxDEV(R.div,{variants:h,children:e.jsxDEV(Pp,{healthScore:t,metrics:u},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:325,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:324,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:313,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxDEV(R.div,{variants:h,children:[e.jsxDEV(Lp,{businessHealth:t,metrics:u},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:336,columnNumber:11},this),x.data?.aiInsights&&x.data.aiInsights.length>0&&e.jsxDEV("div",{className:"mt-4 text-sm",children:[e.jsxDEV("div",{className:"font-semibold mb-2",children:"AI Insights (Server)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:342,columnNumber:15},this),e.jsxDEV("ul",{className:"list-disc ml-5 space-y-1",children:x.data.aiInsights.map(N=>e.jsxDEV("li",{className:"text-foreground/80",children:N.message??String(N)},N.id??N.message,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:345,columnNumber:19},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:343,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:341,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:335,columnNumber:9},this),e.jsxDEV(R.div,{variants:h,children:e.jsxDEV(q,{variant:"medium",className:"p-6 h-full",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(or,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:357,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:356,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Recent Activity"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:360,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Latest financial movements"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:361,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:359,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:355,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-3",children:e.jsxDEV(_e,{children:a.map((N,p)=>e.jsxDEV(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:p*.1},className:"flex items-center justify-between p-3 rounded-lg hover:bg-surface/50 transition-all group cursor-pointer",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:L("w-2 h-2 rounded-full",N.type==="revenue"?"bg-financial-revenue":"bg-financial-expense")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:377,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium group-hover:text-primary transition-colors",children:N.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:382,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:N.category},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:385,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:381,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:376,columnNumber:21},this),e.jsxDEV("div",{className:L("text-sm font-semibold",N.amount>0?"text-financial-revenue":"text-financial-expense"),children:[N.amount>0?"+":"","$",Math.abs(N.amount).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:390,columnNumber:21},this)]},N.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:368,columnNumber:19},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:366,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:365,columnNumber:13},this),e.jsxDEV(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-4 p-2 text-sm text-primary hover:bg-primary/10 rounded-lg transition-all",children:"View All Transactions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:401,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:354,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:353,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:333,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/dashboard/Dashboard.tsx",lineNumber:199,columnNumber:5},this)}const Mt=[{id:"revenue",position:[0,3,0],size:2.5,color:"#10b981",label:"Revenue",value:125840,type:"income"},{id:"expenses",position:[-4,0,3],size:2.2,color:"#ef4444",label:"Expenses",value:89340,type:"expense"},{id:"profit",position:[4,0,-3],size:1.8,color:"#f59e0b",label:"Profit",value:36500,type:"profit"},{id:"cashflow",position:[0,-3,0],size:1.6,color:"#3b82f6",label:"Cash Flow",value:45200,type:"flow"},{id:"assets",position:[-3,1.5,-1.5],size:2,color:"#8b5cf6",label:"Assets",value:234500,type:"asset"},{id:"liabilities",position:[3,-1.5,1.5],size:1.4,color:"#ec4899",label:"Liabilities",value:45600,type:"liability"},{id:"equity",position:[5,2,-1.5],size:1.5,color:"#22d3ee",label:"Equity",value:188900,type:"equity"}],ji=[{from:"revenue",to:"profit",strength:.8,type:"flow"},{from:"expenses",to:"profit",strength:-.5,type:"flow"},{from:"profit",to:"cashflow",strength:.9,type:"flow"},{from:"cashflow",to:"assets",strength:.5,type:"flow"},{from:"liabilities",to:"assets",type:"equation"},{from:"equity",to:"assets",type:"equation"}];function ob(){const s=document.createElement("canvas");s.width=128,s.height=128;const i=s.getContext("2d"),r=128/2,n=i.createRadialGradient(r,r,0,r,r,r);n.addColorStop(0,"rgba(255,255,255,0.35)"),n.addColorStop(.6,"rgba(255,255,255,0.1)"),n.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=n,i.beginPath(),i.arc(r,r,r,0,Math.PI*2),i.fill();const o=new $o(s);return o.needsUpdate=!0,o}const jl=ob();function ab({position:t,size:s,color:i,label:r,value:n,type:o,isSelected:a,onSelect:l,nodeId:m,onHoverChange:h,dimmed:u,editLayout:b=!1,onDragEnd:f,tooltip:x,highContrast:g}){const N=c.useRef(null),p=c.useRef(null),v=c.useRef(null),[E,w]=c.useState(!1),C=c.useRef(null);ln(Z=>{N.current&&(N.current.scale.setScalar(s+Math.sin(Z.clock.elapsedTime*2)*.1+(E?.2:0)),N.current.rotation.y+=.01,N.current.rotation.x+=.005),C.current&&(C.current.uniforms.uTime.value=Z.clock.elapsedTime)});const S=e.jsxDEV("group",{ref:p,position:t,children:[e.jsxDEV(Ri,{ref:N,args:[1,64,64],onClick:l,onPointerOver:()=>{w(!0),h?.(m,!0)},onPointerOut:()=>{w(!1),h?.(m,!1)},children:e.jsxDEV("meshPhysicalMaterial",{color:i,transparent:!0,opacity:u?.6:.85,roughness:.2,metalness:.05,clearcoat:.7,clearcoatRoughness:.25,transmission:.35,ior:1.25,thickness:.6,emissive:i,emissiveIntensity:u?.08:a?.35:E?.25:.15},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:132,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:125,columnNumber:7},this),e.jsxDEV(Ri,{args:[1.3,32,32],children:e.jsxDEV("meshBasicMaterial",{color:i,transparent:!0,opacity:a?.25:.15,side:Zr},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:150,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:149,columnNumber:7},this),e.jsxDEV(Ri,{args:[1.6,16,16],children:e.jsxDEV("meshBasicMaterial",{color:i,transparent:!0,opacity:.05,side:Zr},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:160,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:159,columnNumber:7},this),e.jsxDEV("sprite",{ref:v,scale:[s*1.8,s*1.8,1],children:e.jsxDEV("spriteMaterial",{map:jl,opacity:u?.08:a?.24:E?.2:.14,depthWrite:!1,depthTest:!1,transparent:!0,blending:Ti},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:171,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:169,columnNumber:7},this),e.jsxDEV("mesh",{scale:[1.01,1.01,1.01],children:[e.jsxDEV("sphereGeometry",{args:[1,128,128]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:176,columnNumber:9},this),e.jsxDEV("shaderMaterial",{ref:C,transparent:!0,depthWrite:!1,blending:Ti,uniforms:{uTime:{value:0},uColor:{value:new Fl(i)}},vertexShader:`
            varying vec3 vNormal;
            varying vec3 vPos;
            varying vec3 vView;
            void main(){
              vNormal = normalize(normalMatrix * normal);
              vPos = position;
              vec4 mv = modelViewMatrix * vec4(position,1.0);
              vView = -mv.xyz;
              gl_Position = projectionMatrix * mv;
            }
          `,fragmentShader:`
            varying vec3 vNormal;
            varying vec3 vPos;
            uniform float uTime;
            uniform vec3 uColor;
            varying vec3 vView;
            
            float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7))) * 43758.5453123); }
            float noise(vec2 p){
              vec2 i=floor(p), f=fract(p);
              float a=hash(i), b=hash(i+vec2(1.,0.)), c=hash(i+vec2(0.,1.)), d=hash(i+vec2(1.,1.));
              vec2 u=f*f*(3.-2.*f);
              return mix(a,b,u.x)+ (c-a)*u.y*(1.-u.x) + (d-b)*u.x*u.y;
            }
            
            void main(){
              // Spherical UV from normal
              vec3 n = normalize(vNormal);
              float u = atan(n.z, n.x) / (2.0*3.14159265) + 0.5;
              float v = asin(n.y) / 3.14159265 + 0.5;

              // Curving neon grooves using layered noise + sin stripes
              float stripes = smoothstep(0.01, 0.0, abs(sin((u*6.0 + v*4.0) * 3.14159 + uTime*0.3))*0.08);
              float flow = noise(vec2(u*5.0 + uTime*0.05, v*5.0)) * 0.6;
              float pattern = clamp(stripes + flow*0.6, 0.0, 1.0);
              
              vec3 neon = mix(vec3(0.1,0.3,0.6), vec3(1.0,0.3,0.9), 0.5);
              vec3 col = mix(uColor, neon, 0.6) * pattern;
              float alpha = pattern * 0.25;

              // Fresnel rim light
              vec3 V = normalize(vView);
              float rim = pow(1.0 - max(dot(n, V), 0.0), 2.0);
              col += vec3(0.4, 0.7, 1.0) * rim * 0.25;
              gl_FragColor = vec4(col, alpha);
            }
          `},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:178,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:175,columnNumber:7},this),(()=>{const Z=Math.round(12+s*5),D=Math.round(10+s*4);return e.jsxDEV(Ul,{center:!0,sprite:!0,zIndexRange:[100,0],distanceFactor:8,pointerEvents:"none",style:{textAlign:"center",whiteSpace:"nowrap",userSelect:"none"},children:[e.jsxDEV("div",{style:{transform:"translateY(-2px)",color:"white",fontWeight:g?900:700,fontSize:`${Z}px`,WebkitTextStroke:g?"0.75px rgba(0,0,0,0.85)":void 0,textShadow:g?"0 0 0 transparent":"0 1px 2px rgba(0,0,0,0.8), 0 0 16px rgba(0,0,0,0.5)"},children:r},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:252,columnNumber:13},this),e.jsxDEV("div",{style:{color:"#dbeafe",fontWeight:g?800:600,fontSize:`${D}px`,marginTop:"2px",WebkitTextStroke:g?"0.6px rgba(0,0,0,0.85)":void 0,textShadow:g?"0 0 0 transparent":"0 1px 2px rgba(0,0,0,0.8), 0 0 16px rgba(0,0,0,0.5)"},children:`$${n.toLocaleString()}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:260,columnNumber:13},this),E&&x&&e.jsxDEV("div",{style:{marginTop:"2px",padding:"2px 6px",borderRadius:"6px",background:"rgba(0,0,0,0.35)",color:"white",fontSize:"11px",display:"inline-block",backdropFilter:"blur(2px)"},children:[" ",x.percent.toFixed(1),"% • links: ",x.degree," "]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:244,columnNumber:11},this)})(),Array.from({length:4}).map((Z,D)=>e.jsxDEV(lb,{radius:2+D*.4,speed:.3+D*.15,color:i,delay:D*1},D,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:286,columnNumber:9},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:123,columnNumber:5},this);return b?e.jsxDEV($l,{mode:"translate",showX:!1,showZ:!1,onMouseUp:()=>p.current&&f?.(m,p.current.position),children:S},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:300,columnNumber:7},this):S}function lb({radius:t,speed:s,color:i,delay:r}){const n=c.useRef(null);return ln(o=>{if(n.current){const a=o.clock.elapsedTime*s+r;n.current.position.x=Math.cos(a)*t,n.current.position.z=Math.sin(a)*t,n.current.position.y=Math.sin(a*2)*.2}}),e.jsxDEV(Ri,{ref:n,args:[.08,12,12],children:e.jsxDEV("meshStandardMaterial",{color:i,transparent:!0,opacity:.8,roughness:0,metalness:.5,emissive:i,emissiveIntensity:.3},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:333,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:332,columnNumber:5},this)}function cb({from:t,to:s,strength:i,type:r="flow",highlight:n=!1,highContrast:o=!1}){const a=c.useRef(null),l=[new rt(...t),new rt(...s)],m=new An(l),h=o?.05:.035,u=r==="equation"?n?h*1.6:h:(Math.abs(i||.5)*.04+.02)*(o?1.2:1),b=new In(m,40,u,12,!1);if(r==="equation"){const f=[];for(let N=0;N<12;N++){if(N%2===1)continue;const p=N/12,v=p+1/12*.55,E=[],w=5;for(let Z=0;Z<=w;Z++){const D=ql.lerp(p,v,Z/w);E.push(m.getPoint(D))}const C=new An(E),S=new In(C,10,u,12,!1);f.push(e.jsxDEV("mesh",{geometry:S,children:e.jsxDEV("meshStandardMaterial",{color:"#a3b2c7",transparent:!0,opacity:n?.65:.5,roughness:.6,metalness:.1,emissive:"#94a3b8",emissiveIntensity:n?.14:.08},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:392,columnNumber:11},this)},`eq-${N}`,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:391,columnNumber:9},this))}return e.jsxDEV("group",{children:f},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:404,columnNumber:12},this)}return e.jsxDEV("mesh",{ref:a,geometry:b,children:e.jsxDEV("meshPhysicalMaterial",{color:(i||0)>0?"#34d399":"#f87171",transparent:!0,opacity:.6,roughness:.1,metalness:.2,clearcoat:.6,clearcoatRoughness:.3,emissive:(i||0)>0?"#10b981":"#ef4444",emissiveIntensity:.15},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:408,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:407,columnNumber:5},this)}function ub({from:t,to:s,positive:i=!0}){const r=new rt(...t),n=new rt(...s),o=new rt().lerpVectors(r,n,.9),a=i?"#10b981":"#ef4444";return e.jsxDEV("sprite",{position:o,scale:[.5,.5,1],children:e.jsxDEV("spriteMaterial",{map:jl,color:a,opacity:.8,depthWrite:!1,depthTest:!1,transparent:!0,blending:Ti},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:432,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:430,columnNumber:5},this)}function mb({target:t,resetSignal:s}){const{camera:i,gl:r}=qo(),n=c.useRef(null),o=[11,7,11],a=c.useRef(new rt(...t)),l=c.useRef(!1),m=c.useRef(null),h=(u=650)=>{let b=0;const f=i.position.clone(),x=new rt(...o),g=n.current?n.current.target.clone():i.getWorldDirection(new rt).multiplyScalar(-1),N=a.current.clone(),p=performance.now(),v=()=>{const E=Math.min(1,(performance.now()-p)/u);i.position.lerpVectors(f,x,E),n.current?(n.current.target.lerpVectors(g,N,E),n.current.update()):i.lookAt(N),E<1&&(b=requestAnimationFrame(v))};return b=requestAnimationFrame(v),()=>cancelAnimationFrame(b)};return c.useEffect(()=>{l.current||(l.current=!0,i.position.set(...o),i.lookAt(a.current),n.current&&n.current.update())},[i]),c.useEffect(()=>h(),[s]),c.useEffect(()=>{const u=()=>{m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>h(900),12e3)},b=["pointerdown","wheel","keydown","pointermove"];return b.forEach(f=>window.addEventListener(f,u,{passive:!0})),u(),()=>{m.current&&window.clearTimeout(m.current),b.forEach(f=>window.removeEventListener(f,u))}},[r]),e.jsxDEV(Ol,{ref:n,enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:6,maxDistance:30,enableDamping:!0,dampingFactor:.08,rotateSpeed:.6,zoomSpeed:.8},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:499,columnNumber:5},this)}function Ao(){const{scene:t}=qo(),s=c.useRef(null),i=c.useRef(null),r=c.useRef(null),n=c.useRef(60);return c.useEffect(()=>{const o=new Il(4210752,.6);t.add(o);const a=new _l(16777215,1.2);a.position.set(20,20,20),a.castShadow=!0,t.add(a);const l=new Ni(3900150,2,150);l.position.set(15,15,15),t.add(l);const m=new Ni(1096065,1.8,150);m.position.set(-15,-15,-15),t.add(m);const h=new Ni(9133302,1.5,100);h.position.set(0,20,0),t.add(h);const u=new Ni(16096779,1.2,100);u.position.set(0,-20,0),t.add(u);const b=new Tl,f=420,x=new Float32Array(f*3);for(let v=0;v<f*3;v++)x[v]=(Math.random()-.5)*160;b.setAttribute("position",new Pl(x,3)),r.current=b;const g=()=>{const E=document.createElement("canvas");E.width=64,E.height=64;const w=E.getContext("2d"),C=64/2,S=w.createRadialGradient(C,C,0,C,C,C);S.addColorStop(0,"rgba(255,255,255,1)"),S.addColorStop(.5,"rgba(255,255,255,0.6)"),S.addColorStop(1,"rgba(255,255,255,0)"),w.fillStyle=S,w.beginPath(),w.arc(C,C,C,0,Math.PI*2),w.fill();const Z=new $o(E);return Z.needsUpdate=!0,Z},N=new Ml({color:16777215,size:1.6,map:g(),transparent:!0,alphaTest:.01,blending:Ti,depthWrite:!1,sizeAttenuation:!0});i.current=N;const p=new Ll(b,N);return s.current=p,t.add(p),()=>{t.remove(o),t.remove(a),t.remove(l),t.remove(m),t.remove(h),t.remove(u),t.remove(p)}},[t]),ln((o,a)=>{if(s.current&&i.current){s.current.rotation.y+=a*.005;const l=o.clock.elapsedTime;i.current.opacity=.55+.08*Math.sin(l*.5)}if(r.current){const l=1/a;n.current=n.current*.9+l*.1;const m=r.current,h=m.getAttribute("position").count;let u=h;n.current<45&&(u=Math.floor(h*.7)),n.current<35&&(u=Math.floor(h*.5)),n.current<28&&(u=Math.floor(h*.35)),m.setDrawRange(0,u)}}),null}function Io(){const t=c.useRef(null);return e.jsxDEV("mesh",{scale:[160,160,160],children:[e.jsxDEV("sphereGeometry",{args:[1,64,64]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:636,columnNumber:7},this),e.jsxDEV("shaderMaterial",{ref:t,side:Zr,transparent:!0,depthWrite:!1,vertexShader:`
          varying vec3 vPos;
          void main(){
            vPos = position;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
          }
        `,fragmentShader:`
          varying vec3 vPos;
          void main(){
            float d = length(vPos)/160.0; // 0..1
            float glow = smoothstep(1.0, 0.2, d);
            vec3 col = mix(vec3(0.0,0.5,0.8), vec3(0.02,0.1,0.2), d);
            gl_FragColor = vec4(col, glow*0.18);
          }
        `},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:638,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:635,columnNumber:5},this)}function db(){const[t,s]=c.useState(null),[i,r]=c.useState(!0),[n,o]=c.useState(!0),[a,l]=c.useState(0),[m,h]=c.useState(null),[u,b]=c.useState(()=>{const k=localStorage.getItem("universe_showFlow");return k?k==="1":!0}),[f,x]=c.useState(()=>{const k=localStorage.getItem("universe_showEquation");return k?k==="1":!0}),[g,N]=c.useState(()=>localStorage.getItem("universe_editLayout")==="1"),[p,v]=c.useState(()=>{try{const k=localStorage.getItem("universe_nodePins");return k?JSON.parse(k):{}}catch{return{}}}),[E,w]=c.useState(()=>localStorage.getItem("universe_highContrast")==="1"),[C,S]=c.useState(!1),[Z,D]=c.useState(!1),[T,U]=c.useState(()=>localStorage.getItem("universe_helpOpen")==="1"),{currentTheme:W}=Rs();c.useEffect(()=>{const k=setTimeout(()=>r(!1),800);return()=>clearTimeout(k)},[]),c.useEffect(()=>{localStorage.setItem("universe_helpOpen",T?"1":"0")},[T]),c.useEffect(()=>{g||localStorage.setItem("universe_nodePins",JSON.stringify(p))},[g]);const se=(k,Y)=>{const ae=Math.max(-5,Math.min(5,Y.y)),de={...p,[k]:[Y.x,ae,Y.z]};v(de),localStorage.setItem("universe_nodePins",JSON.stringify(de))},_=()=>{try{const k=localStorage.getItem("universe_presets");return k?JSON.parse(k):{}}catch{return{}}},P=k=>localStorage.setItem("universe_presets",JSON.stringify(k)),B=k=>{const Y=_(),ae=Object.keys(p).length?p:Object.fromEntries(G.map(de=>[de.id,de.position]));Y[k]=ae,P(Y),S(!1)},le=k=>{const Y=_();if(!Y[k])return;const ae={};Object.entries(Y[k]).forEach(([de,Ee])=>{ae[de]=[Ee[0],Math.max(-5,Math.min(5,Ee[1])),Ee[2]]}),v(ae),localStorage.setItem("universe_nodePins",JSON.stringify(ae)),D(!1)},H=7,G=Mt.map((k,Y)=>{const ae=Y/Mt.length*Math.PI*2+Math.PI/6,de=Y%2===0?1.2:-1,Ee=H+k.size*.3;return{...k,position:[Math.cos(ae)*Ee,de,Math.sin(ae)*Ee]}}),z=c.useMemo(()=>G.map(k=>({...k,position:p[k.id]??k.position})),[JSON.stringify(p)]),V=z.find(k=>k.id===t);return i?e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV(q,{variant:"medium",className:"p-6 text-center w-full",children:[e.jsxDEV("div",{className:"h-64 w-full relative",children:e.jsxDEV(kn,{className:"absolute inset-0",dpr:[1,2],children:[e.jsxDEV("ambientLight",{intensity:.4},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:766,columnNumber:15},this),e.jsxDEV("pointLight",{position:[4,4,4],intensity:1.2},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:767,columnNumber:15},this),e.jsxDEV(Io,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:768,columnNumber:15},this),e.jsxDEV(Ao,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:769,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:765,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:764,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast mt-2",children:"Loading 3D financial space…"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:772,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:763,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:762,columnNumber:7},this):e.jsxDEV("div",{className:"h-full space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV($i,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:784,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:783,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:L("text-2xl font-bold",W==="light"?"text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent":W==="blue"?"text-white bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent":W==="green"?"text-white bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent":"text-white bg-gradient-to-r from-violet-400 to-purple-400 bg-clip-text text-transparent"),children:"Financial Universe"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:787,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-contrast",children:"Interactive 3D exploration of your financial ecosystem"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:800,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:786,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:782,columnNumber:9},this),e.jsxDEV("div",{className:"hidden",children:[e.jsxDEV("button",{onClick:()=>l(k=>k+1),className:"px-3 py-1.5 text-sm bg-primary/10 text-primary rounded-md hover:bg-primary/20 transition-colors",children:"Reset View"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:808,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>s(null),className:"px-3 py-1.5 text-sm bg-surface/50 text-foreground rounded-md hover:bg-surface transition-colors",children:"Clear Selection"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:814,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>o(k=>!k),className:"px-3 py-1.5 text-sm bg-surface/50 text-foreground rounded-md hover:bg-surface transition-colors",title:n?"Enter Cinematic Mode":"Exit Cinematic Mode",children:n?"Cinematic Mode":"Exit Cinematic"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:820,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:807,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:781,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-4 lg:auto-rows-fr gap-6 lg:h-[700px]",children:[e.jsxDEV("div",{className:`${n?"lg:col-span-3":"lg:col-span-4"} h-[420px] sm:h-[520px] lg:h-full min-h-0 flex flex-col`,children:e.jsxDEV(q,{variant:"medium",className:"h-full min-h-0 p-2 flex flex-col",children:e.jsxDEV(c.Suspense,{fallback:e.jsxDEV("div",{className:"h-full flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin mx-auto mb-2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:837,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast",children:"Loading 3D Scene..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:838,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:836,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:835,columnNumber:15},this),children:e.jsxDEV("div",{className:"relative flex-1 min-h-0 w-full",children:[e.jsxDEV(kn,{className:"absolute inset-0",camera:{fov:60},style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)"},dpr:[1,2],performance:{min:.5},gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},children:[e.jsxDEV(Ao,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:859,columnNumber:17},this),e.jsxDEV(Io,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:860,columnNumber:17},this),e.jsxDEV(mb,{target:[0,0,0],resetSignal:a},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:861,columnNumber:17},this),z.map(k=>{const Y=ji.filter(Ee=>Ee.from===k.id||Ee.to===k.id).length,ae=Mt.reduce((Ee,je)=>Ee+je.value,0),de=k.value/ae*100;return e.jsxDEV(ab,{position:k.position,size:k.size,color:k.color,label:k.label,value:k.value,type:k.type,isSelected:t===k.id,onSelect:()=>s(k.id),nodeId:k.id,onHoverChange:(Ee,je)=>h(je?Ee:null),dimmed:m!==null&&m!==k.id,tooltip:{percent:de,degree:Y},editLayout:g,onDragEnd:se,highContrast:E},k.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:870,columnNumber:19},this)}),ji.filter(k=>k.type==="equation"?f:u).map((k,Y)=>{const ae=z.find(Ee=>Ee.id===k.from),de=z.find(Ee=>Ee.id===k.to);return!ae||!de?null:e.jsxDEV(Fo.Fragment,{children:[e.jsxDEV(cb,{from:ae.position,to:de.position,strength:k.strength,type:k.type,highlight:k.type==="equation"&&(m==="assets"||m==="liabilities"||m==="equity"),highContrast:E},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:904,columnNumber:23},this),k.type==="flow"&&e.jsxDEV(ub,{from:ae.position,to:de.position,positive:(k.strength||0)>=0},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:913,columnNumber:25},this)]},Y,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:903,columnNumber:21},this)})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:843,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsxDEV("div",{className:"absolute inset-0 rounded-xl",style:{background:"radial-gradient(100% 70% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,0.18) 100%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:929,columnNumber:19},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-24",style:{background:"linear-gradient(to top, rgba(0,0,0,0.35), rgba(0,0,0,0))"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:933,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:927,columnNumber:17},this),e.jsxDEV("div",{className:"absolute top-2 right-2 z-30 pointer-events-auto",children:e.jsxDEV(q,{variant:"light",className:"px-2 py-1 lg:px-3 lg:py-2",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-xs lg:text-sm",children:[e.jsxDEV("button",{className:"px-2 py-1 rounded bg-primary/10 text-primary hover:bg-primary/20 transition-colors flex items-center gap-1",onClick:()=>l(k=>k+1),title:"Reset View",children:[e.jsxDEV(bl,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:947,columnNumber:25},this)," Reset"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:942,columnNumber:23},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface transition-colors flex items-center gap-1",onClick:()=>s(null),title:"Clear Selection",children:"Clear"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:949,columnNumber:23},this),e.jsxDEV("button",{className:`px-2 py-1 rounded transition-colors flex items-center gap-1 ${u?"bg-primary/10 text-primary hover:bg-primary/20":"bg-surface/60 hover:bg-surface"}`,onClick:()=>{const k=!u;b(k),localStorage.setItem("universe_showFlow",k?"1":"0")},title:"Toggle Flow Links",children:"Flow"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:956,columnNumber:23},this),e.jsxDEV("button",{className:`px-2 py-1 rounded transition-colors flex items-center gap-1 ${f?"bg-primary/10 text-primary hover:bg-primary/20":"bg-surface/60 hover:bg-surface"}`,onClick:()=>{const k=!f;x(k),localStorage.setItem("universe_showEquation",k?"1":"0")},title:"Toggle Equation Links",children:"Equation"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:963,columnNumber:23},this),e.jsxDEV("button",{className:`px-2 py-1 rounded transition-colors flex items-center gap-1 ${g?"bg-primary/10 text-primary hover:bg-primary/20":"bg-surface/60 hover:bg-surface"}`,onClick:()=>{const k=!g;N(k),localStorage.setItem("universe_editLayout",k?"1":"0")},title:"Toggle Edit Layout",children:"Edit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:970,columnNumber:23},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface transition-colors flex items-center gap-1",onClick:()=>{localStorage.setItem("universe_nodePins",JSON.stringify(p))},title:"Pin Positions",children:"Pin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:977,columnNumber:23},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface transition-colors flex items-center gap-1",onClick:()=>{localStorage.removeItem("universe_nodePins"),v({})},title:"Reset Layout",children:"Reset Layout"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:984,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface transition-colors",onClick:()=>{S(k=>!k),D(!1)},title:"Save Preset",children:"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:992,columnNumber:25},this),C&&e.jsxDEV("div",{className:"absolute right-0 mt-1 pointer-events-auto",children:e.jsxDEV(q,{variant:"light",className:"px-2 py-1",children:e.jsxDEV("div",{className:"text-xs space-y-1",children:["Default","Ops Focus","Balance Focus"].map(k=>e.jsxDEV("button",{className:"block w-full text-left px-2 py-1 rounded hover:bg-surface/80",onClick:()=>B(k),children:k},k,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1004,columnNumber:35},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1002,columnNumber:31},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1001,columnNumber:29},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1e3,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:991,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface transition-colors",onClick:()=>{D(k=>!k),S(!1)},title:"Load Preset",children:"Load"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1012,columnNumber:25},this),Z&&e.jsxDEV("div",{className:"absolute right-0 mt-1 pointer-events-auto",children:e.jsxDEV(q,{variant:"light",className:"px-2 py-1",children:e.jsxDEV("div",{className:"text-xs space-y-1",children:["Default","Ops Focus","Balance Focus"].map(k=>e.jsxDEV("button",{className:"block w-full text-left px-2 py-1 rounded hover:bg-surface/80",onClick:()=>le(k),children:k},k,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1024,columnNumber:35},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1022,columnNumber:31},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1021,columnNumber:29},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1020,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1011,columnNumber:23},this),e.jsxDEV("button",{className:`px-2 py-1 rounded transition-colors flex items-center gap-1 ${E?"bg-primary/10 text-primary hover:bg-primary/20":"bg-surface/60 hover:bg-surface"}`,onClick:()=>{const k=!E;w(k),localStorage.setItem("universe_highContrast",k?"1":"0")},title:"Toggle High Contrast Labels",children:"Contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1031,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:941,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:940,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:939,columnNumber:17},this),e.jsxDEV("div",{className:"absolute bottom-2 right-2 z-20 pointer-events-none",children:e.jsxDEV(q,{variant:"light",className:"px-3 py-2",children:e.jsxDEV("div",{className:"text-xs text-foreground/80",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("span",{className:"inline-block w-3 h-1 rounded-full bg-emerald-400"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1046,columnNumber:69},this)," Flow"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1046,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"inline-block w-3 h-1 rounded-full bg-slate-400"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1047,columnNumber:64},this)," Equation"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1047,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1045,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1044,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1043,columnNumber:17},this),e.jsxDEV("div",{className:"absolute top-16 right-2 z-30 pointer-events-auto",onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:e.jsxDEV(q,{variant:"light",className:"px-2 py-1",children:[e.jsxDEV("div",{className:"flex items-center gap-3 text-xs",children:e.jsxDEV("button",{className:"flex items-center gap-2",title:"Help",children:[e.jsxDEV("span",{className:"w-5 h-5 rounded-full bg-primary/20 text-primary flex items-center justify-center font-bold",children:"?"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1058,columnNumber:25},this),e.jsxDEV("span",{className:"text-foreground/80",children:"Help"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1059,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1054,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1053,columnNumber:21},this),T&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV("div",{className:"text-xs leading-relaxed max-w-[340px] p-3 rounded-md bg-background/90 text-foreground shadow-md",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV("span",{className:"inline-block w-3 h-1 rounded-full bg-emerald-400"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1066,columnNumber:29},this),e.jsxDEV("span",{className:"text-foreground/80",children:"Flow = operational relationship"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1067,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1065,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV("span",{className:"inline-block w-3 h-1 rounded-full bg-slate-400"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1070,columnNumber:29},this),e.jsxDEV("span",{className:"text-foreground/80",children:"Equation = structural balance (Assets = Liabilities + Equity)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1071,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1069,columnNumber:27},this),e.jsxDEV("ul",{className:"list-disc ml-4 space-y-1 text-foreground/70",children:[e.jsxDEV("li",{children:"Use Flow/Equation toggles to show/hide layers"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1074,columnNumber:29},this),e.jsxDEV("li",{children:"Hover dims unrelated nodes; balance links highlight on A/L/E"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1075,columnNumber:29},this),e.jsxDEV("li",{children:"Reset recenters; idle timeout recenters after a few seconds"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1076,columnNumber:29},this),e.jsxDEV("li",{children:"Edit enables drag (Y-axis only); Pin saves positions; Reset Layout clears pins"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1077,columnNumber:29},this),e.jsxDEV("li",{children:"Save/Load presets to switch layouts (Default, Ops Focus, Balance Focus)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1078,columnNumber:29},this),e.jsxDEV("li",{children:"Use Contrast for thicker outlines and labels"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1079,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1073,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1064,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1063,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1052,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1051,columnNumber:17},this),g&&e.jsxDEV("div",{className:"absolute top-16 left-2 z-30 pointer-events-none",children:e.jsxDEV(q,{variant:"light",className:"px-3 py-2",children:e.jsxDEV("div",{className:"text-xs text-foreground/80",children:"Drag nodes vertically to arrange • Click Pin to save • Reset Layout to clear"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1091,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1090,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1089,columnNumber:19},this),!n&&V&&e.jsxDEV("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 z-30 pointer-events-auto",children:e.jsxDEV(q,{variant:"light",className:"px-4 py-3 min-w-[220px]",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-1",children:V.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1100,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-foreground/80 mb-2",children:["$",V.value.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1101,columnNumber:23},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded bg-primary/10 text-primary hover:bg-primary/20",children:"View Transactions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1103,columnNumber:25},this),e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded bg-surface/60 hover:bg-surface",onClick:()=>s(null),children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1104,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1102,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1099,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1098,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:842,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:834,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:833,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:832,columnNumber:9},this),n&&e.jsxDEV("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto lg:max-h-none lg:overflow-visible",children:[V?e.jsxDEV(q,{variant:"medium",className:"p-4",children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:V.color}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1121,columnNumber:19},this),e.jsxDEV("h3",{className:"font-semibold",children:V.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1125,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1120,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["$",V.value.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1129,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast capitalize",children:["Type: ",V.type]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1132,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1128,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"text-sm font-medium",children:"Connected To:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1138,columnNumber:19},this),ji.filter(k=>k.from===V.id||k.to===V.id).map((k,Y)=>{const ae=k.from===V.id?k.to:k.from,de=Mt.find(Ee=>Ee.id===ae);return de?e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("span",{children:de.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1149,columnNumber:27},this),e.jsxDEV("span",{className:(k.strength??0)>0?"text-green-400":"text-red-400",children:[Math.abs((k.strength??0)*100).toFixed(0),"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1150,columnNumber:27},this)]},Y,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1148,columnNumber:25},this):null})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1137,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1119,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1118,columnNumber:13},this):e.jsxDEV(q,{variant:"light",className:"p-4 text-center",children:[e.jsxDEV($i,{className:"w-8 h-8 mx-auto mb-2 text-muted-contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1161,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-contrast",children:"Click on a node to explore its connections and details"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1162,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1160,columnNumber:13},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsxDEV(jt,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1171,columnNumber:15},this),"Universe Stats"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1170,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Total Nodes:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1176,columnNumber:17},this),e.jsxDEV("span",{children:Mt.length},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1177,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1175,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Connections:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1180,columnNumber:17},this),e.jsxDEV("span",{children:ji.length},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1181,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1179,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Total Value:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1184,columnNumber:17},this),e.jsxDEV("span",{children:["$",Mt.reduce((k,Y)=>k+Y.value,0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1185,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1183,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1174,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1169,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(Gt,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1197,columnNumber:15},this),"Add Transaction"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1192,columnNumber:13},this),e.jsxDEV(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-2 bg-surface text-foreground rounded-lg text-sm font-medium hover:bg-surface/80 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(yn,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1205,columnNumber:15},this),"View Reports"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1200,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1191,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:1116,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:830,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/3d/TransactionUniverse.tsx",lineNumber:779,columnNumber:5},this)}const ls=({children:t})=>{const s=c.useMemo(()=>{const i=document.createElement("div");return i.setAttribute("data-modal-root",""),i},[]);return c.useEffect(()=>(document.body.appendChild(s),()=>{try{document.body.removeChild(s)}catch{}}),[s]),Uo.createPortal(t,s)};function ot({className:t="",children:s,...i}){return e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md disabled:opacity-50 disabled:cursor-not-allowed "+t,...i,children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/ThemedSelect.tsx",lineNumber:9,columnNumber:5},this)}function ns({label:t,children:s}){const[i,r]=c.useState(!1);return e.jsxDEV("span",{className:"inline-flex items-center gap-1 relative",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsxDEV("span",{className:"text-secondary-contrast select-none",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/InfoHint.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV("span",{className:"w-4 h-4 rounded-full bg-white/10 text-secondary-contrast flex items-center justify-center text-[10px] cursor-default",children:"?"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/InfoHint.tsx",lineNumber:8,columnNumber:7},this),i&&e.jsxDEV("span",{className:"absolute z-[50] top-full mt-1 left-0 max-w-xs text-xs bg-surface/95 border border-white/10 backdrop-blur-md rounded px-2 py-1 shadow",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/InfoHint.tsx",lineNumber:10,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/InfoHint.tsx",lineNumber:6,columnNumber:5},this)}function an({value:t,onChange:s,allowedTypes:i,label:r,placeholder:n,disabled:o,warningText:a,hint:l,variant:m="default",className:h}){const[u,b]=c.useState(!1),[f,x]=c.useState(""),[g,N]=c.useState([]),[p,v]=c.useState(!1),[E,w]=c.useState(0),[C,S]=c.useState(!1),Z=c.useRef(null),D=c.useRef(null),T=c.useRef(null),[U,W]=c.useState({top:0,left:0,width:0,isSheet:!1});c.useEffect(()=>{let H=!0;return(async()=>{try{v(!0);const G=await Cs.getChartOfAccounts(),V=(Array.isArray(G?.accounts)?G.accounts:Array.isArray(G)?G:[]).map(k=>({code:k.code,name:k.name,type:k.type,normalBalance:k.normalBalance}));H&&N(V)}finally{H&&v(!1)}})(),()=>{H=!1}},[]);const se=c.useMemo(()=>{const H=new Set(i.map(z=>String(z).toUpperCase())),G=f.trim().toLowerCase();return g.filter(z=>H.has(String(z.type).toUpperCase())||String(z.type).toUpperCase()==="EXPENSE"&&H.has("COGS")&&z.code.startsWith("50")).filter(z=>G===""||z.code.includes(G)||z.name.toLowerCase().includes(G)).sort((z,V)=>z.code.localeCompare(V.code))},[g,i,f]),_=c.useMemo(()=>{if(C)return se;const H=new Set(["1010","1200","2010","2150","1360","2050"]);return se.filter(G=>!H.has(String(G.code))&&!(String(G.code).length===4&&String(G.code).endsWith("00")))},[se,C]),P=c.useMemo(()=>g.find(H=>H.code===t),[g,t]);c.useEffect(()=>{if(!u)return;const H=()=>{try{const z=D.current;if(!z)return;const V=z.getBoundingClientRect();let k=null;try{const Re=z.closest(".glass-modal");Re&&(k=Re.getBoundingClientRect())}catch{}const Y=8,ae=window.innerWidth,de=window.innerHeight,Ee=(k?k.left:Y)+Y,je=(k?k.right:ae-Y)-Y,Fe=k?k.width-Y*2:ae-Y*2,ee=Math.min(360,Fe),A=Math.min(720,Fe);let oe=Math.max(Math.min(Math.max(V.width,ee),A),240);if(ae<=640||Fe<420){oe=Math.max(280,Math.min(Fe,ae-Y*2));const Re=Math.max(Ee,Math.min(k?k.left+(k.width-oe)/2:(ae-oe)/2,je-oe)),$=Math.min(Math.max(de*.68,360),de-Y*2),te=Math.round(de-$-Y);W({top:te,left:Re,width:Math.round(oe),height:Math.round($),isSheet:!0});return}let we=Math.max(Ee,Math.min(V.left,je-oe));const Ae=Math.min(Math.max(de*.56,320),de-Y*2),Ve=Math.max(0,de-(V.bottom+6)-Y),Be=Math.max(0,V.top-Y);if(Ve>=240||Ve>=Be){const Re=Math.round(V.bottom+6),$=Math.max(240,Math.min(Ae,Ve));W({top:Re,left:Math.round(we),width:Math.round(oe),height:Math.round($),isSheet:!1})}else{const Re=Math.round(de-V.top+6),$=Math.max(240,Math.min(Ae,Be));W({bottom:Re,left:Math.round(we),width:Math.round(oe),height:Math.round($),isSheet:!1})}}catch{}};H();const G=()=>H();return window.addEventListener("resize",G),window.addEventListener("scroll",G,!0),()=>{window.removeEventListener("resize",G),window.removeEventListener("scroll",G,!0)}},[u]),c.useEffect(()=>{if(!u)return;const H=document.body.style.overflow;U.isSheet&&(document.body.style.overflow="hidden");const G=z=>{const V=z.target;T.current&&T.current.contains(V)||D.current&&D.current.contains(V)||b(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G),document.body.style.overflow=H}},[u,U.isSheet]);const B=m==="compact",le=P?`${P.code}${P.name?` — ${P.name}`:""}`:n||"Account";return e.jsxDEV("div",{ref:Z,className:(B?"inline-block ":"w-full ")+(h||"")+" relative",children:[!B&&r&&e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1 flex items-center gap-1",children:[e.jsxDEV("span",{children:r},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:148,columnNumber:11},this),l&&e.jsxDEV(ns,{label:r,children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:149,columnNumber:20},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:147,columnNumber:9},this),e.jsxDEV("button",{ref:D,disabled:o,onClick:()=>{b(H=>!H),setTimeout(()=>w(0),0)},className:(B?"px-2 h-8 text-xs rounded-md ":"px-3 py-2 rounded-lg ")+"text-left bg-white/10 border border-white/10 hover:bg-white/15 outline-none "+(B?"whitespace-nowrap truncate max-w-[min(52vw,320px)]":"w-full"),"aria-haspopup":"listbox","aria-expanded":u,children:le},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:152,columnNumber:7},this),u&&Uo.createPortal(e.jsxDEV("div",{ref:T,className:"z-[100000]",onKeyDown:H=>{if(H.key==="Escape"){H.preventDefault(),b(!1);return}if(H.key==="ArrowDown"&&(H.preventDefault(),w(G=>Math.min(se.length-1,Math.max(0,G+1)))),H.key==="ArrowUp"&&(H.preventDefault(),w(G=>Math.max(0,G-1))),H.key==="Enter"){H.preventDefault();const G=se[E];G&&(s(G.code),b(!1))}},style:{position:"fixed",top:U.top,bottom:U.bottom,left:U.left,width:U.width,maxWidth:"96vw"},children:e.jsxDEV(q,{variant:"light",className:(U.isSheet?"p-3 rounded-t-2xl mt-0 ":"mt-2 rounded-xl p-2 ")+"w-full shadow-2xl",children:[e.jsxDEV("div",{className:"sticky top-0 z-[1] -mx-2 px-2 py-2 bg-surface/60 backdrop-blur-md",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{autoFocus:!0,value:f,onChange:H=>{x(H.target.value),w(0)},placeholder:"Search by code or name",className:"w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:180,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded-lg bg-white/10 border border-white/10",onClick:()=>b(!1),children:U.isSheet?"Done":"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:181,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:179,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",checked:C,onChange:H=>{S(H.target.checked),w(0)}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:185,columnNumber:19},this),e.jsxDEV("span",{children:"Show advanced"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:186,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:184,columnNumber:17},this),e.jsxDEV("div",{className:"text-[11px] text-amber-400",children:"Be careful to prevent misposting."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:188,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:183,columnNumber:15},this),a&&e.jsxDEV("div",{className:"text-xs text-amber-400 mt-2",children:a},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:190,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:178,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-auto",style:{maxHeight:U.height?`${U.height-72}px`:U.isSheet?"68vh":"56vh"},role:"listbox","aria-label":"Chart of Accounts",children:[p&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast p-2",children:"Loading accounts…"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:193,columnNumber:27},this),!p&&_.map((H,G)=>e.jsxDEV("button",{onMouseEnter:()=>w(G),onClick:()=>{s(H.code),b(!1)},className:"w-full text-left px-3 py-2 border-b border-white/5 hover:bg-white/10 "+(G===E?"bg-white/10":""),role:"option","aria-selected":G===E,children:e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("div",{className:"text-sm font-medium truncate",children:[H.code," — ",H.name]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:204,columnNumber:21},this),e.jsxDEV("span",{className:"text-[10px] px-2 py-0.5 rounded-full border border-white/10 bg-white/5 text-secondary-contrast uppercase",children:H.type},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:205,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:203,columnNumber:19},this)},H.code,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:195,columnNumber:17},this)),!p&&_.length===0&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast p-2",children:"No accounts found"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:210,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("div",{className:"mt-2 flex gap-2",children:e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded-lg bg-white/10 border border-white/10",onClick:()=>{s(void 0),b(!1)},children:"Reset to AI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:214,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:213,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:174,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:163,columnNumber:9},this),document.body)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/CoaSelector.tsx",lineNumber:145,columnNumber:5},this)}async function hb(){const{data:t}=await X.get("/api/recurring");return t?.rules||[]}async function pb(t){const{data:s}=await X.post("/api/recurring",t);return s?.rule}async function bb(t,s){const{data:i}=await X.put(`/api/recurring/${t}`,s);return i?.rule}async function fb(t){const{data:s}=await X.post(`/api/recurring/${t}/pause`,{});return s}async function gb(t){const{data:s}=await X.post(`/api/recurring/${t}/resume`,{});return s}async function Nb(){const{data:t}=await X.post("/api/recurring/run",{});return t}async function xb(t){const s={dryRun:!0};t&&(s.ruleId=t);const{data:i}=await X.post("/api/recurring/run",s);return i}async function Eb(t){const{data:s}=await X.post("/api/recurring/run",{ruleId:t});return s}async function vb(t,s=3){const{data:i}=await X.get(`/api/recurring/${t}/occurrences`,{params:{count:s}});return Array.isArray(i?.occurrences)?i.occurrences:[]}const gs={listRecurring:hb,createRecurring:pb,updateRecurring:bb,pauseRecurring:fb,resumeRecurring:gb,runRecurringNow:Nb,simulateNextRun:xb,getOccurrences:vb,forceRunRule:Eb};function _o(t,s){return new Date(t,s+1,0).getDate()}function Db(t,s,i={}){const r=new Date(t);if(isNaN(r.getTime()))return new Date().toISOString();const n=new Date(r);if(s==="DAILY"){const m=Math.max(1,i.intervalDays||1);n.setDate(n.getDate()+m)}else if(s==="WEEKLY"){const m=Math.max(1,i.intervalWeeks||1);if(i.weekday==null||typeof i.weekday!="number")n.setDate(n.getDate()+7*m);else{const h=n.getDay();let u=(i.weekday-h+7)%7;u===0&&(u=7*m),n.setDate(n.getDate()+u)}}else if(s==="MONTHLY"){const m=n.getFullYear(),h=n.getMonth()+1,u=(g,N,p)=>{const v=N-1,E=_o(g,v),w=Math.min(Math.max(1,p),E);return new Date(g,v,w)},b=g=>new Date(g.getFullYear(),g.getMonth()+1,g.getDate());let f;const x=typeof i.nthWeek=="number"&&typeof i.nthWeekday=="number"&&i.nthWeek>=1;if(i.endOfMonth){const g=new Date(m,h,0);f=b(g)}else if(typeof i.dayOfMonth=="number"&&i.dayOfMonth>=1)f=u(m,h+1,i.dayOfMonth);else if(x){const g=n.getMonth()+1,N=new Date(n.getFullYear(),g,1),p=N.getDay();let v=1+(i.nthWeekday-p+7)%7+(i.nthWeek-1)*7;const E=_o(N.getFullYear(),g);v>E&&(v=E),f=new Date(N.getFullYear(),g,v)}else f=b(n);n.setTime(f.getTime())}else s==="ANNUAL"&&n.setFullYear(n.getFullYear()+1);const o=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");return`${o}-${a}-${l}T00:00:00.000Z`}function Vl(t,s,i={},r=3){const n=[];let o=t;for(let a=0;a<r;a++)o=Db(o,s,i),n.push(o.slice(0,10));return n}function Zl({open:t,onClose:s,seed:i}){const[r,n]=c.useState(i?.type||"EXPENSE"),[o,a]=c.useState((i?.type==="EXPENSE"?i?.vendorName:i?.customerName)||""),[l,m]=c.useState(i?.amount!=null?String(i?.amount):""),[h,u]=c.useState(i?.description||""),[b,f]=c.useState("MONTHLY"),[x,g]=c.useState(new Date().toISOString().slice(0,10)),[N,p]=c.useState(""),[v,E]=c.useState(""),[w,C]=c.useState(""),[S,Z]=c.useState(!1),[D,T]=c.useState(""),[U,W]=c.useState(""),[se,_]=c.useState(""),[P,B]=c.useState(""),[le,H]=c.useState([]),[G,z]=c.useState(!1),[V,k]=c.useState(null),[Y,ae]=c.useState(!1);c.useEffect(()=>{const ee={weekday:v===""?void 0:Number(v),dayOfMonth:w===""?void 0:Number(w),endOfMonth:S,nthWeek:D===""?void 0:Number(D),nthWeekday:U===""?void 0:Number(U)};try{H(Vl(x,b,ee,3))}catch{H([])}},[x,b,v,w,S,D,U]);const de=async()=>{try{z(!0);const ee={amount:parseFloat(l||"0"),description:h||void 0};r==="EXPENSE"?ee.vendorName=o:ee.customerName=o;const A={type:r,cadence:b,startDate:x,endDate:N||void 0,payload:ee};v!==""&&(A.weekday=Number(v)),w!==""&&(A.dayOfMonth=Number(w)),ee.__options={endOfMonth:S,nthWeek:D===""?void 0:Number(D),nthWeekday:U===""?void 0:Number(U),dueDays:se===""?void 0:Math.max(0,Math.min(365,Number(se)||0))},P&&(ee.dueDate=P),await gs.createRecurring(A),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Recurring rule saved",type:"success"}})),s(),window.dispatchEvent(new Event("data:refresh"))}catch(ee){window.dispatchEvent(new CustomEvent("toast",{detail:{message:ee?.message||"Failed to save recurring",type:"error"}}))}finally{z(!1)}},Ee=()=>{const ee=x,A={amount:parseFloat(l||"0"),description:h||void 0,date:ee};return r==="EXPENSE"?A.vendorName=o:A.customerName=o,A},je=()=>{try{const ee=Ee();k(ee),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Built posting payload preview",type:"info"}}))}catch(ee){window.dispatchEvent(new CustomEvent("toast",{detail:{message:ee?.message||"Failed to build payload preview",type:"error"}}))}},Fe=async()=>{const ee=parseFloat(l||"NaN");if(!o||!isFinite(ee)||ee<=0){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Fill party and valid amount, then Save. Simulation runs only for saved, due rules in Recurring Manager.",type:"error"}}));return}try{ae(!0);const A=await gs.simulateNextRun(),oe=Array.isArray(A?.results)?A.results.length:0,Ne=oe>0?`Simulated ${oe} due rule(s) (no data saved).`:"No rules due to simulate. Save first or set Next Run to today in Recurring Manager.";console.log("Recurring simulate (modal quick):",A),window.dispatchEvent(new CustomEvent("toast",{detail:{message:Ne,type:"info"}}))}catch(A){window.dispatchEvent(new CustomEvent("toast",{detail:{message:A?.message||"Simulation failed",type:"error"}}))}finally{ae(!1)}};return e.jsxDEV(ls,{children:t&&e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4 modal-scroll-container",onClick:s,children:e.jsxDEV("div",{onClick:ee=>ee.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 max-w-xl w-[92%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"text-lg font-semibold mb-3",children:"Recurring"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:113,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:116,columnNumber:19},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:r,onChange:ee=>n(ee.target.value),children:[e.jsxDEV("option",{value:"EXPENSE",children:"Expense (Vendor Bill)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:118,columnNumber:21},this),e.jsxDEV("option",{value:"INVOICE",children:"Invoice (Revenue)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:119,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:117,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:115,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:r==="EXPENSE"?"Vendor":"Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:123,columnNumber:19},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:o,onChange:ee=>a(ee.target.value),placeholder:r==="EXPENSE"?"Adobe":"Acme Corp"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:124,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:122,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:127,columnNumber:19},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:l,onChange:ee=>m(ee.target.value),placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:128,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1 sm:col-span-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Description"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:131,columnNumber:19},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:h,onChange:ee=>u(ee.target.value),placeholder:"Subscription for …"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:132,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:130,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Cadence"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:135,columnNumber:19},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:b,onChange:ee=>f(ee.target.value),children:[e.jsxDEV("option",{value:"DAILY",children:"Daily"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:137,columnNumber:21},this),e.jsxDEV("option",{value:"WEEKLY",children:"Weekly"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:138,columnNumber:21},this),e.jsxDEV("option",{value:"MONTHLY",children:"Monthly"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:139,columnNumber:21},this),e.jsxDEV("option",{value:"ANNUAL",children:"Annually"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:140,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:136,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:134,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Start"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:144,columnNumber:19},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:x,onChange:ee=>g(ee.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:145,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:143,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"End (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:148,columnNumber:19},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:N,onChange:ee=>p(ee.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:149,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:147,columnNumber:17},this),b==="WEEKLY"&&e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Weekday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:155,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:v,onChange:ee=>E(ee.target.value),children:[e.jsxDEV("option",{value:"",children:"Same weekday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:157,columnNumber:23},this),e.jsxDEV("option",{value:"0",children:"Sunday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:158,columnNumber:23},this),e.jsxDEV("option",{value:"1",children:"Monday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:159,columnNumber:23},this),e.jsxDEV("option",{value:"2",children:"Tuesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:160,columnNumber:23},this),e.jsxDEV("option",{value:"3",children:"Wednesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:161,columnNumber:23},this),e.jsxDEV("option",{value:"4",children:"Thursday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:162,columnNumber:23},this),e.jsxDEV("option",{value:"5",children:"Friday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:163,columnNumber:23},this),e.jsxDEV("option",{value:"6",children:"Saturday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:164,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:156,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:154,columnNumber:19},this),b==="MONTHLY"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Day of month",children:"Runs on this calendar day each month (1–31). If the month has fewer days, we clamp to the month end."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:172,columnNumber:23},this),e.jsxDEV("input",{type:"number",min:1,max:31,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:w,onChange:ee=>C(ee.target.value),placeholder:"1..31"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:173,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:171,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2 mt-7",children:[e.jsxDEV("input",{type:"checkbox",checked:S,onChange:ee=>Z(ee.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:176,columnNumber:23},this),e.jsxDEV(ns,{label:"Run on end of month",children:"Always schedule on the last day of each month, accounting for variable month lengths."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:177,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:175,columnNumber:21},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Nth week (1..5, 5=last)",children:"Choose which week of the month (1st to 4th; 5th = last occurrence) to use with the weekday below."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:180,columnNumber:23},this),e.jsxDEV("input",{type:"number",min:1,max:5,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:D,onChange:ee=>T(ee.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:181,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:179,columnNumber:21},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Nth weekday",children:"Paired with Nth week. For example, 2nd Friday of each month."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:184,columnNumber:23},this),e.jsxDEV(ot,{value:U,onChange:ee=>W(ee.target.value),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:186,columnNumber:25},this),e.jsxDEV("option",{value:"0",children:"Sunday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:187,columnNumber:25},this),e.jsxDEV("option",{value:"1",children:"Monday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:188,columnNumber:25},this),e.jsxDEV("option",{value:"2",children:"Tuesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:189,columnNumber:25},this),e.jsxDEV("option",{value:"3",children:"Wednesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:190,columnNumber:25},this),e.jsxDEV("option",{value:"4",children:"Thursday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:191,columnNumber:25},this),e.jsxDEV("option",{value:"5",children:"Friday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:192,columnNumber:25},this),e.jsxDEV("option",{value:"6",children:"Saturday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:193,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:185,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:183,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:170,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Terms",children:"Per-rule payment terms. Presets or custom days (0–365)."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:201,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ot,{value:["0","14","30","45","60","90"].includes(se)?se:"",onChange:ee=>_(ee.target.value||se),children:[e.jsxDEV("option",{value:"",children:"Custom"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:204,columnNumber:23},this),e.jsxDEV("option",{value:"0",children:"Net 0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:205,columnNumber:23},this),e.jsxDEV("option",{value:"14",children:"Net 14"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:206,columnNumber:23},this),e.jsxDEV("option",{value:"30",children:"Net 30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:207,columnNumber:23},this),e.jsxDEV("option",{value:"45",children:"Net 45"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:208,columnNumber:23},this),e.jsxDEV("option",{value:"60",children:"Net 60"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:209,columnNumber:23},this),e.jsxDEV("option",{value:"90",children:"Net 90"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:210,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:203,columnNumber:21},this),e.jsxDEV("input",{type:"number",min:0,max:365,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 w-24",value:se,onChange:ee=>_(ee.target.value),placeholder:"days"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:212,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:202,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:200,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Manual Due Date (optional)",children:"Overrides Due Terms for each posting."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:216,columnNumber:19},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:P,onChange:ee=>B(ee.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:217,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:215,columnNumber:17},this),e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Next 3 occurrences:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:221,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm",children:le.join(" • ")||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:222,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:220,columnNumber:17},this),e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1",children:"Validation Preview (payload):"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:225,columnNumber:19},this),e.jsxDEV("pre",{className:"text-xs bg-white/5 border border-white/10 rounded p-2 overflow-auto max-h-40",children:V?JSON.stringify(V,null,2):"—"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:226,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:224,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:114,columnNumber:15},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border bg-white/10 border-white/10",onClick:je,disabled:G,children:"Build Payload"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:231,columnNumber:17},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border bg-white/10 border-white/10",onClick:Fe,disabled:G||Y,children:Y?"Simulating…":"Simulate Due (saved rules)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:232,columnNumber:17},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border bg-white/10 border-white/10",onClick:s,disabled:G,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:233,columnNumber:17},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:de,disabled:G||!o||!l||!(parseFloat(l)>0),children:"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:234,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:112,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:111,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:110,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/recurring/RecurringModal.tsx",lineNumber:108,columnNumber:5},this)}const Vi={PAID:0,UNPAID:1,OVERDUE:2,PARTIAL:3,CREDIT:4,RECURRING:5,PROFORMA:6},zs={PAID:"Paid",UNPAID:"Unpaid",OVERDUE:"Overdue",PARTIAL:"Partial",CREDIT:"Credit Note",RECURRING:"Recurring",PROFORMA:"Proforma"},Nt={PAID:"bg-green-500/15 border-green-400/30 text-green-600 dark:text-green-300",UNPAID:"bg-amber-500/10 border-amber-400/25 text-amber-600 dark:text-amber-300",OVERDUE:"bg-red-500/10 border-red-400/30 text-red-600 dark:text-red-300",PARTIAL:"bg-blue-500/10 border-blue-400/25 text-blue-600 dark:text-blue-300",CREDIT:"bg-cyan-500/10 border-cyan-400/25 text-cyan-600 dark:text-cyan-300",RECURRING:"bg-purple-500/10 border-purple-400/25 text-purple-600 dark:text-purple-300",PROFORMA:"bg-neutral-500/10 border-neutral-400/25 text-foreground"};function yb(){const{isDark:t}=Rs(),[s,i]=c.useState(""),[r,n]=c.useState("date"),[o,a]=c.useState("desc"),[l,m]=c.useState(!0),[h,u]=c.useState(null),[b,f]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("invoices.statuses")||"[]")||[]}catch{return[]}}),[x,g]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("invoices.compact")||"false")}catch{return!1}}),[N]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("invoices.print")||"false")}catch{return!1}}),[p,v]=c.useState(null),[E,w]=c.useState(null),[C,S]=c.useState(!1),[Z,D]=c.useState(!1),[T,U]=c.useState("AR"),[W,se]=c.useState(!1),[_,P]=c.useState(""),[B,le]=c.useState(""),[H,G]=c.useState(!1),[z,V]=c.useState(!1),[k,Y]=c.useState(0),[ae,de]=c.useState([]),[Ee,je]=c.useState([]),Fe=y=>y.reduce((F,K)=>F+Number(K?.amount||0),0),[ee,A]=c.useState([]),[oe,Ne]=c.useState([]);c.useEffect(()=>{localStorage.setItem("invoices.statuses",JSON.stringify(b))},[b]),c.useEffect(()=>{localStorage.setItem("invoices.compact",JSON.stringify(x))},[x]),c.useEffect(()=>{localStorage.setItem("invoices.print",JSON.stringify(N))},[N]),c.useEffect(()=>{const y=()=>Y(F=>F+1);return window.addEventListener("data:refresh",y),window.addEventListener("payments:updated",y),()=>{window.removeEventListener("data:refresh",y),window.removeEventListener("payments:updated",y)}},[]),c.useEffect(()=>{const y=F=>{try{const K=F&&F.detail?F.detail:{},O=K.id,be=K.type;if(!O)return;if(be==="AP"){const ue=oe.find(ne=>ne.id===O);ue&&(w(ue),setTimeout(()=>{try{document.querySelector('[data-section="items-tax"]')?.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},60))}else{const ue=ee.find(ne=>ne.id===O);ue&&(v(ue),setTimeout(()=>{try{document.querySelector('[data-section="items-tax"]')?.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},60))}}catch{}};try{window.addEventListener("open:source",y)}catch{}return()=>{try{window.removeEventListener("open:source",y)}catch{}}},[ee,oe]),c.useEffect(()=>{(async()=>{try{if(p){const y=await Vs.listInvoicePayments(p.id);de(y)}else de([])}catch{}})()},[p,k]),c.useEffect(()=>{(async()=>{try{if(E){let y=await es.listExpensePayments(E.id).catch(()=>[]);const F=Number(oe.find(Se=>Se.id===E.id)?.amountPaid||0),K=Number(E?.amountPaid||0),O=Math.max(F,K),be=Array.isArray(y)&&y.some(Se=>String(Se?.customFields?.origin||"")==="initial");if(O>0&&(!Array.isArray(y)||y.length===0||!be)){const Se=oe.find(ps=>ps.id===E.id),Qe={id:`initial:${E.id}`,date:E.date,amount:O,reference:Se?.vendorInvoiceNo||`EXP-${E.id}`,description:"Initial payment at posting",customFields:{type:"expense_payment",origin:"initial"}};y=[...y||[],Qe]}y.sort((Se,Qe)=>new Date(Qe.date).getTime()-new Date(Se.date).getTime()),je(y);const ue=y.reduce((Se,Qe)=>Se+Number(Qe?.amount||0),0),ne=Array.isArray(y)&&y.length>0?ue:O,Ce=Math.max(0,E.amount-ne),ke=ne-E.amount>.01?"overpaid":Ce<=.01?"paid":ne>.01?"partial":"unpaid",We=Ce<=.01?"PAID":ne>.01?"PARTIAL":"UNPAID";w(Se=>Se&&{...Se,amountPaid:ne,balanceDue:Ce,status:We,paymentStatusRaw:ke})}else je([])}catch{}})()},[E,k,oe]),c.useEffect(()=>{let y=!1;return(async()=>{try{if(m(!0),u(null),T==="AR"){const F=await Vs.listInvoices();if(y)return;const K=Array.isArray(F)?F.map(O=>{const be=Number(O.amount||O.transaction?.customFields?.invoiceTotal||0),ue=Number(O?.transaction?.customFields?.amountPaid||0),ne=Math.max(0,be-ue),Ce=ue-be>.01;let ke="UNPAID";const We=String(O.status||"SENT").toUpperCase();We==="PAID"?ke="PAID":We==="OVERDUE"?ke=ne>0&&ue>0?"PARTIAL":"OVERDUE":ue>0&&ne>0?ke="PARTIAL":ke="UNPAID";const Se=Ce?"overpaid":ne<=.01?"paid":ue>.01?"partial":"unpaid",Qe={id:O.id,number:O.invoiceNumber||O.number||O.reference||`INV-${O.id}`,date:(O.date?new Date(O.date):new Date).toISOString().slice(0,10),dueDate:(O.dueDate?new Date(O.dueDate):new Date).toISOString().slice(0,10),customer:O.customer||O.transaction?.description?.replace(/^Invoice:\s*/i,"")||"Customer",status:ke,amount:be,amountPaid:ue,balanceDue:ne,paymentStatusRaw:Se};try{Qe.invoiceNumber=O.invoiceNumber||Qe.number,Qe.dueDays=O?.transaction?.customFields?.dueDays??null,Qe.subtotal=O?.transaction?.customFields?.subtotal!=null?Number(O.transaction.customFields.subtotal):void 0,Qe.discount=O?.transaction?.customFields?.discountAmount!=null?Number(O.transaction.customFields.discountAmount):void 0,Qe.tax=O?.transaction?.customFields?.taxAmount!=null?Number(O.transaction.customFields.taxAmount):void 0,Qe.lineItems=Array.isArray(O?.transaction?.customFields?.lineItems)?O.transaction.customFields.lineItems:void 0}catch{}return Qe}):[];A(K)}else{const F=await es.listExpenses();if(y)return;const K=Array.isArray(F)?F.map(O=>{const be=String(O?.transaction?.customFields?.paymentStatus||"unpaid").toLowerCase(),ue=be==="paid"?"PAID":be==="partial"?"PARTIAL":be==="overpaid"?"PAID":"UNPAID",ne=Number(O?.transaction?.customFields?.amountPaid||0),Ce=Number(O?.transaction?.customFields?.balanceDue??Math.max(0,Number(O.amount||0)-ne)),ke={id:O.id,vendor:O.vendor||"Vendor",vendorInvoiceNo:O.vendorInvoiceNo||null,date:(O.date?new Date(O.date):new Date).toISOString().slice(0,10),status:ue,amount:Number(O.amount||0),amountPaid:ne,balanceDue:Ce,paymentStatusRaw:be};try{ke.receiptUrl=O?.receiptUrl||null,ke.dueDate=O?.transaction?.customFields?.dueDate||ke.date,ke.dueDays=O?.transaction?.customFields?.dueDays??null,ke.subtotal=O?.transaction?.customFields?.subtotal!=null?Number(O.transaction.customFields.subtotal):void 0,ke.discount=O?.transaction?.customFields?.discountAmount!=null?Number(O.transaction.customFields.discountAmount):void 0,ke.tax=O?.transaction?.customFields?.taxAmount!=null?Number(O.transaction.customFields.taxAmount):void 0,ke.lineItems=Array.isArray(O?.transaction?.customFields?.lineItems)?O.transaction.customFields.lineItems:void 0}catch{}return ke}):[];Ne(K)}}catch(F){y||u(F?.message||`Failed to load ${T==="AR"?"invoices":"bills"}`)}finally{y||m(!1)}})(),()=>{y=!0}},[T,k]);const we=y=>{if(!_&&!B)return!0;const F=new Date(y).getTime();return!(_&&F<new Date(_).getTime()||B&&F>new Date(B).getTime())},Ae=c.useMemo(()=>ee.filter(y=>{const F=s.trim().toLowerCase(),K=F===""||y.number.toLowerCase().includes(F)||y.customer.toLowerCase().includes(F),O=b.length===0||b.includes(y.status);return K&&O&&we(y.date)}),[s,b,ee,_,B]),Ve=c.useMemo(()=>{const y=[...Ae];return y.sort((F,K)=>{let O=0;return r==="status"?O=Vi[F.status]-Vi[K.status]:r==="amount"?O=F.amount-K.amount:r==="date"||r==="dueDate"?O=F[r].localeCompare(K[r]):O=String(F[r]).localeCompare(String(K[r])),o==="asc"?O:-O}),y},[Ae,r,o]),Be=c.useMemo(()=>oe.filter(y=>{const F=s.trim().toLowerCase(),K=F===""||y.vendor?.toLowerCase().includes(F)||(y.vendorInvoiceNo?String(y.vendorInvoiceNo).toLowerCase().includes(F):!1),O=b.length===0||b.includes(y.status);return K&&O&&we(y.date)}),[s,b,oe,_,B]),Re=c.useMemo(()=>{const y=[...Be];return y.sort((F,K)=>{let O=0;return r==="status"?O=Vi[F.status]-Vi[K.status]:r==="amount"?O=F.amount-K.amount:r==="date"?O=F.date.localeCompare(K.date):r==="customer"?O=String(F.vendor).localeCompare(String(K.vendor)):r==="number"?O=String(F.vendorInvoiceNo||"").localeCompare(String(K.vendorInvoiceNo||"")):O=0,o==="asc"?O:-O}),y},[Be,r,o]),$=c.useRef(null),[te,ce]=c.useState(0),ge=x?44:56,he=10;c.useEffect(()=>{const y=$.current;if(!y)return;const F=()=>ce(y.scrollTop);return y.addEventListener("scroll",F),()=>y.removeEventListener("scroll",F)},[$.current,x]);const Te=(y,F,K)=>{if(!y)return{start:0,end:F,padTop:0,padBot:0};const O=y.clientHeight||0,be=Math.max(0,Math.floor(K/ge)-he),ue=Math.min(F,Math.ceil((K+O)/ge)+he),ne=be*ge,Ce=Math.max(0,(F-ue)*ge);return{start:be,end:ue,padTop:ne,padBot:Ce}},Me=(T==="AR"?Ve.length:Re.length)>60,Ze=y=>`$${y.toLocaleString("en-US")}`,pe=c.useMemo(()=>Math.max(Fe(Ee),Math.max(0,Number(E?.amountPaid||0))),[Ee,E]),ze=c.useMemo(()=>Math.max(0,(E?.amount||0)-pe),[E,pe]),Le=y=>{f(F=>F.includes(y)?F.filter(K=>K!==y):[...F,y])},He=y=>{r===y?a(o==="asc"?"desc":"asc"):(n(y),a(y==="date"||y==="dueDate"?"desc":"asc"))},Ds=()=>{if(T==="AR"){const y=Ve.map(ne=>({number:ne.number,date:ne.date,dueDate:ne.dueDate,customer:ne.customer,status:zs[ne.status],amount:ne.amount})),F=Object.keys(y[0]||{}),K=[F.join(","),...y.map(ne=>F.map(Ce=>JSON.stringify(ne[Ce]??"")).join(","))].join(`
`),O=new Blob([K],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(O),ue=document.createElement("a");ue.href=be,ue.download="invoices.csv",ue.click(),URL.revokeObjectURL(be)}else{const y=Re.map(ne=>({vendor:ne.vendor,vendorInvoiceNo:ne.vendorInvoiceNo||"",date:ne.date,status:zs[ne.status],amount:ne.amount})),F=Object.keys(y[0]||{}),K=[F.join(","),...y.map(ne=>F.map(Ce=>JSON.stringify(ne[Ce]??"")).join(","))].join(`
`),O=new Blob([K],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(O),ue=document.createElement("a");ue.href=be,ue.download="bills.csv",ue.click(),URL.revokeObjectURL(be)}};return e.jsxDEV("div",{className:"relative h-full space-y-6 max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:[e.jsxDEV("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[e.jsxDEV("div",{className:"absolute -top-20 -left-24 w-[30rem] h-[30rem] rounded-full bg-primary/5 blur-3xl"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:410,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-24 -right-24 w-[28rem] h-[28rem] rounded-full bg-blue-400/5 blur-3xl"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:411,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:409,columnNumber:7},this),e.jsxDEV(q,{variant:"heavy",glow:!0,className:"p-4",children:[e.jsxDEV("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(wn,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:419,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:418,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl font-semibold",children:T==="AR"?"Invoices (AR)":"Bills (AP)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:422,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:T==="AR"?"Create, manage, and track invoices":"Review vendor bills and AP"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:423,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:421,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:417,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex items-center bg-white/10 border border-white/10 rounded-lg overflow-hidden backdrop-blur-md",children:[e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm transition",T==="AR"?"bg-white/15":"hover:bg-white/5"),onClick:()=>U("AR"),children:"AR Invoices"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:429,columnNumber:15},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm transition",T==="AP"?"bg-white/15":"hover:bg-white/5"),onClick:()=>U("AP"),children:"AP Bills"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:430,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:428,columnNumber:13},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:()=>S(!0),children:[e.jsxDEV(wi,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:433,columnNumber:15},this)," New Invoice"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:432,columnNumber:13},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:()=>se(!0),children:[e.jsxDEV(wi,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:436,columnNumber:15},this)," New Bill"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:435,columnNumber:13},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:()=>{try{window.dispatchEvent(new CustomEvent("asset:new"))}catch{}},children:[e.jsxDEV(wi,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:439,columnNumber:15},this)," New Asset"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:438,columnNumber:13},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:()=>D(!0),children:[e.jsxDEV(wi,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:442,columnNumber:15},this)," Recurring"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:441,columnNumber:13},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",N?"bg-white border-black text-black shadow-none":""),onClick:()=>window.print(),children:e.jsxDEV(Ep,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:445,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:444,columnNumber:13},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",N?"bg-white border-black text-black shadow-none":""),onClick:Ds,children:e.jsxDEV(Co,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:448,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:447,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:427,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:416,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(fl,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-muted-contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:456,columnNumber:13},this),e.jsxDEV("input",{value:s,onChange:y=>i(y.target.value),placeholder:T==="AR"?"Search by number or customer":"Search by vendor or vendor invoice no.",className:L("pl-8 pr-3 text-sm rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",x?"py-1":"py-1.5")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:457,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:455,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:["PAID","UNPAID","OVERDUE","PARTIAL","CREDIT","RECURRING","PROFORMA"].map(y=>e.jsxDEV("button",{onClick:()=>Le(y),className:L("px-2.5 py-1 text-xs rounded-lg border transition-colors",Nt[y],b.includes(y)?"ring-1 ring-primary/40":"opacity-80 hover:opacity-100"),children:zs[y]},y,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:461,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:459,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxDEV("input",{type:"date",value:_,onChange:y=>P(y.target.value),className:"px-2 py-1 text-sm rounded bg-white/10 border border-white/10 focus:bg-white/15 outline-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:465,columnNumber:13},this),e.jsxDEV("span",{className:"text-secondary-contrast text-sm",children:"→"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:466,columnNumber:13},this),e.jsxDEV("input",{type:"date",value:B,onChange:y=>le(y.target.value),className:"px-2 py-1 text-sm rounded bg-white/10 border border-white/10 focus:bg-white/15 outline-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:467,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("input",{type:"checkbox",checked:x,onChange:y=>g(y.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:469,columnNumber:13},this)," Compact"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:468,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:464,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:454,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:415,columnNumber:7},this),e.jsxDEV(q,{variant:"medium",glow:!0,className:"p-4",children:[l&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:["Loading ",T==="AR"?"invoices":"bills","..."]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:477,columnNumber:21},this),h&&!l&&e.jsxDEV("div",{className:"text-sm text-red-400",children:h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:478,columnNumber:31},this),T==="AR"?e.jsxDEV("div",{className:"overflow-x-auto hidden sm:block",children:e.jsxDEV("div",{ref:$,style:Me?{maxHeight:420,overflowY:"auto"}:void 0,children:e.jsxDEV("table",{className:L("reports-table w-full text-sm min-w-[720px] table-fixed",x?"[&_*]:py-1":""),children:[e.jsxDEV("colgroup",{children:[e.jsxDEV("col",{style:{width:"14%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:484,columnNumber:17},this),e.jsxDEV("col",{style:{width:"12%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:485,columnNumber:17},this),e.jsxDEV("col",{style:{width:"14%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:486,columnNumber:17},this),e.jsxDEV("col",{style:{width:"28%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:487,columnNumber:17},this),e.jsxDEV("col",{style:{width:"12%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:488,columnNumber:17},this),e.jsxDEV("col",{style:{width:"20%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:489,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:483,columnNumber:15},this),e.jsxDEV("thead",{className:"reports-thead sticky top-0 z-10",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("number"),children:"Invoice #"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:493,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("date"),children:"Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:494,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("dueDate"),children:"Due"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:495,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("customer"),children:"Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:496,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("status"),children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:497,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-2 text-right cursor-pointer",onClick:()=>He("amount"),children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:498,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:492,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:491,columnNumber:15},this),e.jsxDEV("tbody",{children:[Me&&e.jsxDEV("tr",{style:{height:Te($.current,Ve.length,te).padTop},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:502,columnNumber:32},this),(Me?(()=>{const{start:y,end:F}=Te($.current,Ve.length,te);return Ve.slice(y,F).map((K,O)=>({row:K,key:y+O}))})():Ve.map((y,F)=>({row:y,key:F}))).map(({row:y,key:F})=>e.jsxDEV("tr",{className:"border-t border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>v(y),children:[e.jsxDEV("td",{className:"py-2",children:y.number},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:508,columnNumber:21},this),e.jsxDEV("td",{className:"py-2",children:y.date},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:509,columnNumber:21},this),e.jsxDEV("td",{className:"py-2",children:y.dueDate},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:510,columnNumber:21},this),e.jsxDEV("td",{className:"py-2 truncate",children:y.customer},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:511,columnNumber:21},this),e.jsxDEV("td",{className:"py-2",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("span",{className:L("px-2 py-0.5 text-xs rounded-md border",Nt[y.status]),children:zs[y.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:514,columnNumber:23},this),String(y.paymentStatusRaw||"").toLowerCase()==="overpaid"&&e.jsxDEV("span",{className:"px-2 py-0.5 text-[11px] rounded-md border bg-red-500/15 border-red-400/30 text-red-300",children:"Overpaid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:516,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:513,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:512,columnNumber:21},this),e.jsxDEV("td",{className:"py-2 text-right font-semibold",children:[Ze(y.amount),(y.amountPaid!=null||y.balanceDue!=null)&&e.jsxDEV("div",{className:"mt-0.5 text-xs font-normal text-secondary-contrast",children:["Paid ",Ze(Math.max(0,Number(y.amountPaid||0)))," • Due ",Ze(Math.max(0,Number(y.balanceDue??y.amount-(y.amountPaid||0))))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:523,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:520,columnNumber:21},this)]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:507,columnNumber:19},this)),Me&&e.jsxDEV("tr",{style:{height:Te($.current,Ve.length,te).padBot},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:530,columnNumber:32},this),!l&&Ve.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{className:"py-8 text-center text-sm text-secondary-contrast",colSpan:6,children:"No invoices match the current filters."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:533,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:532,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:501,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:482,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:481,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:480,columnNumber:9},this):e.jsxDEV("div",{className:"overflow-x-auto hidden sm:block",children:e.jsxDEV("div",{ref:$,style:Me?{maxHeight:420,overflowY:"auto"}:void 0,children:e.jsxDEV("table",{className:L("reports-table w-full text-sm min-w-[720px] table-fixed",x?"[&_*]:py-1":""),children:[e.jsxDEV("colgroup",{children:[e.jsxDEV("col",{style:{width:"28%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:545,columnNumber:19},this),e.jsxDEV("col",{style:{width:"18%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:546,columnNumber:19},this),e.jsxDEV("col",{style:{width:"18%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:547,columnNumber:19},this),e.jsxDEV("col",{style:{width:"16%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:548,columnNumber:19},this),e.jsxDEV("col",{style:{width:"20%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:549,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:544,columnNumber:17},this),e.jsxDEV("thead",{className:"reports-thead sticky top-0 z-10",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("customer"),children:"Vendor"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:553,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("number"),children:"Vendor Invoice No."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:554,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("date"),children:"Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:555,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>He("status"),children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:556,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-2 text-right cursor-pointer",onClick:()=>He("amount"),children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:557,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:552,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:551,columnNumber:17},this),e.jsxDEV("tbody",{children:[Me&&e.jsxDEV("tr",{style:{height:Te($.current,Re.length,te).padTop},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:561,columnNumber:34},this),(Me?(()=>{const{start:y,end:F}=Te($.current,Re.length,te);return Re.slice(y,F).map((K,O)=>({row:K,key:y+O}))})():Re.map((y,F)=>({row:y,key:F}))).map(({row:y,key:F})=>e.jsxDEV("tr",{className:"border-t border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>w(y),children:[e.jsxDEV("td",{className:"py-2 truncate",children:y.vendor},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:567,columnNumber:23},this),e.jsxDEV("td",{className:"py-2",children:y.vendorInvoiceNo||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:568,columnNumber:23},this),e.jsxDEV("td",{className:"py-2",children:y.date},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:569,columnNumber:23},this),e.jsxDEV("td",{className:"py-2",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("span",{className:L("px-2 py-0.5 text-xs rounded-md border",Nt[y.status]),children:zs[y.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:572,columnNumber:27},this),String(y.paymentStatusRaw||"").toLowerCase()==="overpaid"&&e.jsxDEV("span",{className:"px-2 py-0.5 text-[11px] rounded-md border bg-red-500/15 border-red-400/30 text-red-300",children:"Overpaid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:574,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:571,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:570,columnNumber:23},this),e.jsxDEV("td",{className:"py-2 text-right font-semibold",children:[Ze(y.amount),(y.amountPaid!=null||y.balanceDue!=null)&&e.jsxDEV("div",{className:"mt-0.5 text-xs font-normal text-secondary-contrast",children:["Paid ",Ze(Math.max(0,Number(y.amountPaid||0)))," • Due ",Ze(Math.max(0,Number(y.balanceDue??y.amount-(y.amountPaid||0))))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:581,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:578,columnNumber:23},this)]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:566,columnNumber:21},this)),Me&&e.jsxDEV("tr",{style:{height:Te($.current,Re.length,te).padBot},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:588,columnNumber:34},this),!l&&Re.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{className:"py-8 text-center text-sm text-secondary-contrast",colSpan:5,children:"No bills match the current filters."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:591,columnNumber:23},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:590,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:560,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:543,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:542,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:541,columnNumber:11},this),e.jsxDEV("div",{className:"sm:hidden mt-2 space-y-2",children:T==="AR"?Ve.map((y,F)=>e.jsxDEV("div",{onClick:()=>v(y),children:e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:[y.date," → ",y.dueDate]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:607,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("span",{className:L("px-2 py-0.5 text-[10px] rounded border",Nt[y.status]),children:zs[y.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:609,columnNumber:19},this),String(y.paymentStatusRaw||"").toLowerCase()==="overpaid"&&e.jsxDEV("span",{className:"px-2 py-0.5 text-[10px] rounded-md border bg-red-500/15 border-red-400/30 text-red-300",children:"Overpaid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:611,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:608,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:606,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium",children:[y.number," • ",y.customer]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:617,columnNumber:17},this),e.jsxDEV("div",{className:"font-semibold",children:Ze(y.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:618,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:616,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:605,columnNumber:15},this)},F,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:604,columnNumber:13},this)):Re.map((y,F)=>e.jsxDEV("div",{onClick:()=>w(y),children:e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:y.date},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:628,columnNumber:19},this),e.jsxDEV("span",{className:L("px-2 py-0.5 text-[10px] rounded border",Nt[y.status]),children:zs[y.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:629,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:627,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium",children:[y.vendor," • ",y.vendorInvoiceNo||"-"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:632,columnNumber:19},this),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("div",{className:"font-semibold",children:Ze(y.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:634,columnNumber:21},this),e.jsxDEV("div",{className:"text-[11px] text-secondary-contrast",children:["Paid ",Ze(Math.max(0,Number(y.amountPaid||0)))," • Due ",Ze(Math.max(0,Number(y.balanceDue??y.amount-(y.amountPaid||0))))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:635,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:633,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:631,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:626,columnNumber:17},this)},F,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:625,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:601,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:476,columnNumber:7},this),p&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4",onClick:()=>v(null),children:e.jsxDEV("div",{onClick:y=>y.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 max-w-2xl w-[92%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:p.number},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:654,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:[p.customer," • ",p.date," → Due ",p.dueDate]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:655,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:653,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>v(null),children:e.jsxDEV(Ft,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:658,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:657,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:652,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxDEV("span",{className:L("px-2 py-0.5 text-xs rounded-md border",Nt[p.status]),children:zs[p.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:662,columnNumber:17},this),Fe(ae)-p.amount>.01&&e.jsxDEV("span",{className:"px-2 py-0.5 text-[11px] rounded-md border bg-red-500/15 border-red-400/30 text-red-300",children:"Overpaid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:664,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm text-foreground/80 ml-auto",children:["Amount: ",e.jsxDEV("span",{className:"font-semibold",children:Ze(p.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:666,columnNumber:78},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:666,columnNumber:17},this),e.jsxDEV("span",{className:"text-xs text-secondary-contrast",children:["Paid ",Ze(Fe(ae))," • Due ",Ze(Math.max(0,p.amount-Fe(ae)))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:667,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:661,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV(q,{variant:t?"medium":"light",className:"p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-2",children:"Actions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:671,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:async()=>{try{if(!p)return;const y=p.id,F=p.status==="PAID"?"UNPAID":"PAID";G(!0),F==="PAID"?await Vs.markInvoicePaid(y):await Vs.markInvoiceUnpaid(y),A(K=>K.map(O=>O.id===y?{...O,status:F}:O)),v({...p,status:F}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:`Invoice marked ${F==="PAID"?"paid":"unpaid"}.`,type:"success"}})),window.dispatchEvent(new Event("data:refresh"))}catch(y){const F=y?.response?.data?.error||y?.message||"Failed to update status";window.dispatchEvent(new CustomEvent("toast",{detail:{message:F,type:"error"}}))}finally{G(!1)}},disabled:H,children:[e.jsxDEV(yo,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:694,columnNumber:48},this)," ",p.status==="PAID"?"Mark Unpaid":"Mark Paid"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:673,columnNumber:21},this),e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",children:[e.jsxDEV(Co,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:695,columnNumber:155},this)," PDF"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:695,columnNumber:21},this),e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",children:[e.jsxDEV(Zo,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:696,columnNumber:155},this)," Duplicate"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:696,columnNumber:21},this),e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:async()=>{try{const y=p.id,F=prompt("Payment amount?",String(Math.max(0,p.amount-Fe(ae))));if(!F)return;const K=prompt("Payment date (YYYY-MM-DD)?",new Date().toISOString().slice(0,10))||void 0,O=await Vs.recordInvoicePayment(y,{amount:parseFloat(F),date:K}),be=String(O?.paymentStatus||"").toLowerCase(),ue=be==="partial"?"PARTIAL":"PAID";A(ne=>ne.map(Ce=>Ce.id===y?{...Ce,status:ue,paymentStatusRaw:be}:Ce)),v({...p,status:ue}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Payment recorded",type:"success"}})),window.dispatchEvent(new Event("payments:updated"))}catch(y){const F=y?.response?.data?.error||y?.message||"Failed to record payment";window.dispatchEvent(new CustomEvent("toast",{detail:{message:F,type:"error"}}))}},children:[e.jsxDEV(ko,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:714,columnNumber:24},this)," Record Payment"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:697,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:672,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:670,columnNumber:17},this),e.jsxDEV(q,{variant:t?"medium":"light",className:"p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-2",children:"Payments"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:718,columnNumber:19},this),e.jsxDEV("ul",{className:"text-sm space-y-1 max-h-44 overflow-auto",children:[e.jsxDEV("li",{className:"flex items-center gap-2",children:[e.jsxDEV(wo,{className:"w-3.5 h-3.5 text-muted-contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:720,columnNumber:61},this)," Created ",p.date," • Due ",p.dueDate]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:720,columnNumber:21},this),e.jsxDEV("li",{className:"text-xs text-secondary-contrast","data-section":"items-tax",children:[e.jsxDEV("div",{className:"font-medium text-foreground mb-1",children:"Items & Tax"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:722,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-1",children:[p?.invoiceNumber&&e.jsxDEV("div",{children:["Invoice #: ",e.jsxDEV("span",{className:"font-medium",children:p.invoiceNumber},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:724,columnNumber:76},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:724,columnNumber:60},this),p?.dueDate&&e.jsxDEV("div",{children:["Due Date: ",e.jsxDEV("span",{className:"font-medium",children:p.dueDate},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:725,columnNumber:69},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:725,columnNumber:54},this),p?.dueDays!=null&&e.jsxDEV("div",{children:["Terms: ",e.jsxDEV("span",{className:"font-medium",children:["Net ",p.dueDays]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:726,columnNumber:74},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:726,columnNumber:62},this),p?.subtotal!=null&&e.jsxDEV("div",{children:["Subtotal: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(p.subtotal||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:727,columnNumber:78},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:727,columnNumber:63},this),p?.discount!=null&&Number(p.discount)>0&&e.jsxDEV("div",{children:["Discount: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(p.discount||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:728,columnNumber:118},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:728,columnNumber:103},this),p?.tax!=null&&Number(p.tax)>0&&e.jsxDEV("div",{children:["Tax: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(p.tax||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:729,columnNumber:103},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:729,columnNumber:93},this),e.jsxDEV("div",{children:["Total: ",e.jsxDEV("span",{className:"font-semibold",children:Ze(p.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:730,columnNumber:37},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:730,columnNumber:25},this),Array.isArray(p?.lineItems)&&p.lineItems.length>0&&e.jsxDEV("div",{className:"mt-1",children:[e.jsxDEV("div",{className:"font-medium",children:"Line items"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:733,columnNumber:29},this),e.jsxDEV("ul",{className:"list-disc ml-4 space-y-0.5",children:p.lineItems.map((y,F)=>e.jsxDEV("li",{children:[y.description||"Line"," — ",Ze(Number(y.amount||0))]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:736,columnNumber:33},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:734,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:732,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:723,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:721,columnNumber:21},this),ae.map((y,F)=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:[new Date(y.date).toISOString().slice(0,10)," • ",y.reference]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:745,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:Ze(Number(y.amount))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:747,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:()=>{try{const K=p?.id;if(!K)return;window.dispatchEvent(new CustomEvent("open:source",{detail:{type:"AR",id:K}}))}catch{}},children:"View Source"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:748,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:async()=>{try{const K=prompt("Edit payment amount",String(y.amount));if(!K)return;const O=parseFloat(K),be=prompt("Edit payment date (YYYY-MM-DD)",new Date(y.date).toISOString().slice(0,10))||void 0;if(String(y?.customFields?.origin||"")==="initial"){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Initial posting payment cannot be edited here.",type:"info"}}));return}else{await Vs.voidPayment(y.id);const ne=await Vs.recordInvoicePayment(p.id,{amount:O,date:be}),Ce=String(ne?.paymentStatus||"").toLowerCase(),ke=Ce==="partial"?"PARTIAL":"PAID";A(We=>We.map(Se=>Se.id===p.id?{...Se,status:ke,paymentStatusRaw:Ce}:Se)),v(We=>We&&{...We,status:ke})}window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Payment updated",type:"success"}})),window.dispatchEvent(new Event("payments:updated"))}catch(K){const O=K?.response?.data?.error||K?.message||"Failed to edit payment";window.dispatchEvent(new CustomEvent("toast",{detail:{message:O,type:"error"}}))}},children:"Edit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:755,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:async()=>{try{if(String(y?.customFields?.origin||"")==="initial"){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Initial posting payment cannot be voided.",type:"info"}}));return}if(!confirm("Void this payment?"))return;await Vs.voidPayment(y.id),de(Ce=>Ce.filter(ke=>ke.id!==y.id));const O=Math.max(0,Fe(ae)-Number(y.amount)),be=Math.max(0,p.amount-O),ue=O-p.amount>.01?"overpaid":be<=.01?"paid":O>.01?"partial":"unpaid",ne=ue==="partial"?"PARTIAL":ue==="paid"||ue==="overpaid"?"PAID":"UNPAID";v(Ce=>Ce&&{...Ce,status:ne}),A(Ce=>Ce.map(ke=>ke.id===p.id?{...ke,status:ne,paymentStatusRaw:ue}:ke)),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Payment voided",type:"success"}})),setTimeout(()=>window.dispatchEvent(new Event("payments:updated")),100)}catch(K){const O=K?.response?.data?.error||K?.message||"Failed to void";window.dispatchEvent(new CustomEvent("toast",{detail:{message:O,type:"error"}}))}},children:"Void"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:781,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:746,columnNumber:25},this)]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:744,columnNumber:23},this)),ae.length===0&&e.jsxDEV("li",{className:"text-secondary-contrast",children:"No payments yet"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:808,columnNumber:47},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:719,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:717,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:669,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:651,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:650,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:649,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:648,columnNumber:9},this),E&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4",onClick:()=>w(null),children:e.jsxDEV("div",{onClick:y=>y.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 max-w-2xl w-[92%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:[E.vendor," • ",E.vendorInvoiceNo||"-"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:826,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:E.date},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:827,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:825,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>w(null),children:e.jsxDEV(Ft,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:830,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:829,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:824,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxDEV("span",{className:L("px-2 py-0.5 text-xs rounded-md border",Nt[E.status]),children:zs[E.status]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:834,columnNumber:17},this),String(E.paymentStatusRaw||"").toLowerCase()==="overpaid"&&e.jsxDEV("span",{className:"px-2 py-0.5 text-[11px] rounded-md border bg-red-500/15 border-red-400/30 text-red-300",children:"Overpaid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:836,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm text-foreground/80 ml-auto",children:["Amount: ",e.jsxDEV("span",{className:"font-semibold",children:Ze(E.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:838,columnNumber:78},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:838,columnNumber:17},this),e.jsxDEV("span",{className:"text-xs text-secondary-contrast",children:["Paid ",Ze(pe)," • Due ",Ze(ze)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:839,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:833,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV(q,{variant:t?"medium":"light",className:"p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-2",children:"Actions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:843,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:async()=>{try{const y=E.id,F=E.status==="PAID"?"UNPAID":"PAID";V(!0),F==="PAID"?await es.markExpensePaid(y):await es.markExpenseUnpaid(y),Ne(K=>K.map(O=>O.id===y?{...O,status:F}:O)),w({...E,status:F}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:`Bill marked ${F==="PAID"?"paid":"unpaid"}.`,type:"success"}})),window.dispatchEvent(new Event("data:refresh"))}catch(y){const F=y?.response?.data?.error||y?.message||"Failed to update status";window.dispatchEvent(new CustomEvent("toast",{detail:{message:F,type:"error"}}))}finally{V(!1)}},disabled:z,children:[e.jsxDEV(yo,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:865,columnNumber:48},this)," ",E.status==="PAID"?"Mark Unpaid":"Mark Paid"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:845,columnNumber:21},this),e.jsxDEV("label",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1 cursor-pointer",children:[e.jsxDEV(nn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:867,columnNumber:23},this)," Attach Receipt",e.jsxDEV("input",{type:"file",className:"hidden",onChange:async y=>{const F=y.target.files?.[0];if(F)try{await es.attachReceipt(E.id,F),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Receipt attached",type:"success"}}))}catch(K){window.dispatchEvent(new CustomEvent("toast",{detail:{message:K?.message||"Failed to attach",type:"error"}}))}}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:868,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:866,columnNumber:21},this),e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",onClick:async()=>{try{const y=E.id,F=prompt("Payment amount?",String(E.amount));if(!F)return;const K=prompt("Payment date (YYYY-MM-DD)?",new Date().toISOString().slice(0,10))||void 0,O=await es.recordExpensePayment(y,{amount:parseFloat(F),date:K}),be=String(O?.paymentStatus||"").toLowerCase(),ne={paid:"PAID",partial:"PARTIAL",overpaid:"PAID"}[be]||"PAID",Ce=Number(O?.amountPaid??(E.amountPaid||0)+parseFloat(F)),ke=Number(O?.balanceDue??Math.max(0,E.amount-Ce));Ne(We=>We.map(Se=>Se.id===y?{...Se,status:ne,amountPaid:Ce,balanceDue:ke,paymentStatusRaw:be}:Se)),w({...E,status:ne,amountPaid:Ce,balanceDue:ke,paymentStatusRaw:be}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:`Payment recorded (${ne==="PARTIAL"?"partial":"paid"})`,type:"success"}})),window.dispatchEvent(new Event("payments:updated"))}catch(y){const F=y?.response?.data?.error||y?.message||"Failed to record payment";window.dispatchEvent(new CustomEvent("toast",{detail:{message:F,type:"error"}}))}},children:[e.jsxDEV(ko,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:899,columnNumber:24},this)," Record Payment"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:879,columnNumber:21},this),e.jsxDEV("button",{className:"px-2.5 py-1 rounded border border-white/10 bg-white/10 hover:bg-white/15 backdrop-blur-md flex items-center gap-1",children:[e.jsxDEV(Zo,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:900,columnNumber:155},this)," Duplicate"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:900,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:844,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:842,columnNumber:17},this),e.jsxDEV(q,{variant:t?"medium":"light",className:"p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-2",children:"Payments"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:904,columnNumber:19},this),e.jsxDEV("ul",{className:"text-sm space-y-1 max-h-44 overflow-auto",children:[e.jsxDEV("li",{className:"flex items-center gap-2",children:[e.jsxDEV(wo,{className:"w-3.5 h-3.5 text-muted-contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:906,columnNumber:61},this)," Created ",E.date]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:906,columnNumber:21},this),e.jsxDEV("li",{className:"text-xs text-secondary-contrast","data-section":"items-tax",children:[e.jsxDEV("div",{className:"font-medium text-foreground mb-1",children:"Items & Tax"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:908,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-1",children:[E.vendorInvoiceNo&&e.jsxDEV("div",{children:["Vendor Invoice No.: ",e.jsxDEV("span",{className:"font-medium",children:E.vendorInvoiceNo},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:910,columnNumber:81},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:910,columnNumber:56},this),E?.dueDate&&e.jsxDEV("div",{children:["Due Date: ",e.jsxDEV("span",{className:"font-medium",children:E.dueDate},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:911,columnNumber:73},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:911,columnNumber:58},this),E?.dueDays!=null&&e.jsxDEV("div",{children:["Terms: ",e.jsxDEV("span",{className:"font-medium",children:["Net ",E.dueDays]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:912,columnNumber:78},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:912,columnNumber:66},this),E?.subtotal!=null&&e.jsxDEV("div",{children:["Subtotal: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(E.subtotal||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:913,columnNumber:82},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:913,columnNumber:67},this),E?.discount!=null&&Number(E.discount)>0&&e.jsxDEV("div",{children:["Discount: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(E.discount||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:914,columnNumber:126},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:914,columnNumber:111},this),E?.tax!=null&&Number(E.tax)>0&&e.jsxDEV("div",{children:["Tax: ",e.jsxDEV("span",{className:"font-medium",children:Ze(Math.max(0,Number(E.tax||0)))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:915,columnNumber:111},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:915,columnNumber:101},this),e.jsxDEV("div",{children:["Total: ",e.jsxDEV("span",{className:"font-semibold",children:Ze(E.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:916,columnNumber:37},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:916,columnNumber:25},this),Array.isArray(E?.lineItems)&&E.lineItems.length>0&&e.jsxDEV("div",{className:"mt-1",children:[e.jsxDEV("div",{className:"font-medium",children:"Line items"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:919,columnNumber:29},this),e.jsxDEV("ul",{className:"list-disc ml-4 space-y-0.5",children:E.lineItems.map((y,F)=>e.jsxDEV("li",{children:[y.description||"Line"," — ",Ze(Number(y.amount||0))]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:922,columnNumber:33},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:920,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:918,columnNumber:27},this),E?.receiptUrl&&e.jsxDEV("div",{className:"flex gap-2 mt-1",children:[e.jsxDEV("a",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",href:E.receiptUrl,target:"_blank",rel:"noreferrer",children:"View Attachment"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:929,columnNumber:29},this),e.jsxDEV("label",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10 cursor-pointer",children:["Replace Attachment",e.jsxDEV("input",{type:"file",className:"hidden",onChange:async y=>{const F=y.target.files?.[0];if(F)try{await es.attachReceipt(E.id,F),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Attachment updated",type:"success"}}))}catch(K){window.dispatchEvent(new CustomEvent("toast",{detail:{message:K?.message||"Failed to update attachment",type:"error"}}))}finally{setTimeout(()=>window.dispatchEvent(new Event("data:refresh")),50)}}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:932,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:930,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:928,columnNumber:27},this),!E?.receiptUrl&&e.jsxDEV("label",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10 cursor-pointer inline-flex items-center gap-1",children:[e.jsxDEV(nn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:949,columnNumber:29},this)," Attach Receipt",e.jsxDEV("input",{type:"file",className:"hidden",onChange:async y=>{const F=y.target.files?.[0];if(F)try{await es.attachReceipt(E.id,F),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Receipt attached",type:"success"}}))}catch(K){window.dispatchEvent(new CustomEvent("toast",{detail:{message:K?.message||"Failed to attach",type:"error"}}))}finally{setTimeout(()=>window.dispatchEvent(new Event("data:refresh")),50)}}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:950,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:948,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:909,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:907,columnNumber:21},this),Ee.map((y,F)=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:[new Date(y.date).toISOString().slice(0,10)," • ",y.reference," ",String(y?.customFields?.origin||"")==="initial"?"• Initial payment at posting":""]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:968,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:Ze(Number(y.amount))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:970,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:()=>{try{const K=E?.id||p?.id;if(!K)return;window.dispatchEvent(new CustomEvent("open:source",{detail:{type:E?"AP":"AR",id:K}}))}catch{}},children:"View Source"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:971,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:async()=>{try{const K=prompt("Edit payment amount",String(y.amount));if(!K)return;const O=prompt("Edit payment date (YYYY-MM-DD)",new Date(y.date).toISOString().slice(0,10))||void 0;if(String(y?.customFields?.origin||"")==="initial")window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Initial posting payment cannot be edited here.",type:"info"}}));else{const be=parseFloat(K),ue=be-Number(y.amount);if(Math.abs(ue)<.005)return;ue>0?await es.recordExpensePayment(E.id,{amount:ue,date:O}):(await es.voidPayment(y.id),await new Promise(ne=>setTimeout(ne,20)),await es.recordExpensePayment(E.id,{amount:be,date:O}))}window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Payment updated",type:"success"}})),window.dispatchEvent(new Event("payments:updated"))}catch(K){const O=K?.response?.data?.error||K?.message||"Failed to edit payment";window.dispatchEvent(new CustomEvent("toast",{detail:{message:O,type:"error"}}))}},children:"Edit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:979,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:async()=>{try{if(!confirm("Void this payment?"))return;if(String(y?.customFields?.origin||"")!=="initial")await es.voidPayment(y.id);else{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Initial posting payment cannot be voided.",type:"info"}}));return}window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Payment voided",type:"success"}})),je(ue=>ue.filter(ne=>ne.id!==y.id));const K=Math.max(0,pe-Number(y.amount)),O=Math.max(0,E.amount-K),be=O<=.01?"PAID":K>.01?"PARTIAL":"UNPAID";w(ue=>ue&&{...ue,amountPaid:K,balanceDue:O,status:be}),setTimeout(()=>window.dispatchEvent(new Event("payments:updated")),120)}catch(K){const O=K?.response?.data?.error||K?.message||"Failed to void";window.dispatchEvent(new CustomEvent("toast",{detail:{message:O,type:"error"}}))}},children:"Void"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1006,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:969,columnNumber:25},this)]},F,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:967,columnNumber:23},this)),Ee.length===0&&e.jsxDEV("li",{className:"text-secondary-contrast",children:"No payments yet"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1033,columnNumber:51},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:905,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:903,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:841,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:823,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:822,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:821,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:820,columnNumber:9},this),C&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4",onClick:()=>S(!1),children:e.jsxDEV("div",{onClick:y=>y.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 max-w-2xl w-[92%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"New Invoice"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1051,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Fill details and create."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1052,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1050,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>S(!1),children:e.jsxDEV(Ft,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1056,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1055,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1049,columnNumber:15},this),e.jsxDEV(wb,{onClose:()=>S(!1),onCreated:y=>{A(F=>[y,...F]),S(!1),window.dispatchEvent(new Event("data:refresh"))}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1059,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1048,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1047,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1046,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1045,columnNumber:9},this),Z&&e.jsxDEV(Zl,{open:Z,onClose:()=>D(!1),seed:{type:T==="AR"?"INVOICE":"EXPENSE"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1071,columnNumber:9},this),W&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4",onClick:()=>se(!1),children:e.jsxDEV("div",{onClick:y=>y.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 max-w-2xl w-[92%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"New Bill"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1082,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Enter vendor bill details."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1083,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1081,columnNumber:19},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>se(!1),children:e.jsxDEV(Ft,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1086,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1085,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1080,columnNumber:17},this),e.jsxDEV(Cb,{onClose:()=>se(!1),onCreated:y=>{Ne(F=>[y,...F]),se(!1),window.dispatchEvent(new Event("data:refresh"))}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1089,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1079,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1078,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1077,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1076,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:407,columnNumber:5},this)}function wb({onClose:t,onCreated:s}){const[i,r]=c.useState(""),[n,o]=c.useState(""),[a,l]=c.useState(()=>new Date().toISOString().slice(0,10)),[m,h]=c.useState(""),[u,b]=c.useState("0"),[f,x]=c.useState(""),[g,N]=c.useState(!1),[p,v]=c.useState("percentage"),[E,w]=c.useState("0"),[C,S]=c.useState("0"),[Z,D]=c.useState(""),[T,U]=c.useState(""),[W,se]=c.useState(!1),[_,P]=c.useState([{description:"",qty:"1",rate:"",amount:""}]),[B,le]=c.useState(!1),[H,G]=c.useState(null),[z,V]=c.useState(null),[k,Y]=c.useState(!1),ae=c.useMemo(()=>{try{return _.reduce((A,oe)=>A+(parseFloat(oe.amount||oe.rate||"0")||0),0)}catch{return 0}},[_]),de=c.useMemo(()=>{const A=parseFloat(f||"0")||0;return A>0?A:ae},[f,ae]),Ee=(()=>{if(!g)return 0;const A=Math.max(0,de-(parseFloat(Z||"0")||0));return p==="percentage"?A*(parseFloat(E||"0")/100):parseFloat(C||"0")})(),je=Math.max(0,de-(parseFloat(Z||"0")||0)+Ee),Fe=async()=>{try{Y(!0),G(null);const A=parseFloat(f||"0")||0,oe=parseFloat(Z||"0")||0,Ne=parseFloat(T||"0")||0;if(!i.trim()){const ce="Customer is required for preview";G(ce);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:ce,type:"error"}}))}catch{}return}if(!(A>0||ae>0)){const ce="Enter Subtotal or at least one line item amount";G(ce);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:ce,type:"error"}}))}catch{}return}const we=g?p==="percentage"?{enabled:!0,type:"percentage",rate:parseFloat(E||"0")}:{enabled:!0,type:"amount",amount:parseFloat(C||"0")}:void 0,Ae=_.filter(ce=>ce.description&&ce.description.trim()||ce.amount&&!isNaN(parseFloat(ce.amount))).map(ce=>({description:ce.description||"Line",amount:parseFloat(ce.amount||ce.rate||"0"),quantity:ce.qty!=null&&ce.qty!==""?parseFloat(ce.qty):void 0,rate:ce.rate!=null&&ce.rate!==""?parseFloat(ce.rate):void 0,accountCode:ce.accountCode||void 0})),Ve=.01,Be=Math.max(0,+(je-Ne).toFixed(2));let Re="invoice";Ne>je+Ve?Re="overpaid":Math.abs(je-Ne)<=Ve?Re="paid":Ne>Ve&&(Re="partial");const $={customerName:i.trim(),amount:+je.toFixed(2),amountPaid:Ne,balanceDue:Be,date:a,description:`Invoice for ${i.trim()}`,invoiceNumber:n||void 0,paymentStatus:Re,subtotal:f?parseFloat(f):void 0,taxSettings:we,discount:Z&&!isNaN(parseFloat(Z))?{enabled:!0,amount:parseFloat(Z)}:void 0,lineItems:Ae},te=await Vs.previewRevenue($);V(te)}catch(A){const oe=A?.message||"Preview failed";V(null);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:oe,type:"error"}}))}catch{}}finally{Y(!1)}},ee=async()=>{try{le(!0),G(null);const A=[],oe=parseFloat(f||"0")||0,Ne=ae,we=parseFloat(Z||"0")||0,Ae=parseFloat(E||"0")||0,Ve=parseFloat(C||"0")||0,Be=parseFloat(T||"0")||0;if(i.trim()||A.push("Customer is required"),oe>0||Ne>0||A.push("Enter a positive Subtotal or at least one line item amount"),we<0&&A.push("Discount cannot be negative"),we>Math.max(oe,Ne)&&A.push("Discount cannot exceed current subtotal (from Subtotal or line items)"),g&&p==="percentage"&&(Ae<0||Ae>100)&&A.push("Tax rate must be between 0 and 100"),g&&p==="amount"&&Ve<0&&A.push("Tax amount cannot be negative"),Be<0&&A.push("Amount Paid cannot be negative"),Math.max(0,Math.max(oe,Ne)-we+(g?p==="percentage"?(Math.max(oe,Ne)-we)*(Ae/100):Ve:0))>0||(oe<=0&&Ne<=0?A.push("Total must be greater than 0. Enter Subtotal or add line item amounts"):A.push("Total must be greater than 0 after discount/tax")),A.length){G(A[0]);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:A[0],type:"error"}}))}catch{}le(!1);return}const $=.01,te=parseFloat(T||"0")||0,ce=Math.max(0,+(je-te).toFixed(2));let ge="invoice";te>je+$?ge="overpaid":Math.abs(je-te)<=$?ge="paid":te>$&&(ge="partial");const he=g?p==="percentage"?{enabled:!0,type:"percentage",rate:parseFloat(E||"0")}:{enabled:!0,type:"amount",amount:parseFloat(C||"0")}:void 0,Te=_.filter(Le=>Le.description&&Le.description.trim()||Le.amount&&!isNaN(parseFloat(Le.amount))).map(Le=>({description:Le.description||"Line",amount:parseFloat(Le.amount||Le.rate||"0"),quantity:Le.qty!=null&&Le.qty!==""?parseFloat(Le.qty):void 0,rate:Le.rate!=null&&Le.rate!==""?parseFloat(Le.rate):void 0}));if(f&&Te.length){const Le=Te.reduce((He,Ds)=>He+(parseFloat(String(Ds.amount))||0),0);if(Math.abs(Le-parseFloat(f))>.01){const Ds=`Line items don't match Subtotal. Difference: $${(parseFloat(f)-Le).toFixed(2)}`;G(Ds);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:Ds,type:"error"}}))}catch{}le(!1);return}}const Me={customerName:i.trim(),amount:+je.toFixed(2),date:a,description:`Invoice for ${i.trim()}`,invoiceNumber:n||void 0,paymentStatus:ge,amountPaid:te>0?te:void 0,balanceDue:ce,dueDate:m||void 0,dueDays:u===""?void 0:Math.max(0,Math.min(365,Number(u)||0)),subtotal:f?parseFloat(f):void 0,taxSettings:he,discount:Z&&!isNaN(parseFloat(Z))?{enabled:!0,amount:parseFloat(Z)}:void 0,lineItems:Te},Ze=await Vs.postInvoice(Me),pe=ge==="partial"?"PARTIAL":ge==="paid"||ge==="overpaid"?"PAID":"UNPAID",ze={id:Ze?.transactionId||String(Date.now()),number:Me.invoiceNumber||`INV-${Date.now()}`,date:a,dueDate:m||a,customer:i,status:pe,amount:+je.toFixed(2),amountPaid:te,balanceDue:ce,paymentStatusRaw:ge};try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Invoice created successfully",type:"success"}}))}catch{}s(ze)}catch(A){const oe=A?.response?.data?.message||A?.message||"Failed to create invoice";G(oe);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:oe,type:"error"}}))}catch{}}finally{le(!1)}};return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1289,columnNumber:11},this),e.jsxDEV("input",{value:i,onChange:A=>r(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"Customer name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1290,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1288,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Invoice #"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1293,columnNumber:11},this),e.jsxDEV("input",{value:n,onChange:A=>o(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"INV-2042"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1294,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1292,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1297,columnNumber:11},this),e.jsxDEV("input",{type:"date",value:a,onChange:A=>l(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1298,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1296,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Date",children:"Optional override of terms. If blank, computed from Due Terms."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1301,columnNumber:11},this),e.jsxDEV("input",{type:"date",value:m,onChange:A=>h(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1302,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1300,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Terms",children:"Choose a preset or set custom days (0–365)."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1305,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ot,{value:["0","14","30","45","60","90"].includes(u)?u:"",onChange:A=>b(A.target.value||u),children:[e.jsxDEV("option",{value:"",children:"Custom"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1308,columnNumber:15},this),e.jsxDEV("option",{value:"0",children:"Net 0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1309,columnNumber:15},this),e.jsxDEV("option",{value:"14",children:"Net 14"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1310,columnNumber:15},this),e.jsxDEV("option",{value:"30",children:"Net 30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1311,columnNumber:15},this),e.jsxDEV("option",{value:"45",children:"Net 45"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1312,columnNumber:15},this),e.jsxDEV("option",{value:"60",children:"Net 60"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1313,columnNumber:15},this),e.jsxDEV("option",{value:"90",children:"Net 90"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1314,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1307,columnNumber:13},this),e.jsxDEV("input",{type:"number",min:0,max:365,value:u,onChange:A=>b(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-24",placeholder:"days"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1316,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1306,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1304,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Subtotal"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1320,columnNumber:11},this),e.jsxDEV("input",{type:"number",value:f,onChange:A=>x(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1321,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"If left blank, we use the sum of line item amounts."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1322,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1319,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Tax"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1325,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("input",{type:"checkbox",checked:g,onChange:A=>N(A.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1327,columnNumber:64},this)," Enable"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1327,columnNumber:13},this),e.jsxDEV(ot,{value:p,onChange:A=>v(A.target.value),children:[e.jsxDEV("option",{value:"percentage",children:"Percentage"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1329,columnNumber:15},this),e.jsxDEV("option",{value:"amount",children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1330,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1328,columnNumber:13},this),p==="percentage"?e.jsxDEV("input",{type:"number",step:"0.01",value:E,onChange:A=>w(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-28",placeholder:"%"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1333,columnNumber:15},this):e.jsxDEV("input",{type:"number",step:"0.01",value:C,onChange:A=>S(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-28",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1335,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1326,columnNumber:11},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Discount (amount)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1339,columnNumber:13},this),e.jsxDEV("input",{type:"number",step:"0.01",value:Z,onChange:A=>D(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1340,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1338,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:["Total: ",e.jsxDEV("span",{className:"font-medium",children:["$",je.toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1342,columnNumber:67},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1342,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1324,columnNumber:9},this),e.jsxDEV("label",{className:"flex items-center gap-2 mt-2",children:[e.jsxDEV("input",{type:"checkbox",checked:W,onChange:A=>se(A.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1345,columnNumber:11},this),e.jsxDEV("span",{className:"text-xs text-secondary-contrast",children:"Remember chosen accounts for this customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1346,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1344,columnNumber:9},this),e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Line items"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1349,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2 mt-1",children:_.map((A,oe)=>e.jsxDEV("div",{className:"grid grid-cols-12 gap-2 items-center",children:[e.jsxDEV("div",{className:"col-span-8 flex items-center gap-2",children:[e.jsxDEV("input",{value:A.description,onChange:Ne=>P(we=>we.map((Ae,Ve)=>Ve===oe?{...Ae,description:Ne.target.value}:Ae)),className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:`Description ${oe+1}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1354,columnNumber:19},this),e.jsxDEV(an,{variant:"compact",value:A.accountCode,onChange:Ne=>P(we=>we.map((Ae,Ve)=>Ve===oe?{...Ae,accountCode:Ne}:Ae)),allowedTypes:["REVENUE"],placeholder:"Account (optional override)",hint:"Overrides AI mapping for this line only.",warningText:"Manual override. Ensure this is the correct revenue account."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1355,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1353,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:A.qty||"",onChange:Ne=>P(we=>we.map((Ae,Ve)=>Ve===oe?{...Ae,qty:Ne.target.value}:Ae)),className:"col-span-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Qty"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1357,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:A.rate||"",onChange:Ne=>P(we=>we.map((Ae,Ve)=>Ve===oe?{...Ae,rate:Ne.target.value,amount:(parseFloat(Ne.target.value||"0")*parseFloat(A.qty||"1")||0).toString()}:Ae)),className:"col-span-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Rate"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1358,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:A.amount,onChange:Ne=>P(we=>we.map((Ae,Ve)=>Ve===oe?{...Ae,amount:Ne.target.value}:Ae)),className:"col-span-2 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1359,columnNumber:17},this),e.jsxDEV("div",{className:"col-span-12 flex gap-2",children:[e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10",onClick:()=>P(Ne=>[...Ne,{description:"",qty:"1",rate:"",amount:""}]),children:"Add"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1361,columnNumber:19},this),e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10 disabled:opacity-60",disabled:_.length<=1,onClick:()=>P(Ne=>Ne.filter((we,Ae)=>Ae!==oe)),children:"Remove"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1362,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1360,columnNumber:17},this)]},oe,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1352,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1350,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1348,columnNumber:9},this),e.jsxDEV("div",{className:"sm:col-span-2 grid grid-cols-2 gap-3",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Amount Paid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1370,columnNumber:13},this),e.jsxDEV("input",{type:"number",value:T,onChange:A=>U(A.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1371,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1369,columnNumber:11},this),e.jsxDEV("div",{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1373,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1368,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1287,columnNumber:7},this),H&&e.jsxDEV("div",{className:"mt-3 text-sm text-red-400",children:H},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1376,columnNumber:17},this),z&&e.jsxDEV(q,{variant:"light",className:"mt-3 p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-1",children:"Preview — Account mapping"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1379,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1",children:["Document: Invoice • Date used: ",z.dateUsed]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1380,columnNumber:11},this),e.jsxDEV("ul",{className:"text-sm space-y-1",children:(Array.isArray(z.entries)?z.entries:[]).map((A,oe)=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:String(A.type).toUpperCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1384,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",children:[A.accountCode," ",A.accountName?`— ${A.accountName}`:""]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1385,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:["$",Number(A.amount||0).toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1386,columnNumber:17},this)]},oe,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1383,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1381,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1378,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",onClick:t,disabled:B,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1393,columnNumber:9},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 disabled:opacity-60",onClick:Fe,disabled:k||B||!i||!(parseFloat(f||"0")>0||_.some(A=>parseFloat(A.amount||"0")>0)),children:"Preview"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1394,columnNumber:9},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:ee,disabled:B||!i||!(parseFloat(f||"0")>0||_.some(A=>parseFloat(A.amount||"0")>0)),children:"Create"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1395,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1392,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1286,columnNumber:5},this)}function Cb({onClose:t,onCreated:s}){const[i,r]=c.useState(""),[n,o]=c.useState(""),[a,l]=c.useState(()=>new Date().toISOString().slice(0,10)),[m,h]=c.useState(""),[u,b]=c.useState("0"),[f,x]=c.useState(""),[g,N]=c.useState(!1),[p,v]=c.useState("percentage"),[E,w]=c.useState("0"),[C,S]=c.useState("0"),[Z,D]=c.useState(""),[T,U]=c.useState([{description:"",qty:"1",rate:"",amount:""}]),[W,se]=c.useState("0"),[_,P]=c.useState(""),[B,le]=c.useState(""),[H,G]=c.useState(!1),[z,V]=c.useState(!1),[k,Y]=c.useState(null),[ae,de]=c.useState(null),[Ee,je]=c.useState(!1),Fe=c.useMemo(()=>{try{return T.reduce(($,te)=>$+(parseFloat(te.amount||te.rate||"0")||0),0)}catch{return 0}},[T]),ee=c.useMemo(()=>{const $=parseFloat(f||"0")||0;return $>0?$:Fe},[f,Fe]),A=parseFloat(Z||"0")||0,oe=Math.max(0,ee-A),Ne=g?p==="percentage"?oe*(parseFloat(E||"0")/100):parseFloat(C||"0"):0,we=Math.max(0,oe+Ne),Ae=(()=>{try{return JSON.parse(localStorage.getItem("settings.apSplitLines")||"false")}catch{return!1}})(),Ve=async()=>{try{if(je(!0),Y(null),!i.trim()){const he="Vendor is required for preview";Y(he);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:he,type:"error"}}))}catch{}return}if(!(parseFloat(f||"0")>0||Fe>0)){const he="Enter Subtotal or at least one line item amount";Y(he);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:he,type:"error"}}))}catch{}return}const $=g?p==="percentage"?{enabled:!0,type:"percentage",rate:parseFloat(E||"0")}:{enabled:!0,type:"amount",amount:parseFloat(C||"0")}:void 0,te=T.filter(he=>he.description&&he.description.trim()||he.amount&&!isNaN(parseFloat(he.amount))).map(he=>({description:he.description||"Line",amount:parseFloat(he.amount||he.rate||"0"),quantity:he.qty!=null&&he.qty!==""?parseFloat(he.qty):void 0,rate:he.rate!=null&&he.rate!==""?parseFloat(he.rate):void 0,accountCode:he.accountCode||void 0})),ce={vendorName:i.trim(),amount:+we.toFixed(2),amountPaid:Math.max(0,Math.min(parseFloat(W||"0")||0,we)),balanceDue:Math.max(0,+(we-(parseFloat(W||"0")||0)).toFixed(2)),date:a,description:`Bill from ${i.trim()}`,vendorInvoiceNo:n||void 0,paymentStatus:parseFloat(W||"0")>0?parseFloat(W||"0")+.005>=we?"paid":"partial":"unpaid",subtotal:f?parseFloat(f):void 0,taxSettings:$,discount:Z&&!isNaN(parseFloat(Z))?{enabled:!0,amount:parseFloat(Z)}:void 0,lineItems:te};try{JSON.parse(localStorage.getItem("settings.apSplitLines")||"false")?ce.splitByLineItems=!0:B&&(ce.accountCode=B)}catch{}const ge=await es.previewExpense(ce);de(ge)}catch($){const te=$?.message||"Preview failed";de(null);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:te,type:"error"}}))}catch{}}finally{je(!1)}},Be=async()=>{try{V(!0),Y(null);const $=[];i.trim()||$.push("Vendor is required");const te=parseFloat(f||"0")||0,ce=Fe,ge=parseFloat(Z||"0")||0;if(te>0||ce>0||$.push("Enter a positive Subtotal or at least one line item amount"),ge<0&&$.push("Discount cannot be negative"),ge>Math.max(te,ce)&&$.push("Discount cannot exceed current subtotal (from Subtotal or line items)"),g&&p==="percentage"){const pe=parseFloat(E||"0");(pe<0||pe>100)&&$.push("Tax rate must be 0..100")}if(g&&p==="amount"&&parseFloat(C||"0")<0&&$.push("Tax amount cannot be negative"),parseFloat(W||"0")<0&&$.push("Amount Paid cannot be negative"),$.length){Y($[0]);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:$[0],type:"error"}}))}catch{}V(!1);return}const he=T.filter(pe=>pe.description&&pe.description.trim()||pe.amount&&!isNaN(parseFloat(pe.amount))).map(pe=>({description:pe.description||"Line",amount:parseFloat(pe.amount||pe.rate||"0"),quantity:pe.qty!=null&&pe.qty!==""?parseFloat(pe.qty):void 0,rate:pe.rate!=null&&pe.rate!==""?parseFloat(pe.rate):void 0}));if(f&&he.length){const pe=he.reduce((ze,Le)=>ze+(parseFloat(String(Le.amount))||0),0);if(Math.abs(pe-parseFloat(f))>.01){const Le=`Line items don't match Subtotal. Difference: $${(parseFloat(f)-pe).toFixed(2)}`;Y(Le);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:Le,type:"error"}}))}catch{}V(!1);return}}const Te={vendorName:i,vendorInvoiceNo:n||void 0,date:a,amount:we.toFixed(2),categoryKey:"OFFICE_SUPPLIES",description:`Bill from ${i}`,dueDays:u===""?void 0:Math.max(0,Math.min(365,Number(u)||0)),dueDate:m||void 0,paymentStatus:parseFloat(W||"0")>0?parseFloat(W)+.005>=we?"paid":"partial":"unpaid",amountPaid:parseFloat(W||"0")>0?parseFloat(W):void 0,datePaid:_||void 0,taxSettings:g?p==="percentage"?{enabled:!0,type:"percentage",rate:parseFloat(E||"0")}:{enabled:!0,type:"amount",amount:parseFloat(C||"0")}:void 0};he.length&&(Te.lineItems=he);try{JSON.parse(localStorage.getItem("settings.apSplitLines")||"false")?Te.splitByLineItems=!0:B&&(Te.accountCode=B)}catch{}Z&&!isNaN(parseFloat(Z))&&(Te.discount={enabled:!0,amount:parseFloat(Z)});const Me=await es.postExpense(Te);try{if(H&&i.trim()&&B){const pe=await es.getVendorDefaults(i.trim()),ze={taxEnabled:!!pe?.taxEnabled,taxMode:pe?.taxMode||null,taxRate:pe?.taxRate!=null?Number(pe.taxRate):null,taxAmount:pe?.taxAmount!=null?Number(pe.taxAmount):null,accountsRemember:{...pe?.accountsRemember||{},ap:{...pe?.accountsRemember?.ap||{},headerAccountCode:B}}};await es.saveVendorDefaults(i.trim(),ze)}}catch{}const Ze={id:Me?.expenseId||Me?.transactionId||String(Date.now()),vendor:i,vendorInvoiceNo:n||void 0,date:a,status:Te.paymentStatus==="paid"?"PAID":Te.paymentStatus==="partial"?"PARTIAL":"UNPAID",amount:we,amountPaid:parseFloat(W||"0")||0,balanceDue:Math.max(0,we-(parseFloat(W||"0")||0)),paymentStatusRaw:Te.paymentStatus};try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Bill created successfully",type:"success"}}))}catch{}s(Ze)}catch($){const te=$?.response?.data?.message||$?.message||"Failed to create bill";Y(te);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:te,type:"error"}}))}catch{}}finally{V(!1)}},Re=(()=>{try{const $=`${i} ${T.map(ge=>ge.description).join(" ")}`.toLowerCase();return(parseFloat(f||"0")||Fe)>=500||/(macbook|laptop|computer|camera|iphone|ipad|equipment|furniture|server|printer|monitor|desk|chair)/i.test($)}catch{return!1}})();return e.jsxDEV("div",{children:[Re&&e.jsxDEV("div",{className:"mb-2 rounded-md border border-yellow-400/30 bg-yellow-500/10 p-3 text-xs",children:e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("div",{className:"text-yellow-200",children:"This looks like a fixed asset purchase. Consider capitalizing it."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1601,columnNumber:13},this),e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10 hover:bg-white/15",onClick:()=>{try{window.dispatchEvent(new CustomEvent("asset:new",{detail:{seed:{vendorName:i,amount:f||T.reduce(($,te)=>$+(parseFloat(te.amount||te.rate||"0")||0),0),date:a}}}))}catch{}},children:"Capitalize as Asset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1602,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1600,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1599,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Vendor"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1608,columnNumber:11},this),e.jsxDEV("input",{value:i,onChange:$=>r($.target.value),onBlur:async()=>{try{const $=i.trim();if($){const te=await es.getVendorDefaults($),ce=te?.accountsRemember?.ap?.headerAccountCode;ce&&le(ce),te&&te.taxEnabled&&(N(!0),te.taxMode==="percentage"?(v("percentage"),typeof te.taxRate=="number"&&w(String(te.taxRate))):te.taxMode==="amount"&&(v("amount"),typeof te.taxAmount=="number"&&S(String(te.taxAmount))))}}catch{}},className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"Vendor name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1609,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1607,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-end gap-2",children:[e.jsxDEV("label",{className:"flex-1 flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Vendor Invoice No."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1613,columnNumber:13},this),e.jsxDEV("input",{value:n,onChange:$=>o($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"BILL-001"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1614,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1612,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 hover:bg-white/15",onClick:()=>{try{window.dispatchEvent(new CustomEvent("asset:new",{detail:{seed:{vendorName:i,amount:f||T.reduce(($,te)=>$+(parseFloat(te.amount||te.rate||"0")||0),0),date:a}}}))}catch{}},children:"Capitalize as Asset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1616,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1611,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1619,columnNumber:11},this),e.jsxDEV("input",{type:"date",value:a,onChange:$=>l($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1620,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1618,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Date",children:"Optional override of terms. If blank, computed from Due Terms."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1623,columnNumber:11},this),e.jsxDEV("input",{type:"date",value:m,onChange:$=>h($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1624,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1622,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Terms",children:"Choose a preset or set custom days (0–365)."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1627,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ot,{value:["0","14","30","45","60","90"].includes(u)?u:"",onChange:$=>b($.target.value||u),children:[e.jsxDEV("option",{value:"",children:"Custom"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1630,columnNumber:15},this),e.jsxDEV("option",{value:"0",children:"Net 0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1631,columnNumber:15},this),e.jsxDEV("option",{value:"14",children:"Net 14"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1632,columnNumber:15},this),e.jsxDEV("option",{value:"30",children:"Net 30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1633,columnNumber:15},this),e.jsxDEV("option",{value:"45",children:"Net 45"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1634,columnNumber:15},this),e.jsxDEV("option",{value:"60",children:"Net 60"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1635,columnNumber:15},this),e.jsxDEV("option",{value:"90",children:"Net 90"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1636,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1629,columnNumber:13},this),e.jsxDEV("input",{type:"number",min:0,max:365,value:u,onChange:$=>b($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-24",placeholder:"days"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1638,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1628,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1626,columnNumber:9},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Subtotal"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1642,columnNumber:11},this),e.jsxDEV("input",{type:"number",value:f,onChange:$=>x($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1643,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"If left blank, we use the sum of line item amounts."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1644,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1641,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Tax"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1647,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("input",{type:"checkbox",checked:g,onChange:$=>N($.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1649,columnNumber:64},this)," Enable"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1649,columnNumber:13},this),e.jsxDEV(ot,{value:p,onChange:$=>v($.target.value),children:[e.jsxDEV("option",{value:"percentage",children:"Percentage"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1651,columnNumber:15},this),e.jsxDEV("option",{value:"amount",children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1652,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1650,columnNumber:13},this),p==="percentage"?e.jsxDEV("input",{type:"number",step:"0.01",value:E,onChange:$=>w($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-28",placeholder:"%"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1655,columnNumber:15},this):e.jsxDEV("input",{type:"number",step:"0.01",value:C,onChange:$=>S($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md w-28",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1657,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1648,columnNumber:11},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Discount (amount)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1661,columnNumber:13},this),e.jsxDEV("input",{type:"number",step:"0.01",value:Z,onChange:$=>D($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1662,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1660,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:["Total: ",e.jsxDEV("span",{className:"font-medium",children:["$",we.toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1664,columnNumber:67},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1664,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1646,columnNumber:9},this),!Ae&&e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV(an,{value:B,onChange:$=>le($||""),allowedTypes:["EXPENSE","COGS"],label:"Expense account (header‑level)",hint:"Used for entire bill when split is OFF.",warningText:"Manual override. Ensure this is the correct expense/COGS account."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1668,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center gap-2 mt-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",checked:H,onChange:$=>G($.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1670,columnNumber:15},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:"Remember chosen accounts for this vendor"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1671,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1669,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1667,columnNumber:11},this),e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Line items"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1676,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2 mt-1",children:T.map(($,te)=>e.jsxDEV("div",{className:"grid grid-cols-12 gap-2 items-center",children:[e.jsxDEV("div",{className:"col-span-8 flex items-center gap-2",children:[e.jsxDEV("input",{value:$.description,onChange:ce=>U(ge=>ge.map((he,Te)=>Te===te?{...he,description:ce.target.value}:he)),className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:`Description ${te+1}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1681,columnNumber:19},this),e.jsxDEV(an,{variant:"compact",value:$.accountCode,onChange:ce=>U(ge=>ge.map((he,Te)=>Te===te?{...he,accountCode:ce}:he)),allowedTypes:["EXPENSE","COGS"],placeholder:"Account (optional override)",hint:"Overrides AI mapping for this line only.",warningText:"Manual override. Ensure this is the correct expense/COGS account."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1682,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1680,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:$.qty||"",onChange:ce=>U(ge=>ge.map((he,Te)=>Te===te?{...he,qty:ce.target.value}:he)),className:"col-span-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Qty"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1684,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:$.rate||"",onChange:ce=>U(ge=>ge.map((he,Te)=>Te===te?{...he,rate:ce.target.value,amount:(parseFloat(ce.target.value||"0")*parseFloat($.qty||"1")||0).toString()}:he)),className:"col-span-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Rate"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1685,columnNumber:17},this),e.jsxDEV("input",{type:"number",value:$.amount,onChange:ce=>U(ge=>ge.map((he,Te)=>Te===te?{...he,amount:ce.target.value}:he)),className:"col-span-2 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1686,columnNumber:17},this),e.jsxDEV("div",{className:"col-span-12 flex gap-2",children:[e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10",onClick:()=>U(ce=>[...ce,{description:"",qty:"1",rate:"",amount:""}]),children:"Add"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1688,columnNumber:19},this),e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10 disabled:opacity-60",disabled:T.length<=1,onClick:()=>U(ce=>ce.filter((ge,he)=>he!==te)),children:"Remove"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1689,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1687,columnNumber:17},this)]},te,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1679,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1677,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1675,columnNumber:9},this),e.jsxDEV("div",{className:"sm:col-span-2 grid grid-cols-2 gap-3",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Amount Paid"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1697,columnNumber:13},this),e.jsxDEV("input",{type:"number",value:W,onChange:$=>se($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1698,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1696,columnNumber:11},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Paid On"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1701,columnNumber:13},this),e.jsxDEV("input",{type:"date",value:_,onChange:$=>P($.target.value),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1702,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1700,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1695,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1606,columnNumber:7},this),k&&e.jsxDEV("div",{className:"mt-3 text-sm text-red-400",children:k},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1706,columnNumber:17},this),ae&&e.jsxDEV(q,{variant:"light",className:"mt-3 p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-1",children:"Preview — Account mapping"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1709,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1",children:["Document: Expense • Date used: ",ae.dateUsed]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1710,columnNumber:11},this),e.jsxDEV("ul",{className:"text-sm space-y-1",children:(Array.isArray(ae.entries)?ae.entries:[]).map(($,te)=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:String($.type).toUpperCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1714,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",children:[$.accountCode," ",$.accountName?`— ${$.accountName}`:""]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1715,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:["$",Number($.amount||0).toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1716,columnNumber:17},this)]},te,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1713,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1711,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1708,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",onClick:t,disabled:z,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1723,columnNumber:9},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 disabled:opacity-60",onClick:Ve,disabled:Ee||z||!i||!(parseFloat(f||"0")>0||T.some($=>parseFloat($.amount||"0")>0)),children:"Preview"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1724,columnNumber:9},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:Be,disabled:z||!i||!(parseFloat(f||"0")>0||T.some($=>parseFloat($.amount||"0")>0)),children:"Create"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1725,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1722,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/transactions/Invoices.tsx",lineNumber:1597,columnNumber:5},this)}function jb(){const[t,s]=c.useState([]),[i,r]=c.useState(""),[n,o]=c.useState(!1),[a,l]=c.useState(!1),[m,h]=c.useState(null),[u,b]=c.useState(1),[f,x]=c.useState(10),g=async()=>{o(!0);try{const C=await lr.listCustomers(i.trim()||void 0);s(C)}catch(C){try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:C?.message||"Failed to load customers",type:"error"}}))}catch{}}finally{o(!1)}};c.useEffect(()=>{g()},[]);const N=c.useMemo(()=>{const C=i.trim().toLowerCase();return C?t.filter(S=>S.name?.toLowerCase().includes(C)||S.email?.toLowerCase().includes(C)||(S.company||"").toLowerCase().includes(C)):t},[t,i]),p=N.length,v=Math.max(1,Math.ceil(p/f)),E=Math.min(u,v),w=c.useMemo(()=>{const C=(E-1)*f;return N.slice(C,C+f)},[N,E,f]);return e.jsxDEV("div",{className:"p-4 sm:p-6",children:e.jsxDEV("div",{className:"max-w-6xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl font-semibold",children:"Customers"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Manage your client directory"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:65,columnNumber:11},this),e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:()=>l(!0),children:"New Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:64,columnNumber:9},this),e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxDEV("input",{placeholder:"Search by name, company, or email",value:i,onChange:C=>r(C.target.value),className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"px-3 py-2 rounded-lg border border-white/10 bg-white/10",onClick:g,children:"Search"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg border border-white/10 bg-white/10",onClick:()=>{r(""),g()},children:"Reset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Rows per page"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:88,columnNumber:15},this),e.jsxDEV("select",{className:"px-2 py-1 rounded bg-white/10 border border-white/10",value:f,onChange:C=>{x(Number(C.target.value)),b(1)},children:[10,20,50].map(C=>e.jsxDEV("option",{value:C,children:C},C,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:90,columnNumber:40},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:[Math.min((E-1)*f+1,p),"-",Math.min(E*f,p)," of ",p]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:94,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{className:"px-2 py-1 rounded border border-white/10 bg-white/10 disabled:opacity-50",disabled:E<=1,onClick:()=>b(C=>Math.max(1,C-1)),children:"Prev"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:96,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded border border-white/10 bg-white/10 disabled:opacity-50",disabled:E>=v,onClick:()=>b(C=>Math.min(v,C+1)),children:"Next"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:97,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:86,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(q,{variant:"light",className:"p-0 overflow-hidden",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full text-sm",children:[e.jsxDEV("thead",{className:"reports-thead",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"py-2 text-left",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:109,columnNumber:21},this),e.jsxDEV("th",{className:"py-2 text-left",children:"Company"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:110,columnNumber:21},this),e.jsxDEV("th",{className:"py-2 text-left",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:111,columnNumber:21},this),e.jsxDEV("th",{className:"py-2 text-left",children:"Phone"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:112,columnNumber:21},this),e.jsxDEV("th",{className:"py-2 text-left",children:"Actions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:113,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:108,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:107,columnNumber:17},this),e.jsxDEV("tbody",{children:[n&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"p-4 text-center text-secondary-contrast",children:"Loading..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:118,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:118,columnNumber:21},this),!n&&N.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"p-4 text-center text-secondary-contrast",children:"No customers found"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:121,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:121,columnNumber:21},this),!n&&w.map(C=>e.jsxDEV("tr",{className:"border-t border-white/10 hover:bg-white/5",children:[e.jsxDEV("td",{className:"px-4 py-2 font-medium",children:C.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:125,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-2",children:C.company||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:126,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-2",children:C.email},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:127,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-2",children:C.phone||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:128,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-2",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Zb,{customer:C,onSaved:g},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:131,columnNumber:27},this),e.jsxDEV("button",{className:"px-2 py-1 rounded border border-white/10 bg-white/10",onClick:()=>h(C),children:"Edit Modal"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:132,columnNumber:27},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:130,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:129,columnNumber:23},this)]},C.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:124,columnNumber:21},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:106,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:105,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV(_e,{children:[a&&e.jsxDEV(Vb,{onClose:()=>{l(!1),g()}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:145,columnNumber:13},this),m&&e.jsxDEV(Sb,{customer:m,onClose:()=>{h(null),g()}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:143,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:63,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:62,columnNumber:5},this)}function Vb({onClose:t}){const[s,i]=c.useState(""),[r,n]=c.useState(""),[o,a]=c.useState(""),[l,m]=c.useState(!1),[h,u]=c.useState(null),b=async()=>{if(u(null),!s.trim()||!r.trim()){u("Name and Email are required");try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Name and Email are required",type:"error"}}))}catch{}return}try{m(!0),await lr.createCustomer({name:s.trim(),email:r.trim(),company:o.trim()||void 0});try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Customer created",type:"success"}}))}catch{}t()}catch(f){const x=f?.response?.data?.error||f?.message||"Failed to create customer";u(x);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:x,type:"error"}}))}catch{}}finally{m(!1)}};return e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-end sm:items-center justify-center p-4",onClick:t,children:e.jsxDEV(R.div,{initial:{opacity:0,y:40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:40,scale:.98},className:"w-full max-w-lg",onClick:f=>f.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"New Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Add a new client to your directory"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:195,columnNumber:13},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:t,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:199,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:194,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:204,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:s,onChange:f=>i(f.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:205,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:203,columnNumber:13},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:208,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:r,onChange:f=>n(f.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:209,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV("label",{className:"flex flex-col gap-1 sm:col-span-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Company"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:212,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:o,onChange:f=>a(f.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:202,columnNumber:11},this),h&&e.jsxDEV("div",{className:"mt-3 text-sm text-red-400",children:h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:217,columnNumber:21},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",onClick:t,children:"Cancel"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:219,columnNumber:13},this),e.jsxDEV("button",{disabled:l,className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:b,children:l?"Saving...":"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:220,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:218,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:186,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:185,columnNumber:5},this)}function Zb({customer:t,onSaved:s}){const[i,r]=c.useState(!1),[n,o]=c.useState(t.name),[a,l]=c.useState(t.email),[m,h]=c.useState(t.company||""),[u,b]=c.useState(!1),f=async()=>{try{b(!0),await lr.updateCustomer(t.id,{name:n.trim(),email:a.trim(),company:m.trim()||void 0});try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Customer updated",type:"success"}}))}catch{}r(!1),s()}catch(x){const g=x?.response?.data?.error||x?.message||"Failed to update customer";try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:g,type:"error"}}))}catch{}}finally{b(!1)}};return e.jsxDEV("div",{className:"flex items-center gap-2",children:i?e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center",children:[e.jsxDEV("input",{className:"px-2 py-1 rounded bg-white/10 border border-white/10",value:n,onChange:x=>o(x.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:256,columnNumber:11},this),e.jsxDEV("input",{className:"px-2 py-1 rounded bg-white/10 border border-white/10",value:a,onChange:x=>l(x.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:257,columnNumber:11},this),e.jsxDEV("input",{className:"px-2 py-1 rounded bg-white/10 border border-white/10",value:m,onChange:x=>h(x.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{disabled:u,className:"px-2 py-1 rounded bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:f,children:u?"Saving...":"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:260,columnNumber:13},this),e.jsxDEV("button",{className:"px-2 py-1 rounded border border-white/10 bg-white/10",onClick:()=>r(!1),children:"Cancel"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:261,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:259,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:255,columnNumber:9},this):e.jsxDEV("button",{className:"px-2 py-1 rounded border border-white/10 bg-white/10",onClick:()=>r(!0),children:"Edit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:253,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:251,columnNumber:5},this)}function Sb({customer:t,onClose:s}){const[i,r]=c.useState(t.name),[n,o]=c.useState(t.email),[a,l]=c.useState(t.company||""),[m,h]=c.useState(t.phone||""),[u,b]=c.useState(!1),[f,x]=c.useState(null),g=async()=>{if(x(null),!i.trim()||!n.trim()){x("Name and Email are required");return}try{b(!0),await lr.updateCustomer(t.id,{name:i.trim(),email:n.trim(),company:a.trim()||void 0,phone:m.trim()||void 0}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Customer updated",type:"success"}})),s()}catch(N){const p=N?.response?.data?.error||N?.message||"Failed to update customer";x(p),window.dispatchEvent(new CustomEvent("toast",{detail:{message:p,type:"error"}}))}finally{b(!1)}};return e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-end sm:items-center justify-center p-4",onClick:s,children:e.jsxDEV(R.div,{initial:{opacity:0,y:40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:40,scale:.98},className:"w-full max-w-lg",onClick:N=>N.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-6 glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Edit Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:309,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Update client details"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:310,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:308,columnNumber:13},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:312,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:307,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:317,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:i,onChange:N=>r(N.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:318,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:316,columnNumber:13},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:321,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:n,onChange:N=>o(N.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:322,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:320,columnNumber:13},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Company"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:325,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:a,onChange:N=>l(N.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:326,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:324,columnNumber:13},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Phone"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:329,columnNumber:15},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:m,onChange:N=>h(N.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:328,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:315,columnNumber:11},this),f&&e.jsxDEV("div",{className:"mt-3 text-sm text-red-400",children:f},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:334,columnNumber:21},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",onClick:s,children:"Cancel"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:336,columnNumber:13},this),e.jsxDEV("button",{disabled:u,className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:g,children:u?"Saving…":"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:337,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:335,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:306,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:299,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/customers/Customers.tsx",lineNumber:298,columnNumber:5},this)}async function Rb(){const{data:t}=await X.get("/api/categories/pending");return Array.isArray(t?.pending)?t.pending:[]}async function kb(t,s){const{data:i}=await X.post(`/api/categories/pending/${t}/approve`,s||{});return i?.category}async function Ab(t,s){const{data:i}=await X.post(`/api/categories/pending/${t}/reject`,{existingCategoryId:s});return i}const Cr={getPending:Rb,approveCategory:kb,rejectCategory:Ab};async function Ib(t,s){const{data:i}=await X.post("/api/categories/ai/suggest",{description:t,vendorName:s});return i?.result}function _b(){const[t,s]=c.useState([]),[i,r]=c.useState(!1),[n,o]=c.useState(null),[a,l]=c.useState({}),m=async()=>{r(!0),o(null);try{const f=await Cr.getPending();s(f)}catch(f){o(f?.message||"Failed to load pending categories")}finally{r(!1)}};c.useEffect(()=>{m()},[]);const h=(f,x,g)=>{l(N=>({...N,[f]:{...N[f]||{},[x]:g}}))},u=async f=>{try{await Cr.approveCategory(f,a[f]||{}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Category approved",type:"success"}})),l(x=>{const g={...x};return delete g[f],g}),m()}catch(x){window.dispatchEvent(new CustomEvent("toast",{detail:{message:x?.message||"Approve failed",type:"error"}}))}},b=async f=>{const x=prompt("Map to existing category ID?")?.trim();if(x)try{await Cr.rejectCategory(f,x),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Suggestion rejected",type:"success"}})),m()}catch(g){window.dispatchEvent(new CustomEvent("toast",{detail:{message:g?.message||"Reject failed",type:"error"}}))}};return i?e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Loading…"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:61,columnNumber:23},this):n?e.jsxDEV("div",{className:"text-sm text-red-400",children:n},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:62,columnNumber:21},this):t.length?e.jsxDEV("div",{className:"space-y-3",children:t.map(f=>e.jsxDEV("div",{className:"border border-white/10 rounded-lg p-3 bg-white/5",children:e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2 items-center",children:[e.jsxDEV("input",{defaultValue:f.name||"",placeholder:"Name",onChange:x=>h(f.id,"name",x.target.value),className:"px-2 py-1 rounded bg-white/10 border border-white/10"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("input",{defaultValue:f.key||"",placeholder:"Key",onChange:x=>h(f.id,"key",x.target.value),className:"px-2 py-1 rounded bg-white/10 border border-white/10"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:76,columnNumber:13},this),e.jsxDEV("input",{defaultValue:f.accountCode||"",placeholder:"Account Code",onChange:x=>h(f.id,"accountCode",x.target.value),className:"px-2 py-1 rounded bg-white/10 border border-white/10"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:82,columnNumber:13},this),e.jsxDEV("input",{defaultValue:f.description||"",placeholder:"Description",onChange:x=>h(f.id,"description",x.target.value),className:"px-2 py-1 rounded bg-white/10 border border-white/10"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:88,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2 justify-end",children:[e.jsxDEV("button",{className:"px-2 py-1 text-sm rounded bg-primary/20 text-primary border border-primary/30",onClick:()=>u(f.id),children:"Approve"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("button",{className:"px-2 py-1 text-sm rounded bg-red-500/15 text-red-400 border border-red-400/30",onClick:()=>b(f.id),children:"Reject"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:96,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:69,columnNumber:11},this)},f.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:68,columnNumber:9},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:66,columnNumber:5},this):e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"No pending suggestions."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/ai/AICategories.tsx",lineNumber:63,columnNumber:29},this)}async function Tb(){try{const{data:t}=await X.get("/api/company-profile");return{legalName:t?.legalName||"",aliases:Array.isArray(t?.aliases)?t.aliases:[],email:t?.email||"",addressLines:Array.isArray(t?.addressLines)?t.addressLines:[],city:t?.city||"",state:t?.state||"",zipCode:t?.zipCode||"",country:t?.country||"US",timeZone:t?.timeZone||null,taxRegime:t?.taxRegime||null,taxAccounts:t?.taxAccounts||null}}catch{return{legalName:"",aliases:[],email:"",addressLines:[],city:"",state:"",zipCode:"",country:"US",timeZone:null}}}async function Pb(t){const s=Array.isArray(t.aliases)?t.aliases.map(r=>r?.toString().trim()).filter(Boolean):[],{data:i}=await X.put("/api/company-profile",{...t,aliases:s});return{ok:!!i?.ok}}const jr={getCompanyProfile:Tb,saveCompanyProfile:Pb};function Mb(){const[t,s]=c.useState([]),[i,r]=c.useState(!1),[n,o]=c.useState(null),[a,l]=c.useState(()=>({open:!1})),[m,h]=c.useState({open:!1}),[u,b]=c.useState({open:!1,entries:[]}),[f,x]=c.useState(null),g=async()=>{try{r(!0),o(null);const p=await gs.listRecurring();s(Array.isArray(p)?p:[])}catch(p){o(p?.message||"Failed to load recurring rules")}finally{r(!1)}};c.useEffect(()=>{g()},[]),c.useEffect(()=>{const p=()=>g(),v=()=>{try{document.visibilityState==="visible"&&g()}catch{}};try{window.addEventListener("recurring:updated",p)}catch{}try{window.addEventListener("data:refresh",p)}catch{}try{document.addEventListener("visibilitychange",v)}catch{}const E=window.setInterval(()=>{try{document.visibilityState==="visible"&&g()}catch{}},3e4),w=()=>x(null);try{document.addEventListener("click",w)}catch{}return()=>{try{window.removeEventListener("recurring:updated",p)}catch{}try{window.removeEventListener("data:refresh",p)}catch{}try{document.removeEventListener("visibilitychange",v)}catch{}try{document.removeEventListener("click",w)}catch{}window.clearInterval(E)}},[]);const N=async(p,v)=>{try{v==="pause"&&await gs.pauseRecurring(p),v==="resume"&&await gs.resumeRecurring(p),v==="run"&&await gs.runRecurringNow(),v==="delete"&&await gs.updateRecurring(p,{isActive:!1}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Action completed",type:"success"}})),await g()}catch(E){window.dispatchEvent(new CustomEvent("toast",{detail:{message:E?.message||"Action failed",type:"error"}}))}};return e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Recurring Manager"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:70,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Create and manage recurring rules"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:69,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-primary/10 text-primary border border-primary/30",onClick:async()=>{try{await gs.runRecurringNow(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Triggered Run Due Now",type:"success"}})),await g();try{window.dispatchEvent(new Event("recurring:updated"))}catch{}}catch(p){window.dispatchEvent(new CustomEvent("toast",{detail:{message:p?.message||"Run failed",type:"error"}}))}},children:"Run Due Now"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",onClick:async()=>{try{const p=await gs.simulateNextRun();h({open:!0,json:p}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Simulated next run (dry‑run)",type:"success"}}))}catch(p){window.dispatchEvent(new CustomEvent("toast",{detail:{message:p?.message||"Simulation failed",type:"error"}}))}},children:"Simulate Due"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:()=>l({open:!0}),children:"New Rule"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:73,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:68,columnNumber:7},this),i&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Loading…"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:97,columnNumber:19},this),n&&e.jsxDEV("div",{className:"text-sm text-red-400",children:n},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:98,columnNumber:17},this),e.jsxDEV("div",{className:"rounded-lg border border-white/10",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full min-w-[780px] text-sm table-auto",children:[e.jsxDEV("thead",{className:"bg-surface/60",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:105,columnNumber:15},this),e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:106,columnNumber:15},this),e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Cadence"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:107,columnNumber:15},this),e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Next Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Last Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("th",{className:"text-left px-3 py-2",children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:110,columnNumber:15},this),e.jsxDEV("th",{className:"text-right px-3 py-2",children:"Actions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:111,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:104,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:103,columnNumber:11},this),e.jsxDEV("tbody",{className:"align-top",children:[t.map(p=>e.jsxDEV("tr",{className:"border-t border-white/10 align-top",children:[e.jsxDEV("td",{className:"px-3 py-2 truncate",children:p.name||p.payload?.description||p.payload?.vendorName||p.payload?.customerName||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:117,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-2",children:String(p.type).toLowerCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:118,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-2",children:p.cadence},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:119,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-2",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"whitespace-nowrap",children:(p.nextRunAt||"").slice(0,10)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:122,columnNumber:21},this),e.jsxDEV("button",{className:"px-2 py-0.5 text-xs rounded border border-white/10 hover:bg-white/10",onClick:async()=>{try{const v=await gs.getOccurrences(p.id,3);window.dispatchEvent(new CustomEvent("toast",{detail:{message:`Upcoming: ${v.join(" • ")||"-"}`,type:"info",duration:3500}}))}catch(v){window.dispatchEvent(new CustomEvent("toast",{detail:{message:v?.message||"Failed to fetch occurrences",type:"error"}}))}},children:"Upcoming"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:123,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:121,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-2 whitespace-nowrap",children:p.lastRunAt?String(p.lastRunAt).slice(0,10):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-2",children:p.isActive?"Active":"Paused"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:134,columnNumber:17},this),e.jsxDEV("td",{className:"px-3 py-1 align-top",children:e.jsxDEV("div",{className:"relative flex justify-end",children:[e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded border border-white/10 hover:bg-white/10",onClick:v=>{v.stopPropagation(),x(f===p.id?null:p.id)},children:"⋯"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:137,columnNumber:21},this),f===p.id&&e.jsxDEV("div",{className:"absolute right-0 top-full mt-1 z-20 min-w-[160px] rounded-lg border border-white/10 bg-surface/80 backdrop-blur-xl shadow-xl p-1 text-sm",onClick:v=>v.stopPropagation(),children:[e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:()=>{l({open:!0,rule:p}),x(null)},children:"Edit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:140,columnNumber:25},this),p.isActive?e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:()=>{N(p.id,"pause"),x(null)},children:"Pause"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:142,columnNumber:27},this):e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:()=>{N(p.id,"resume"),x(null)},children:"Resume"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:144,columnNumber:27},this),e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:async()=>{try{const v=await gs.simulateNextRun(p.id);h({open:!0,json:v}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Preview simulated (dry‑run)",type:"success"}}))}catch(v){window.dispatchEvent(new CustomEvent("toast",{detail:{message:v?.message||"Simulation failed",type:"error"}}))}finally{x(null)}},children:"Preview"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:146,columnNumber:25},this),e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:async()=>{try{await gs.forceRunRule(p.id),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Forced one run for this rule",type:"success"}})),await g(),window.dispatchEvent(new Event("data:refresh"));try{window.dispatchEvent(new Event("recurring:updated"))}catch{}}catch(v){window.dispatchEvent(new CustomEvent("toast",{detail:{message:v?.message||"Force run failed",type:"error"}}))}finally{x(null)}},children:"Force"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:155,columnNumber:25},this),e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:()=>{try{const v=Array.isArray(p?.payload?.__runLog)?p.payload.__runLog:[];if(!v.length){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"No run log yet for this rule",type:"info"}}));return}b({open:!0,entries:v})}catch{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"No run log available",type:"info"}}))}finally{x(null)}},children:"View Log"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:166,columnNumber:25},this),e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10",onClick:()=>{N(p.id,"run"),x(null)},children:"Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:178,columnNumber:25},this),e.jsxDEV("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-white/10 text-red-300",onClick:()=>{N(p.id,"delete"),x(null)},children:"Delete"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:179,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:139,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:136,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:135,columnNumber:17},this)]},p.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:116,columnNumber:15},this)),t.length===0&&!i&&e.jsxDEV("tr",{children:e.jsxDEV("td",{className:"px-3 py-4 text-secondary-contrast",colSpan:7,children:"No rules yet"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:187,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:187,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:102,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:101,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:100,columnNumber:7},this),a.open&&e.jsxDEV(Lb,{rule:a.rule,onClose:()=>l({open:!1}),onSaved:async()=>{l({open:!1}),await g()}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:195,columnNumber:9},this),m.open&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:()=>h({open:!1}),children:e.jsxDEV("div",{className:"relative w-[96%] max-w-3xl",onClick:p=>p.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Simulation Preview (dry‑run)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:207,columnNumber:19},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>h({open:!1}),children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:208,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:206,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-2",children:"These results are for development only and should be removed/hidden in production."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:210,columnNumber:17},this),e.jsxDEV("pre",{className:"text-xs bg-white/5 border border-white/10 rounded p-3 max-h-[60vh] overflow-auto",children:JSON.stringify(m.json,null,2)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:211,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:205,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:204,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:203,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:202,columnNumber:9},this),u.open&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:()=>b({open:!1,entries:[]}),children:e.jsxDEV("div",{className:"relative w-[96%] max-w-3xl",onClick:p=>p.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Run Log (last 20)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:223,columnNumber:19},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>b({open:!1,entries:[]}),children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:224,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:222,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-2",children:"DEV view for debugging. Hide/remove for production."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:226,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2 max-h-[60vh] overflow-auto",children:u.entries.map((p,v)=>e.jsxDEV("div",{className:"p-2 rounded border border-white/10 bg-white/5",children:[e.jsxDEV("div",{className:"text-xs",children:["At: ",e.jsxDEV("span",{className:"text-foreground/80",children:String(p.at||"")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:230,columnNumber:52},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:230,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs",children:["Run Date: ",e.jsxDEV("span",{className:"text-foreground/80",children:String(p.runDate||"")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:231,columnNumber:58},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:231,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs",children:["Result: ",e.jsxDEV("span",{className:"text-foreground/80",children:String(p.result||"")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:232,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:232,columnNumber:23},this),p.transactionId&&e.jsxDEV("div",{className:"text-xs",children:["Txn: ",e.jsxDEV("span",{className:"text-foreground/80",children:String(p.transactionId)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:233,columnNumber:78},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:233,columnNumber:48},this),p.errors&&e.jsxDEV("pre",{className:"text-[11px] bg-white/5 border border-white/10 rounded p-2 mt-1",children:JSON.stringify(p.errors,null,2)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:234,columnNumber:41},this)]},v,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:229,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:227,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:221,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:220,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:219,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:218,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:67,columnNumber:5},this)}function Lb({rule:t,onClose:s,onSaved:i}){const[r,n]=c.useState(t?.type||"EXPENSE"),[o,a]=c.useState(t?.name||""),[l,m]=c.useState(t?.cadence||"MONTHLY"),[h,u]=c.useState((t?.startDate||new Date().toISOString().slice(0,10)).slice(0,10)),[b,f]=c.useState((t?.endDate||"").slice(0,10)),[x,g]=c.useState(String(t?.payload?.amount??"")),[N,p]=c.useState(String(t?.payload?.vendorName||t?.payload?.customerName||"")),[v,E]=c.useState(String(t?.payload?.description||"")),[w,C]=c.useState(t?.weekday??""),[S,Z]=c.useState(t?.dayOfMonth??""),[D,T]=c.useState(!!(t?.payload?.__options||{})?.endOfMonth),[U,W]=c.useState((t?.payload?.__options||{})?.nthWeek??""),[se,_]=c.useState((t?.payload?.__options||{})?.nthWeekday??""),[P,B]=c.useState([]),[le,H]=c.useState(!1),[G,z]=c.useState(String((t?.payload?.__options||{})?.pauseUntil||"")),[V,k]=c.useState(String((t?.payload?.__options||{})?.resumeOn||"")),[Y,ae]=c.useState(String((t?.payload?.__options||{})?.dueDays??"")),[de,Ee]=c.useState(String(t?.payload?.dueDate||"")),[je,Fe]=c.useState(t?.nextRunAt?String(t.nextRunAt).slice(0,10):h);c.useEffect(()=>{const A={weekday:w===""?null:Number(w),dayOfMonth:S===""?null:Number(S),endOfMonth:!!D,nthWeek:U===""?null:Number(U),nthWeekday:se===""?null:Number(se)};try{B(Vl(h,l,A,3))}catch{B([])}},[h,l,w,S,D,U,se]);const ee=async()=>{try{H(!0);const A={amount:parseFloat(x||"0"),description:v||void 0};r==="EXPENSE"?A.vendorName=N:A.customerName=N;const oe={name:o||void 0,type:r,cadence:l,startDate:h,endDate:b||void 0,payload:A,nextRunAt:je};oe.dayOfMonth=S===""?void 0:Number(S),oe.weekday=w===""?void 0:Number(w),A.__options={endOfMonth:D,nthWeek:U===""?void 0:Number(U),nthWeekday:se===""?void 0:Number(se),pauseUntil:G||void 0,resumeOn:V||void 0,dueDays:Y===""?void 0:Math.max(0,Math.min(365,Number(Y)||0))},de&&(A.dueDate=de),t?await gs.updateRecurring(t.id,oe):await gs.createRecurring(oe),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Rule saved",type:"success"}})),i()}catch(A){window.dispatchEvent(new CustomEvent("toast",{detail:{message:A?.message||"Failed to save rule",type:"error"}}))}finally{H(!1)}};return e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:s,children:e.jsxDEV("div",{className:"relative w-[96%] max-w-2xl",onClick:A=>A.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:t?"Edit Recurring Rule":"New Recurring Rule"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:328,columnNumber:15},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:327,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:334,columnNumber:17},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:r,onChange:A=>n(A.target.value),children:[e.jsxDEV("option",{value:"EXPENSE",children:"Expense (Vendor Bill)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:336,columnNumber:19},this),e.jsxDEV("option",{value:"INVOICE",children:"Invoice (Revenue)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:337,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:335,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:333,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Name (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:341,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:o,onChange:A=>a(A.target.value),placeholder:"Monthly Adobe"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:342,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:340,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Cadence"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:345,columnNumber:17},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:l,onChange:A=>m(A.target.value),children:[e.jsxDEV("option",{value:"DAILY",children:"Daily"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:347,columnNumber:19},this),e.jsxDEV("option",{value:"WEEKLY",children:"Weekly"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:348,columnNumber:19},this),e.jsxDEV("option",{value:"MONTHLY",children:"Monthly"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:349,columnNumber:19},this),e.jsxDEV("option",{value:"ANNUAL",children:"Annually"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:350,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:346,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:344,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Start"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:354,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:h,onChange:A=>u(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:355,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:353,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"End (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:358,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:b,onChange:A=>f(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:359,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:357,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Next Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:362,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:je,onChange:A=>Fe(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:363,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:361,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:366,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:x,onChange:A=>g(A.target.value),placeholder:"0.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:367,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:365,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:r==="EXPENSE"?"Vendor":"Customer"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:370,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:N,onChange:A=>p(A.target.value),placeholder:r==="EXPENSE"?"Adobe":"Acme"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:371,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:369,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1 sm:col-span-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Description"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:374,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:v,onChange:A=>E(A.target.value),placeholder:"Subscription for …"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:375,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:373,columnNumber:15},this),l==="WEEKLY"&&e.jsxDEV(e.Fragment,{children:e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Weekday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:382,columnNumber:21},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:w===""?"":String(w),onChange:A=>C(A.target.value===""?"":Number(A.target.value)),children:[e.jsxDEV("option",{value:"",children:"Same weekday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:384,columnNumber:23},this),e.jsxDEV("option",{value:"0",children:"Sunday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:385,columnNumber:23},this),e.jsxDEV("option",{value:"1",children:"Monday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:386,columnNumber:23},this),e.jsxDEV("option",{value:"2",children:"Tuesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:387,columnNumber:23},this),e.jsxDEV("option",{value:"3",children:"Wednesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:388,columnNumber:23},this),e.jsxDEV("option",{value:"4",children:"Thursday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:389,columnNumber:23},this),e.jsxDEV("option",{value:"5",children:"Friday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:390,columnNumber:23},this),e.jsxDEV("option",{value:"6",children:"Saturday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:391,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:383,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:381,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:380,columnNumber:17},this),l==="MONTHLY"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Day of month",children:"Runs on this calendar day each month (1–31). If the month has fewer days, we clamp to the month end."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:400,columnNumber:21},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",type:"number",min:1,max:31,value:S===""?"":String(S),onChange:A=>Z(A.target.value===""?"":Number(A.target.value)),placeholder:"1..31"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:401,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:399,columnNumber:19},this),e.jsxDEV("label",{className:"flex items-center gap-2 mt-7",children:[e.jsxDEV("input",{type:"checkbox",checked:D,onChange:A=>T(A.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:404,columnNumber:21},this),e.jsxDEV(ns,{label:"Run on end of month",children:"Always schedule on the last day of each month, accounting for variable month lengths."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:405,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:403,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Nth week (1..5, 5=last)",children:"Choose which week of the month (1st to 4th; 5th = last occurrence) to use with the weekday below."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:408,columnNumber:21},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",type:"number",min:1,max:5,value:U===""?"":String(U),onChange:A=>W(A.target.value===""?"":Number(A.target.value))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:407,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Nth weekday",children:"Paired with Nth week. For example, 3rd Tuesday of each month."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:412,columnNumber:21},this),e.jsxDEV(ot,{value:se===""?"":String(se),onChange:A=>_(A.target.value===""?"":Number(A.target.value)),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:414,columnNumber:23},this),e.jsxDEV("option",{value:"0",children:"Sunday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:415,columnNumber:23},this),e.jsxDEV("option",{value:"1",children:"Monday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:416,columnNumber:23},this),e.jsxDEV("option",{value:"2",children:"Tuesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:417,columnNumber:23},this),e.jsxDEV("option",{value:"3",children:"Wednesday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:418,columnNumber:23},this),e.jsxDEV("option",{value:"4",children:"Thursday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:419,columnNumber:23},this),e.jsxDEV("option",{value:"5",children:"Friday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:420,columnNumber:23},this),e.jsxDEV("option",{value:"6",children:"Saturday"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:421,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:413,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:411,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:398,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Due Terms",children:"Pick a preset or enter custom days (0–365). Computed from Start date per run."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:429,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ot,{value:["0","14","30","45","60","90"].includes(Y)?Y:"",onChange:A=>ae(A.target.value||Y),children:[e.jsxDEV("option",{value:"",children:"Custom"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:432,columnNumber:21},this),e.jsxDEV("option",{value:"0",children:"Net 0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:433,columnNumber:21},this),e.jsxDEV("option",{value:"14",children:"Net 14"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:434,columnNumber:21},this),e.jsxDEV("option",{value:"30",children:"Net 30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:435,columnNumber:21},this),e.jsxDEV("option",{value:"45",children:"Net 45"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:436,columnNumber:21},this),e.jsxDEV("option",{value:"60",children:"Net 60"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:437,columnNumber:21},this),e.jsxDEV("option",{value:"90",children:"Net 90"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:438,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:431,columnNumber:19},this),e.jsxDEV("input",{type:"number",min:0,max:365,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 w-24",value:Y,onChange:A=>ae(A.target.value),placeholder:"days"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:440,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:430,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:428,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV(ns,{label:"Manual Due Date (optional)",children:"If set, overrides Due Terms for each occurrence."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:444,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:de,onChange:A=>Ee(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:445,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:443,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Pause until (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:450,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:G,onChange:A=>z(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:451,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:449,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Resume on (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:454,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",value:V,onChange:A=>k(A.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:455,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:453,columnNumber:15},this),e.jsxDEV("div",{className:"sm:col-span-2",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Next 3 occurrences:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:459,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm",children:P.join(" • ")||"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:460,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:458,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:332,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border bg-white/10 border-white/10",onClick:()=>{z(""),k("")},disabled:le,children:"Clear Pause/Resume"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:465,columnNumber:15},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border bg-white/10 border-white/10",onClick:s,disabled:le,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:466,columnNumber:15},this),e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:ee,disabled:le||!N||!x,children:"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:467,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:464,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:326,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:325,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:324,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/RecurringManager.tsx",lineNumber:323,columnNumber:5},this)}async function jn(){const{data:t}=await X.get("/api/memberships");return Array.isArray(t?.memberships)?t.memberships:[]}async function Ob(){const{data:t}=await X.get("/api/members");return Array.isArray(t?.members)?t.members:[]}async function Fb(t,s="MEMBER"){const{data:i}=await X.post("/api/members",{userId:t,role:s});return i?.member}async function Ub(t,s){const{data:i}=await X.put(`/api/members/${encodeURIComponent(t)}`,{role:s});return i?.member}async function $b(t){const{data:s}=await X.delete(`/api/members/${encodeURIComponent(t)}`);return{ok:!!s?.ok}}const Zi={listMembers:Ob,addMember:Fb,updateMemberRole:Ub,removeMember:$b,getUserMemberships:jn};function Sl(){const[t,s]=c.useState([]),[i,r]=c.useState(!1),[n,o]=c.useState(""),[a,l]=c.useState("MEMBER"),m=async()=>{r(!0);try{s(await Zi.listMembers())}catch(f){window.dispatchEvent(new CustomEvent("toast",{detail:{message:f?.message||"Failed to load members",type:"error"}}))}finally{r(!1)}};c.useEffect(()=>{m()},[]);const h=async()=>{if(n.trim())try{await Zi.addMember(n.trim(),a),o(""),l("MEMBER"),await m(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Member added",type:"success"}}))}catch(f){window.dispatchEvent(new CustomEvent("toast",{detail:{message:f?.message||"Failed to add member",type:"error"}}))}},u=async(f,x)=>{try{await Zi.updateMemberRole(f,x),await m(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Role updated",type:"success"}}))}catch(g){window.dispatchEvent(new CustomEvent("toast",{detail:{message:g?.message||"Failed to update role",type:"error"}}))}},b=async f=>{try{await Zi.removeMember(f),await m(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Member removed",type:"success"}}))}catch(x){window.dispatchEvent(new CustomEvent("toast",{detail:{message:x?.message||"Failed to remove member",type:"error"}}))}};return e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Tenant Members"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:43,columnNumber:9},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Invite users by ID and manage roles."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:44,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:42,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsxDEV("input",{className:"flex-1 px-3 py-2 rounded-xl bg-white/10 border border-white/10",placeholder:"User ID (email later with Stripe)",value:n,onChange:f=>o(f.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:48,columnNumber:11},this),e.jsxDEV("select",{className:"px-2 py-2 rounded-xl bg-white/10 border border-white/10",value:a,onChange:f=>l(f.target.value),children:[e.jsxDEV("option",{value:"MEMBER",children:"Member"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:50,columnNumber:13},this),e.jsxDEV("option",{value:"ADMIN",children:"Admin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:51,columnNumber:13},this),e.jsxDEV("option",{value:"OWNER",children:"Owner"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:52,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:49,columnNumber:11},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:h,disabled:i,children:"Add"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:54,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:47,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"text-left text-secondary-contrast",children:[e.jsxDEV("th",{className:"py-2 pr-2",children:"User"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:60,columnNumber:17},this),e.jsxDEV("th",{className:"py-2 pr-2",children:"Role"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:61,columnNumber:17},this),e.jsxDEV("th",{className:"py-2 pr-2",children:"Actions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:62,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:59,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:58,columnNumber:13},this),e.jsxDEV("tbody",{children:t.map(f=>e.jsxDEV("tr",{className:"border-t border-white/10",children:[e.jsxDEV("td",{className:"py-2 pr-2 break-all",children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{children:f.email||"unknown@email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:70,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs text-secondary-contrast/80",children:f.userId},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:71,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:69,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:68,columnNumber:19},this),e.jsxDEV("td",{className:"py-2 pr-2",children:e.jsxDEV("select",{className:"px-2 py-1 rounded-lg bg-white/10 border border-white/10",value:f.role,onChange:x=>u(f.userId,x.target.value),children:[e.jsxDEV("option",{value:"MEMBER",children:"Member"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:76,columnNumber:23},this),e.jsxDEV("option",{value:"ADMIN",children:"Admin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:77,columnNumber:23},this),e.jsxDEV("option",{value:"OWNER",children:"Owner"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:78,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:75,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:74,columnNumber:19},this),e.jsxDEV("td",{className:"py-2 pr-2",children:e.jsxDEV("button",{className:"px-2 py-1 rounded bg-white/10 border border-white/10",onClick:()=>b(f.userId),children:"Remove"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:82,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:81,columnNumber:19},this)]},f.userId,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:67,columnNumber:17},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:57,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:46,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/TenantMembers.tsx",lineNumber:41,columnNumber:5},this)}function qb(){const[t,s]=c.useState(null),[i,r]=c.useState(null),[n,o]=c.useState(!1),[a,l]=c.useState(""),[m,h]=c.useState(""),[u,b]=c.useState({legalName:"",aliases:[],email:"",addressLines:[],city:"",state:"",zipCode:"",country:"US",timeZone:null,taxRegime:null,taxAccounts:null}),[f,x]=c.useState(!1),[g,N]=c.useState(!1),[p,v]=c.useState(!1),[E,w]=c.useState("MEMBER"),[C,S]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("settings.apSplitLines")||"false")}catch{return!1}});c.useEffect(()=>{let D=!0;return x(!0),jr.getCompanyProfile().then(T=>{if(D){b(T);try{S(!!T?.taxAccounts?.apSplitByLineItems)}catch{}}}).finally(()=>x(!1)),(async()=>{try{const T=await jn(),U=Array.isArray(T)&&T.length>0?T[0]:null;D&&U?.role&&w(U.role)}catch{}})(),()=>{D=!1}},[]),c.useEffect(()=>{try{localStorage.setItem("settings.apSplitLines",JSON.stringify(C))}catch{}},[C]);const Z=async(D,T)=>{try{s(D),r(null);const U=await T(),W=typeof U?.message=="string"?U.message:"Done";r(W);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:W,type:"success"}}))}catch{}}catch(U){const W=U?.response?.data?.error||U?.message||"Operation failed";r(W);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:W,type:"error"}}))}catch{}}finally{s(null)}};return e.jsxDEV("div",{className:"p-4 sm:p-6",children:e.jsxDEV("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsxDEV(q,{variant:"light",className:"p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Company Information"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:78,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Used for identity-aware classification."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:79,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:()=>v(!0),children:"Open"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:75,columnNumber:9},this),p&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e.jsxDEV("div",{className:"modal-overlay absolute inset-0",onClick:()=>v(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:88,columnNumber:15},this),e.jsxDEV("div",{className:"relative w-[96%] max-w-2xl",onClick:D=>D.stopPropagation(),children:e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Company Information"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:93,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Only non‑PII is stored and used."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:94,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:92,columnNumber:21},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>v(!1),children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:96,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:91,columnNumber:19},this),e.jsxDEV("div",{className:"grid gap-3 text-sm",children:[e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Legal name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:100,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.legalName,onChange:D=>b({...u,legalName:D.target.value}),placeholder:"AILegr Solutions Inc"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:101,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:99,columnNumber:13},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Aliases (comma separated)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.aliases.join(", "),onChange:D=>b({...u,aliases:D.target.value.split(",").map(T=>T.trim()).filter(Boolean)}),placeholder:"AILegr, AILegr Inc"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:105,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Business email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.email||"",onChange:D=>b({...u,email:D.target.value}),placeholder:"finance@yourcompany.com"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:109,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:107,columnNumber:13},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Time zone (IANA)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:112,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.timeZone||"",onChange:D=>b({...u,timeZone:D.target.value}),placeholder:"America/New_York"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:113,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mt-1",children:"If set, recurring runs at tenant‑local midnight; otherwise server time is used."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:114,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Tax Regime"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:118,columnNumber:17},this),e.jsxDEV("select",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.taxRegime||"",onChange:D=>b({...u,taxRegime:D.target.value||null}),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:120,columnNumber:19},this),e.jsxDEV("option",{value:"US_SALES_TAX",children:"US Sales Tax (expense)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:121,columnNumber:19},this),e.jsxDEV("option",{value:"VAT",children:"VAT/GST (recoverable)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:117,columnNumber:15},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Tax Accounts (JSON)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:JSON.stringify(u.taxAccounts||{}),onChange:D=>{try{const T=JSON.parse(D.target.value||"{}");b({...u,taxAccounts:T})}catch{}},placeholder:'{"payable":"2150","expense":"6110","receivable":"1360"}'},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:127,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mt-1",children:"Override default codes: payable 2150, expense 6110, receivable 1360."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:130,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV("div",{className:"mt-2 p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-1",children:"Accounting"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:134,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("input",{type:"checkbox",checked:C,onChange:D=>S(D.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:136,columnNumber:17},this),"Split AP postings by line items (multi‑account)"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mt-1",children:"When enabled, AP bills debit per-line expense accounts. Otherwise, a single expense account is used."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:133,columnNumber:13},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Address line 1"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:142,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.addressLines[0]||"",onChange:D=>{const T=[...u.addressLines];T[0]=D.target.value,b({...u,addressLines:T})},placeholder:"123 Tech Park Drive"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:143,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Address line 2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:146,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.addressLines[1]||"",onChange:D=>{const T=[...u.addressLines];T[1]=D.target.value,b({...u,addressLines:T})},placeholder:"Suite 500"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"City"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:151,columnNumber:17},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.city||"",onChange:D=>b({...u,city:D.target.value})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:152,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:150,columnNumber:15},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"State"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:155,columnNumber:17},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.state||"",onChange:D=>b({...u,state:D.target.value})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:156,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:154,columnNumber:15},this),e.jsxDEV("label",{className:"block",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"ZIP"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:159,columnNumber:17},this),e.jsxDEV("input",{className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",value:u.zipCode||"",onChange:D=>b({...u,zipCode:D.target.value})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:160,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:158,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:149,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2 justify-end",children:[e.jsxDEV("button",{disabled:f||g,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 disabled:opacity-60",onClick:async()=>{x(!0);try{b(await jr.getCompanyProfile())}finally{x(!1)}},children:f?"Loading…":"Reload"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:164,columnNumber:15},this),e.jsxDEV("button",{disabled:g,className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:async()=>{N(!0);try{const D={...u,taxAccounts:{...u.taxAccounts||{},apSplitByLineItems:C}},T=await jr.saveCompanyProfile(D);try{localStorage.setItem("settings.apSplitLines",JSON.stringify(C))}catch{}T.ok&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Company profile saved",type:"success"}}))}catch(D){window.dispatchEvent(new CustomEvent("toast",{detail:{message:D?.message||"Failed to save",type:"error"}}))}finally{N(!1)}},children:g?"Saving…":"Save"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",onClick:()=>v(!1),children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:179,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:163,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:98,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:90,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:87,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl font-semibold",children:"Profile & Security"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Manage your account."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:190,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:188,columnNumber:9},this),e.jsxDEV(q,{variant:"light",className:"p-4 hidden",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("button",{disabled:t==="accounts",className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:()=>Z("accounts",()=>_i.ensureCoreAccounts()),children:t==="accounts"?"Ensuring accounts…":"Ensure Core Accounts"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:197,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{disabled:t==="capital",className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:()=>Z("capital",()=>_i.addInitialCapital(1e4)),children:t==="capital"?"Posting capital…":"Add Initial Capital ($10,000)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:206,columnNumber:15},this),e.jsxDEV("button",{disabled:t==="revenue",className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:()=>Z("revenue",()=>_i.addSampleRevenue(5e3)),children:t==="revenue"?"Posting revenue…":"Add Sample Revenue ($5,000)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:213,columnNumber:15},this),e.jsxDEV("button",{disabled:t==="seed-coa",className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:()=>Z("seed-coa",async()=>({message:(await vn("us-gaap"))?.message||"COA seeded (idempotent)"})),children:t==="seed-coa"?"Seeding COA…":"Seed Full COA (US‑GAAP)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:220,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:205,columnNumber:13},this),i&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:i},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:232,columnNumber:24},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:196,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:195,columnNumber:9},this),(E==="OWNER"||E==="ADMIN")&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Mb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:240,columnNumber:13},this),e.jsxDEV(Sl,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:243,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:238,columnNumber:11},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Account Security"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:250,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Update your password."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:251,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:249,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-3 max-w-md",children:[e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"New password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:255,columnNumber:15},this),e.jsxDEV("input",{type:"password",value:a,onChange:D=>l(D.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",placeholder:"Enter new password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:256,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:254,columnNumber:13},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Confirm password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:265,columnNumber:15},this),e.jsxDEV("input",{type:"password",value:m,onChange:D=>h(D.target.value),className:"mt-1 w-full px-3 py-2 rounded-xl bg-white/10 border border-white/10 focus:ring-focus",placeholder:"Confirm new password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:266,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:264,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:e.jsxDEV("button",{disabled:n,className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:async()=>{if(!a||a.length<8){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Password must be at least 8 characters",type:"error"}}));return}if(a!==m){window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Passwords do not match",type:"error"}}));return}try{o(!0);const{error:D}=await hs.auth.updateUser({password:a});if(D)throw D;l(""),h(""),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Password updated",type:"success"}}))}catch(D){window.dispatchEvent(new CustomEvent("toast",{detail:{message:D?.message||"Failed to update password",type:"error"}}))}finally{o(!1)}},children:n?"Updating…":"Update password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:275,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:274,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:253,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:248,columnNumber:9},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"AI Categories — Pending Suggestions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:300,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Approve or map suggestions to existing categories."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:301,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:299,columnNumber:11},this),e.jsxDEV(_b,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:303,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:298,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:73,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/Settings.tsx",lineNumber:72,columnNumber:5},this)}function Bb({onBack:t}){const[s,i]=c.useState("UNKNOWN"),[r,n]=c.useState(null),[o,a]=c.useState(null);return c.useEffect(()=>{let m=!0;return(async()=>{try{const h=await jn(),u=Array.isArray(h)&&h.length>0?h[0]:null;m&&u?.role&&i(u.role)}catch{}try{n((await X.get("/api/ai/usage")).data)}catch{}try{a((await X.get("/api/health")).data)}catch{}})(),()=>{m=!1}},[]),s==="OWNER"||s==="ADMIN"?e.jsxDEV("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:"Admin Panel"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:43,columnNumber:9},this),t&&e.jsxDEV("button",{className:"px-3 py-2 rounded bg-primary/20 text-primary border border-primary/30",onClick:t,children:"Back"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:44,columnNumber:20},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:42,columnNumber:7},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Members"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:50,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Manage team roles for this tenant."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:51,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(Sl,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"mb-2",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Tenant Settings"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Seed/ensure chart of accounts and sample data."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV("button",{className:"px-3 py-2 rounded bg-primary/20 text-primary border border-primary/30",onClick:()=>_i.ensureCoreAccounts(),children:"Ensure Core Accounts"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:63,columnNumber:11},this),e.jsxDEV("button",{className:"px-3 py-2 rounded bg-primary/20 text-primary border border-primary/30",onClick:()=>vn("us-gaap"),children:"Seed Full COA (US‑GAAP)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"AI Usage"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:71,columnNumber:11},this),e.jsxDEV("pre",{className:"mt-2 text-xs whitespace-pre-wrap",children:JSON.stringify(r,null,2)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:70,columnNumber:9},this),e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Server Health"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("pre",{className:"mt-2 text-xs whitespace-pre-wrap",children:JSON.stringify(o,null,2)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:69,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:41,columnNumber:5},this):e.jsxDEV("div",{className:"p-6 max-w-5xl mx-auto",children:e.jsxDEV(q,{variant:"light",className:"p-6",children:[e.jsxDEV("div",{className:"text-lg font-semibold mb-2",children:"Admin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:32,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"You do not have permission to view this page."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:33,columnNumber:11},this),t&&e.jsxDEV("button",{className:"mt-4 px-3 py-2 rounded bg-primary/20 text-primary border border-primary/30",onClick:t,children:"Back"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:34,columnNumber:22},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:31,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/settings/AdminPanel.tsx",lineNumber:30,columnNumber:7},this)}function ei({icon:t,title:s,subtitle:i}){return e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(t,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:25,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:24,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:28,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:i},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:27,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:23,columnNumber:5},this)}function zb({tab:t}){const s=c.useMemo(()=>{switch(t){case"pnl":return["Net profit margin trending upward; consider reinvesting in top services","Software costs increased MoM; review seat counts and unused subscriptions"];case"balance":return["Strong cash ratio; short-term obligations covered comfortably","Debt-to-asset ratio within healthy range; room to finance growth"];case"trial":return["Debits equal credits; no imbalances detected","Highest activity in revenue and payroll accounts this period"];default:return["Top utilized accounts: Cash, Product Sales, Payroll Expense","Consider merging low-activity expense accounts for clarity"]}},[t]);return e.jsxDEV(q,{variant:"light",className:"p-4",children:[e.jsxDEV(ei,{icon:or,title:"AI Financial Insights",subtitle:"Context-aware highlights"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:62,columnNumber:7},this),e.jsxDEV("ul",{className:"list-disc ml-5 space-y-1 text-sm text-foreground/80",children:s.map((i,r)=>e.jsxDEV("li",{children:i},r,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:65,columnNumber:11},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:63,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:61,columnNumber:5},this)}function Hb(){const[t,s]=c.useState("pnl"),[i,r]=c.useState(()=>localStorage.getItem("coa.filter")||"active"),[n,o]=c.useState("Monthly"),[a,l]=c.useState("Aug 2025"),[m,h]=c.useState(""),[u,b]=c.useState("name"),[f,x]=c.useState("asc"),[g,N]=c.useState(null),[p,v]=c.useState(null),[E,w]=c.useState(!1),[C,S]=c.useState(null),[Z,D]=c.useState(null),[T,U]=c.useState(null),[W,se]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("reports.shortcutsOn")||"true")}catch{return!0}}),[_,P]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("reports.compare")||"false")}catch{return!1}}),[B,le]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("reports.compact")||"false")}catch{return!1}}),[H,G]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("reports.printFriendly")||"false")}catch{return!1}}),z={pnl:{category:!0,amount:!0,prev:!1},balance:{section:!0,name:!0,amount:!0,prev:!1},trial:{code:!0,name:!0,debit:!0,credit:!0,prev:!1},coa:{code:!0,name:!0,type:!0,balance:!0,prev:!1}},[V,k]=c.useState(()=>{try{return{...z,...JSON.parse(localStorage.getItem("reports.cols")||"null")||{}}}catch{return z}});c.useEffect(()=>{localStorage.setItem("reports.cols",JSON.stringify(V))},[V]);const Y="reports.viewPresets",[ae,de]=c.useState(()=>{try{return JSON.parse(localStorage.getItem(Y)||"{}")}catch{return{}}}),Ee=(d,j)=>{const I={...ae},J=I[d]?[...I[d]]:[];J.push(j),I[d]=J,de(I),localStorage.setItem(Y,JSON.stringify(I))},je=(d,j)=>{h(j.search),b(j.sortKey),x(j.sortDir),le(j.compact)},Fe=()=>{const d=H;G(!0),setTimeout(()=>{window.print(),setTimeout(()=>G(d),300)},50)};c.useEffect(()=>{localStorage.setItem("reports.shortcutsOn",JSON.stringify(W))},[W]),c.useEffect(()=>{localStorage.setItem("reports.compare",JSON.stringify(_))},[_]),c.useEffect(()=>{localStorage.setItem("reports.compact",JSON.stringify(B))},[B]),c.useEffect(()=>{localStorage.setItem("reports.printFriendly",JSON.stringify(H))},[H]);const ee="reports.tabPrefs";c.useEffect(()=>{try{const d=localStorage.getItem(ee);if(!d)return;const I=(JSON.parse(d)||{})[t];I&&(typeof I.search=="string"&&h(I.search),typeof I.sortKey=="string"&&b(I.sortKey),(I.sortDir==="asc"||I.sortDir==="desc")&&x(I.sortDir))}catch{}},[t]),c.useEffect(()=>{try{const d=localStorage.getItem(ee),j=d?JSON.parse(d):{};j[t]={search:m,sortKey:u,sortDir:f},localStorage.setItem(ee,JSON.stringify(j))}catch{}},[t,m,u,f]),c.useEffect(()=>{n==="Monthly"&&l(new Date().toLocaleString("en-US",{month:"short",year:"numeric"})),n==="Quarterly"&&l("Q3 2025"),n==="YTD"&&l("YTD 2025"),n==="Annual"&&l("2025")},[n]);const A=c.useMemo(()=>{const d=new Date;return n==="Monthly"?new Date(d.getFullYear(),d.getMonth()+1,0).toISOString().slice(0,10):d.toISOString().slice(0,10)},[n]),oe=Et({queryKey:["reports","pnl",n,A,"compare"],queryFn:()=>Cs.getPnl(A,{period:n,compare:!0}),staleTime:6e4,placeholderData:d=>d});c.useEffect(()=>{const d=oe.data;try{if(!d){ce(null),Te(null),Ze(null);return}const j=[...Array.isArray(d.revenue)?d.revenue.map(I=>({name:I.name||I.account||"Revenue",amount:Number(I.amount||0),type:"revenue"})):[],...Array.isArray(d.cogs)?d.cogs.map(I=>({name:I.name||I.account||"COGS",amount:-Math.abs(Number(I.amount||0)),type:"cogs"})):[],...Array.isArray(d.expenses)?d.expenses.map(I=>({name:I.name||I.account||"Expense",amount:-Math.abs(Number(I.amount||0)),type:"expense"})):[]];if(ce(j.length?j:null),d.previous){const I=d.previous,J={};(I.revenue||[]).forEach(Q=>{const re=Q.name||Q.account;J[re]=Number(Q.amount||0)}),(I.cogs||[]).forEach(Q=>{const re=Q.name||Q.account;J[re]=-Math.abs(Number(Q.amount||0))}),(I.expenses||[]).forEach(Q=>{const re=Q.name||Q.account;J[re]=-Math.abs(Number(Q.amount||0))}),Te(J),Ze(I.totals||null)}else Te(null),Ze(null)}catch{}},[oe.data]);const Ne=Et({queryKey:["reports","balance",A],queryFn:()=>Cs.getBalanceSheet(A),staleTime:6e4,placeholderData:d=>d});c.useEffect(()=>{const d=Ne.data;try{if(!d){D(null);return}const j=Array.isArray(d.assets)?d.assets.map(re=>({section:"assets",name:re.name||re.account||"Asset",amount:Number(re.amount||0)})):[],I=Array.isArray(d.liabilities)?d.liabilities.map(re=>({section:"liabilities",name:re.name||re.account||"Liability",amount:Number(re.amount||0)})):[],J=Array.isArray(d.equity)?d.equity.map(re=>({section:"equity",name:re.name||re.account||"Equity",amount:Number(re.amount||0)})):[],Q=[...j,...I,...J];D(Q.length?Q:null)}catch{}},[Ne.data]);const we=Et({queryKey:["reports","trial",A],queryFn:()=>Cs.getTrialBalance(A),staleTime:6e4,placeholderData:d=>d});c.useEffect(()=>{const d=we.data;try{if(d&&Array.isArray(d.rows)){const j=d.rows.map(I=>({code:I.accountCode,name:I.account,debit:Number(I.debit||0),credit:Number(I.credit||0)}));U(j.length?j:null)}else U(null)}catch{}},[we.data]);const Ae=Et({queryKey:["reports","coa"],queryFn:()=>Cs.getChartOfAccounts(),staleTime:6e4,placeholderData:d=>d});c.useEffect(()=>{const d=Ae.data;try{if(!d){He(null);return}const I=(Array.isArray(d.accounts)?d.accounts:[]).map(J=>({code:J.code,name:J.name,type:J.type||"ASSET",balance:Number(J.currentBalance||J.balance||0)}));He(I.length?I:null)}catch{}},[Ae.data]);const Ve=Et({queryKey:["expenses","latest"],queryFn:async()=>{const d=await es.listExpenses();return Array.isArray(d)&&d.length>0?d[0]:null},staleTime:3e4,placeholderData:d=>d});c.useEffect(()=>{K(Ve.data)},[Ve.data]),c.useEffect(()=>{let d=!1;if(!g){v(null),S(null),w(!1);return}return(async()=>{try{w(!0),S(null);const j=await Cs.getAccountTransactions(g.code,100);d||v(j)}catch(j){d||S(j?.message||"Failed to load ledger")}finally{d||w(!1)}})(),()=>{d=!0}},[g]),c.useEffect(()=>{const d=()=>{try{ws.invalidateQueries({queryKey:["reports"]}),ws.invalidateQueries({queryKey:["expenses","latest"]})}catch{}};return window.addEventListener("data:refresh",d),()=>window.removeEventListener("data:refresh",d)},[n]),c.useEffect(()=>{if(!W)return;const d=j=>{j.target?.tagName!=="INPUT"&&(j.key==="1"&&s("pnl"),j.key==="2"&&s("balance"),j.key==="3"&&s("trial"),j.key==="4"&&s("coa"),j.key.toLowerCase()==="x"&&document.getElementById("reports-export-btn")?.click())};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[W,t,n]);const Be=d=>{u===d?x(f==="asc"?"desc":"asc"):(b(d),x("asc"))},Re=(d,j)=>d.filter(I=>j.some(J=>String(I[J]??"").toLowerCase().includes(m.toLowerCase()))),$=(d,j)=>d.slice().sort((I,J)=>{const Q=I[j],re=J[j];return typeof Q=="number"&&typeof re=="number"?f==="asc"?Q-re:re-Q:f==="asc"?String(Q).localeCompare(String(re)):String(re).localeCompare(String(Q))}),[te,ce]=c.useState(null),ge=c.useMemo(()=>$(Re(te??[],["name"]),u),[m,u,f,te]),[he,Te]=c.useState(null),[Me,Ze]=c.useState(null),pe=c.useMemo(()=>$(Re(Z??[],["name","section"]),u),[m,u,f,Z]),ze=c.useMemo(()=>$(Re(T??[],["code","name"]),u),[m,u,f,T]),[Le,He]=c.useState(null),Ds=c.useMemo(()=>$(Re(Le??[],["code","name","type"]),u),[m,u,f,Le]),y=c.useMemo(()=>i==="all"?Ds:Ds.filter(d=>d.balance!==0||d.transactionCount>0),[i,Ds]),[F,K]=c.useState(null),O=c.useMemo(()=>{const d=pe.filter(Q=>Q.section==="assets").reduce((Q,re)=>Q+re.amount,0),j=Math.abs(pe.filter(Q=>Q.section==="liabilities").reduce((Q,re)=>Q+re.amount,0)),I=pe.filter(Q=>Q.section==="equity").reduce((Q,re)=>Q+re.amount,0),J=Math.abs(d-(j+I))<1e-4;return{assets:d,liabilities:j,equity:I,equationOk:J}},[pe]),be={hidden:{opacity:0,y:8},visible:{opacity:1,y:0}},ue=c.useMemo(()=>{const d=te??[],j=d.filter(ie=>ie.type==="revenue").reduce((ie,fe)=>ie+fe.amount,0),I=Math.abs(d.filter(ie=>ie.type==="cogs").reduce((ie,fe)=>ie+fe.amount,0)),J=Math.abs(d.filter(ie=>ie.type==="expense").reduce((ie,fe)=>ie+fe.amount,0)),Q=j-I,re=Q-J;return{revenue:j,cogs:I,expenses:J,gross:Q,net:re}},[te]),ne=c.useMemo(()=>{const d=ze.reduce((J,Q)=>J+(Q.debit||0),0),j=ze.reduce((J,Q)=>J+(Q.credit||0),0),I=d-j;return{debit:d,credit:j,diff:I,balanced:Math.abs(I)<1e-4}},[ze]),Ce=B?32:40,ke=8,We=c.useRef(null),Se=c.useRef(null),Qe=c.useRef(null),[ps,lt]=c.useState(0),[Us,ct]=c.useState(0),[fi,St]=c.useState(0),[Ps,Rt]=c.useState(()=>typeof window<"u"?window.matchMedia("(max-width: 640px)").matches:!1);c.useEffect(()=>{const d=window.matchMedia("(max-width: 640px)"),j=I=>Rt(("matches"in I,I.matches));return j(d),d.addEventListener?.("change",j),()=>d.removeEventListener?.("change",j)},[]),c.useEffect(()=>{const d=We.current;if(!d)return;const j=()=>lt(d.scrollTop);return d.addEventListener("scroll",j),()=>d.removeEventListener("scroll",j)},[We.current,B]),c.useEffect(()=>{const d=Se.current;if(!d)return;const j=()=>ct(d.scrollTop);return d.addEventListener("scroll",j),()=>d.removeEventListener("scroll",j)},[Se.current,B]),c.useEffect(()=>{const d=Qe.current;if(!d)return;const j=()=>St(d.scrollTop);return d.addEventListener("scroll",j),()=>d.removeEventListener("scroll",j)},[Qe.current,B]);const Ms=(d,j,I)=>{if(!d)return{start:0,end:j,padTop:0,padBot:0};const J=d.clientHeight||0,Q=Math.max(0,Math.floor(I/Ce)-ke),re=Math.min(j,Math.ceil((I+J)/Ce)+ke),ie=Q*Ce,fe=Math.max(0,(j-re)*Ce);return{start:Q,end:re,padTop:ie,padBot:fe}},Ge=d=>`$${Math.abs(d).toLocaleString("en-US")}`,Gs=d=>d>=0?`$${d.toLocaleString("en-US")}`:`-$${Math.abs(d).toLocaleString("en-US")}`,$s=50,Ks=!Ps&&ge.length>$s,ut=!Ps&&ze.length>$s;return!Ps&&y.length>$s,e.jsxDEV("div",{className:"relative h-full space-y-6 max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:[e.jsxDEV("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[e.jsxDEV("div",{className:"absolute -top-24 -left-24 w-[36rem] h-[36rem] rounded-full bg-primary/5 blur-3xl"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:491,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-24 -right-24 w-[30rem] h-[30rem] rounded-full bg-blue-400/5 blur-3xl"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:492,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:490,columnNumber:7},this),e.jsxDEV(q,{variant:"heavy",elevation:3,glow:!0,className:"p-4",children:[e.jsxDEV("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(Ro,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:499,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:498,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl font-semibold",children:"Financial Reports"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:502,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"P&L, Balance Sheet, Trial Balance, and Chart of Accounts"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:503,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:501,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:497,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 backdrop-blur-md hover:bg-white/15 transition-colors flex items-center gap-1",children:[n," ",e.jsxDEV(ml,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:511,columnNumber:30},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:510,columnNumber:15},this),e.jsxDEV("div",{className:"absolute hidden group-focus:block"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:513,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:509,columnNumber:13},this),e.jsxDEV("div",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 backdrop-blur-md",children:a},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:515,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:508,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:496,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg",t==="pnl"?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md"),onClick:()=>{s("pnl"),b("name"),h("")},children:"P&L"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:523,columnNumber:11},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg",t==="balance"?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md"),onClick:()=>{s("balance"),b("name"),h("")},children:"Balance Sheet"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:524,columnNumber:11},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg",t==="trial"?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md"),onClick:()=>{s("trial"),b("code"),h("")},children:"Trial Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:525,columnNumber:11},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg",t==="coa"?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md"),onClick:()=>{s("coa"),b("code"),h("")},children:"Chart of Accounts"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:526,columnNumber:11},this),e.jsxDEV("div",{className:"ml-auto flex items-center gap-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(fl,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-muted-contrast"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:529,columnNumber:15},this),e.jsxDEV("input",{value:m,onChange:d=>h(d.target.value),placeholder:"Search",className:L("pl-8 pr-3 text-sm rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",B?"py-1":"py-1.5")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:530,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:528,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:527,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:522,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:495,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxDEV("div",{className:"lg:col-span-2 space-y-4",children:[t==="pnl"&&e.jsxDEV(q,{variant:"medium",elevation:2,glow:!0,className:"p-4",children:[e.jsxDEV(ei,{icon:or,title:"Profit & Loss",subtitle:"Revenue, COGS, Expenses"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:541,columnNumber:15},this),F?.receiptUrl&&e.jsxDEV("div",{className:"mb-2",children:e.jsxDEV("a",{href:F.receiptUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded border border-white/10 bg-white/10 hover:bg-white/15",children:[e.jsxDEV(nn,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:545,columnNumber:21},this)," View last receipt"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:544,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:543,columnNumber:17},this),e.jsxDEV("div",{className:L("grid gap-2 mb-3",B?"grid-cols-2 sm:grid-cols-4 lg:grid-cols-5":"grid-cols-2 sm:grid-cols-3 lg:grid-cols-5"),children:[e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 text-xs",children:["Revenue ",e.jsxDEV("div",{className:"font-semibold text-financial-revenue",children:["$",ue.revenue.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:551,columnNumber:106},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:551,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 text-xs",children:["COGS ",e.jsxDEV("div",{className:"font-semibold text-amber-400",children:["-$",ue.cogs.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:552,columnNumber:103},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:552,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 text-xs",children:["Gross Profit ",e.jsxDEV("div",{className:"font-semibold text-cyan-300",children:["$",ue.gross.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:553,columnNumber:111},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:553,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 text-xs",children:["Expenses ",e.jsxDEV("div",{className:"font-semibold text-financial-expense",children:["-$",ue.expenses.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:554,columnNumber:107},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:554,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 text-xs col-span-2 sm:col-span-1",children:["Net Profit ",e.jsxDEV("div",{className:"font-semibold text-financial-revenue",children:["$",ue.net.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:555,columnNumber:134},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:555,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:550,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto hidden sm:block",children:e.jsxDEV("table",{className:L("reports-table w-full text-sm min-w-[520px] table-fixed",B?"[&_*]:py-1":""),children:[e.jsxDEV("colgroup",{children:[V.pnl.category&&e.jsxDEV("col",{style:{width:"70%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:560,columnNumber:43},this),V.pnl.amount&&e.jsxDEV("col",{style:{width:_&&V.pnl.prev?"15%":"30%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:561,columnNumber:41},this),_&&V.pnl.prev&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:562,columnNumber:54},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:559,columnNumber:19},this),e.jsxDEV("thead",{className:"reports-thead sticky top-0 z-10",children:e.jsxDEV("tr",{children:[V.pnl.category&&e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>Be("name"),children:"Category"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:566,columnNumber:45},this),V.pnl.amount&&e.jsxDEV("th",{className:"px-4 py-2 text-right cursor-pointer",onClick:()=>Be("amount"),children:"Amount"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:567,columnNumber:43},this),_&&V.pnl.prev&&e.jsxDEV("th",{className:"px-4 py-2 text-right",children:"Prev"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:568,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:565,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:564,columnNumber:19},this),e.jsxDEV("tbody",{ref:We,style:Ks?{display:"block",maxHeight:360,overflowY:"auto"}:void 0,children:[Ks&&e.jsxDEV("tr",{style:{height:Ms(We.current,ge.length,ps).padTop},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:573,columnNumber:39},this),e.jsxDEV(_e,{initial:!1,children:(Ks?(()=>{const{start:d,end:j}=Ms(We.current,ge.length,ps);return ge.slice(d,j).map((I,J)=>({row:I,key:d+J}))})():ge.map((d,j)=>({row:d,key:j}))).map(({row:d,key:j})=>e.jsxDEV(R.tr,{className:"border-t border-white/10 hover:bg-white/5",initial:"hidden",animate:"visible",exit:"hidden",variants:be,children:[V.pnl.category&&e.jsxDEV("td",{className:L("py-2",d.type==="revenue"?"text-financial-revenue":d.type==="cogs"?"text-amber-400":"text-financial-expense"),children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:581,columnNumber:49},this),V.pnl.amount&&e.jsxDEV("td",{className:L("py-2 text-right font-semibold",d.amount>=0?"text-financial-revenue":"text-financial-expense"),children:Gs(d.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:582,columnNumber:47},this),_&&V.pnl.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast",children:(()=>{const I=he?.[d.name];return typeof I=="number"?Ge(I):"-"})()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:584,columnNumber:29},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:579,columnNumber:25},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:574,columnNumber:21},this),Ks&&e.jsxDEV("tr",{style:{height:Ms(We.current,ge.length,ps).padBot},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:595,columnNumber:39},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:571,columnNumber:19},this),e.jsxDEV("tfoot",{className:"text-sm",children:[e.jsxDEV("tr",{className:"border-t border-white/10",children:[V.pnl.category&&e.jsxDEV("td",{className:"py-2 font-semibold text-secondary-contrast",children:"Gross Profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:599,columnNumber:45},this),V.pnl.amount&&e.jsxDEV("td",{className:"py-2 text-right font-semibold text-cyan-300",children:Ge(ue.gross)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:600,columnNumber:43},this),_&&V.pnl.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast",children:Me?Ge(Math.round(Me.grossProfit||Me.gross||0)):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:601,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:598,columnNumber:21},this),e.jsxDEV("tr",{children:[V.pnl.category&&e.jsxDEV("td",{className:"py-2 font-semibold text-secondary-contrast",children:"Net Profit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:604,columnNumber:45},this),V.pnl.amount&&e.jsxDEV("td",{className:"py-2 text-right font-semibold text-financial-revenue",children:Ge(ue.net)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:605,columnNumber:43},this),_&&V.pnl.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast",children:Me?Ge(Math.round(Me.netIncome||Me.netProfit||0)):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:606,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:603,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:597,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:558,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:557,columnNumber:15},this),Ps&&e.jsxDEV("div",{className:"mt-3 space-y-2 sm:hidden",children:ge.map((d,j)=>e.jsxDEV(q,{variant:"light",className:"p-3",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:L("font-medium",d.type==="revenue"?"text-financial-revenue":d.type==="cogs"?"text-amber-500":"text-financial-expense"),children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:617,columnNumber:25},this),e.jsxDEV("div",{className:L("font-semibold",d.amount>=0?"text-financial-revenue":"text-financial-expense"),children:Gs(d.amount)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:618,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:616,columnNumber:23},this)},j,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:615,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:613,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:540,columnNumber:13},this),t==="balance"&&e.jsxDEV(q,{variant:"medium",elevation:2,glow:!0,className:"p-4",children:[e.jsxDEV(ei,{icon:vp,title:"Balance Sheet",subtitle:"Assets = Liabilities + Equity"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:629,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold mb-2",children:"Assets"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:632,columnNumber:19},this),pe.filter(d=>d.section==="assets").map((d,j)=>e.jsxDEV("div",{className:"flex justify-between py-1 border-b border-white/10",children:[e.jsxDEV("span",{children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:635,columnNumber:23},this),e.jsxDEV("span",{className:"font-semibold",children:["$",d.amount.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:636,columnNumber:23},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:634,columnNumber:21},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:631,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold mb-2",children:"Liabilities"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:641,columnNumber:19},this),pe.filter(d=>d.section==="liabilities").map((d,j)=>e.jsxDEV("div",{className:"flex justify-between py-1 border-b border-white/10",children:[e.jsxDEV("span",{children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:644,columnNumber:23},this),e.jsxDEV("span",{className:"font-semibold",children:["$",Math.abs(d.amount).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:645,columnNumber:23},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:643,columnNumber:21},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:640,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold mb-2",children:"Equity"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:650,columnNumber:19},this),pe.filter(d=>d.section==="equity").map((d,j)=>e.jsxDEV("div",{className:"flex justify-between py-1 border-b border-white/10",children:[e.jsxDEV("span",{children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:653,columnNumber:23},this),e.jsxDEV("span",{className:"font-semibold",children:["$",d.amount.toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:654,columnNumber:23},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:652,columnNumber:21},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:649,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:630,columnNumber:15},this),e.jsxDEV("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",children:["Total Assets ",e.jsxDEV("div",{className:"font-semibold",children:Ge(O.assets)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:661,columnNumber:103},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:661,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10",children:["Liabilities + Equity ",e.jsxDEV("div",{className:"font-semibold",children:Ge(O.liabilities+O.equity)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:662,columnNumber:111},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:662,columnNumber:17},this),e.jsxDEV("div",{className:L("px-3 py-2 rounded-lg border text-center",O.equationOk?"bg-green-500/10 border-green-400/30 text-green-600 dark:text-green-300":"bg-red-500/10 border-red-400/30 text-red-600 dark:text-red-300"),children:O.equationOk?"Equation OK":"Equation mismatch"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:663,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:660,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:628,columnNumber:13},this),t==="trial"&&e.jsxDEV(q,{variant:"medium",elevation:2,glow:!0,className:"p-4",children:[e.jsxDEV(ei,{icon:Ro,title:"Trial Balance",subtitle:"Debits and Credits"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:672,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto hidden sm:block",children:e.jsxDEV("table",{className:L("reports-table w-full text-sm min-w-[640px] table-fixed",B?"[&_*]:py-1":""),children:[e.jsxDEV("colgroup",{children:[V.trial.code&&e.jsxDEV("col",{style:{width:"12%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:676,columnNumber:41},this),V.trial.name&&e.jsxDEV("col",{style:{width:_&&V.trial.prev?"43%":"55%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:677,columnNumber:41},this),V.trial.debit&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:678,columnNumber:42},this),V.trial.credit&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:679,columnNumber:43},this),_&&V.trial.prev&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:680,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:675,columnNumber:19},this),e.jsxDEV("thead",{className:"reports-thead sticky top-0 z-10",children:e.jsxDEV("tr",{children:[V.trial.code&&e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>Be("code"),children:"Code"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:684,columnNumber:43},this),V.trial.name&&e.jsxDEV("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>Be("name"),children:"Account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:685,columnNumber:43},this),V.trial.debit&&e.jsxDEV("th",{className:"px-4 py-2 text-right cursor-pointer",onClick:()=>Be("debit"),children:"Debit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:686,columnNumber:44},this),V.trial.credit&&e.jsxDEV("th",{className:"px-4 py-2 text-right cursor-pointer",onClick:()=>Be("credit"),children:"Credit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:687,columnNumber:45},this),_&&V.trial.prev&&e.jsxDEV("th",{className:"px-4 py-2 text-right",children:"Prev"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:688,columnNumber:58},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:683,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:682,columnNumber:19},this),e.jsxDEV("tbody",{ref:Se,style:ut?{display:"block",maxHeight:360,overflowY:"auto"}:void 0,children:[ut&&e.jsxDEV("tr",{style:{height:Ms(Se.current,ze.length,Us).padTop},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:692,columnNumber:41},this),e.jsxDEV(_e,{initial:!1,children:(ut?(()=>{const{start:d,end:j}=Ms(Se.current,ze.length,Us);return ze.slice(d,j).map((I,J)=>({row:I,key:d+J}))})():ze.map((d,j)=>({row:d,key:j}))).map(({row:d,key:j})=>e.jsxDEV(R.tr,{className:"border-t border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>N({code:d.code,name:d.name,type:"ASSET",balance:d.debit-d.credit}),initial:"hidden",animate:"visible",exit:"hidden",variants:be,children:[V.trial.code&&e.jsxDEV("td",{className:"py-2",children:d.code},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:701,columnNumber:47},this),V.trial.name&&e.jsxDEV("td",{className:"py-2",children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:702,columnNumber:47},this),V.trial.debit&&e.jsxDEV("td",{className:"py-2 text-right",children:d.debit?Ge(d.debit):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:703,columnNumber:48},this),V.trial.credit&&e.jsxDEV("td",{className:"py-2 text-right",children:d.credit?Ge(d.credit):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:704,columnNumber:49},this),_&&V.trial.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast",children:Ge(Math.round(((d.debit||0)-(d.credit||0))*.92))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:705,columnNumber:62},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:698,columnNumber:25},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:693,columnNumber:21},this),ut&&e.jsxDEV("tr",{style:{height:Ms(Se.current,ze.length,Us).padBot},"aria-hidden":"true"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:709,columnNumber:41},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:691,columnNumber:19},this),e.jsxDEV("tfoot",{className:"text-sm",children:[e.jsxDEV("tr",{className:"border-t border-white/10",children:[e.jsxDEV("td",{className:"py-2 font-semibold",colSpan:(V.trial.code?1:0)+(V.trial.name?1:0),children:"Totals"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:713,columnNumber:23},this),V.trial.debit&&e.jsxDEV("td",{className:"py-2 text-right font-semibold",children:Ge(ne.debit)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:714,columnNumber:44},this),V.trial.credit&&e.jsxDEV("td",{className:"py-2 text-right font-semibold",children:Ge(ne.credit)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:715,columnNumber:45},this),_&&V.trial.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast",children:Ge(Math.round((ne.debit-ne.credit)*.92))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:716,columnNumber:58},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:712,columnNumber:21},this),e.jsxDEV("tr",{children:[e.jsxDEV("td",{className:"py-2 font-semibold",colSpan:(V.trial.code?1:0)+(V.trial.name?1:0),children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:719,columnNumber:23},this),e.jsxDEV("td",{className:L("py-2 text-right font-semibold",ne.balanced?"text-financial-revenue":"text-financial-expense"),colSpan:(V.trial.debit?1:0)+(V.trial.credit?1:0),children:ne.balanced?"Balanced":`Out of balance: $${Math.abs(ne.diff).toLocaleString()}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:720,columnNumber:23},this),_&&V.trial.prev&&e.jsxDEV("td",{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:723,columnNumber:58},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:718,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:711,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:674,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:673,columnNumber:15},this),Ps&&e.jsxDEV("div",{className:"mt-3 space-y-2 sm:hidden",children:ze.map((d,j)=>e.jsxDEV("div",{onClick:()=>N({code:d.code,name:d.name,type:"ASSET",balance:d.debit-d.credit}),children:e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:d.code},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:734,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Trial Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:735,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:733,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium mb-1",children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:737,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("div",{children:["Debit: ",d.debit?Ge(d.debit):"-"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:739,columnNumber:25},this),e.jsxDEV("div",{children:["Credit: ",d.credit?Ge(d.credit):"-"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:740,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:738,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:732,columnNumber:23},this)},j,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:731,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:729,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:671,columnNumber:13},this),t==="coa"&&e.jsxDEV(q,{variant:"medium",glow:!0,className:"p-4",children:[e.jsxDEV(ei,{icon:fp,title:"Chart of Accounts",subtitle:"Click an account to drill in"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:752,columnNumber:15},this),e.jsxDEV("div",{className:"mb-3 relative z-20",children:e.jsxDEV(on,{options:[{value:"active",label:"Active COA"},{value:"all",label:"All COA"}],value:i,onChange:d=>{r(d),localStorage.setItem("coa.filter",d)}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:755,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:754,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto hidden sm:block",children:e.jsxDEV("table",{role:"table","aria-label":"Chart of Accounts",className:L("reports-table w-full text-sm min-w-[640px] table-fixed",B?"[&_*]:py-1":""),children:[e.jsxDEV("colgroup",{children:[V.coa.code&&e.jsxDEV("col",{style:{width:"12%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:764,columnNumber:39},this),V.coa.name&&e.jsxDEV("col",{style:{width:_&&V.coa.prev?"43%":"55%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:765,columnNumber:39},this),V.coa.type&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:766,columnNumber:39},this),V.coa.balance&&e.jsxDEV("col",{style:{width:_&&V.coa.prev?"15%":"20%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:767,columnNumber:42},this),_&&V.coa.prev&&e.jsxDEV("col",{style:{width:"15%"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:768,columnNumber:54},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:763,columnNumber:19},this),e.jsxDEV("thead",{className:"reports-thead sticky top-0 z-10",children:e.jsxDEV("tr",{children:[V.coa.code&&e.jsxDEV("th",{scope:"col",className:"px-4 py-2 cursor-pointer",onClick:()=>Be("code"),children:"Code"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:772,columnNumber:41},this),V.coa.name&&e.jsxDEV("th",{scope:"col",className:"px-4 py-2 cursor-pointer",onClick:()=>Be("name"),children:"Account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:773,columnNumber:41},this),V.coa.type&&e.jsxDEV("th",{scope:"col",className:"px-4 py-2",children:"Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:774,columnNumber:41},this),V.coa.balance&&e.jsxDEV("th",{scope:"col",className:"px-4 py-2 text-right cursor-pointer",onClick:()=>Be("balance"),children:"Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:775,columnNumber:44},this),_&&V.coa.prev&&e.jsxDEV("th",{scope:"col",className:"px-4 py-2 text-right",children:"Prev"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:776,columnNumber:56},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:771,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:770,columnNumber:19},this),e.jsxDEV("tbody",{children:e.jsxDEV(_e,{initial:!1,children:y.map((d,j)=>e.jsxDEV(R.tr,{className:"border-t border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>N(d),initial:"hidden",animate:"visible",exit:"hidden",variants:be,children:[V.coa.code&&e.jsxDEV("td",{className:"py-2 whitespace-nowrap",children:d.code},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:785,columnNumber:45},this),V.coa.name&&e.jsxDEV("td",{className:"py-2",children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:786,columnNumber:45},this),V.coa.type&&e.jsxDEV("td",{className:"py-2 capitalize whitespace-nowrap",children:d.type.toLowerCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:787,columnNumber:45},this),V.coa.balance&&e.jsxDEV("td",{className:L("py-2 text-right font-semibold whitespace-nowrap",d.balance>=0?"text-financial-revenue":"text-financial-expense"),children:d.balance>=0?Ge(d.balance):`-${Ge(Math.abs(d.balance))}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:788,columnNumber:48},this),_&&V.coa.prev&&e.jsxDEV("td",{className:"py-2 text-right text-secondary-contrast whitespace-nowrap",children:Ge(Math.round(d.balance*.92))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:789,columnNumber:60},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:782,columnNumber:25},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:780,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:779,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:762,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:761,columnNumber:15},this),Ps&&e.jsxDEV("div",{className:"mt-3 space-y-2 sm:hidden",children:y.map((d,j)=>e.jsxDEV("div",{onClick:()=>N(d),children:e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:d.code},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:802,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs capitalize text-secondary-contrast",children:d.type.toLowerCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:803,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:801,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium",children:d.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:806,columnNumber:25},this),e.jsxDEV("div",{className:L("font-semibold",d.balance>=0?"text-financial-revenue":"text-financial-expense"),children:d.balance>=0?Ge(d.balance):`-${Ge(Math.abs(d.balance))}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:807,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:805,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:800,columnNumber:23},this)},j,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:799,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:797,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:751,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:538,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(zb,{tab:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:820,columnNumber:11},this),e.jsxDEV(q,{variant:"light",elevation:1,glow:!0,className:L("p-4",H?"bg-white text-black !shadow-none !backdrop-blur-0":""),children:[e.jsxDEV("div",{className:"text-sm text-foreground/80 mb-2",children:"Period"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:822,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:["Monthly","Quarterly","YTD","Annual"].map(d=>e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg",n===d?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md"),onClick:()=>o(d),children:d},d,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:825,columnNumber:17},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:823,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 text-sm text-secondary-contrast",children:["Current: ",a]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:828,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2 items-center",children:[e.jsxDEV("button",{id:"reports-export-btn",className:L("px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass shadow-glass hover:shadow-glow bg-surface/70 hover:bg-surface/80 border-border/60 text-foreground dark:bg-white/10 dark:hover:bg-white/15 dark:border-white/15 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",H?"bg-white border-black text-black shadow-none":""),onClick:()=>{const d=t==="pnl"?ge.map(ie=>({category:ie.name,amount:ie.amount})):t==="balance"?pe.map(ie=>({section:ie.section,name:ie.name,amount:ie.amount})):t==="trial"?ze.map(ie=>({code:ie.code,name:ie.name,debit:ie.debit,credit:ie.credit})):y.map(ie=>({code:ie.code,name:ie.name,type:ie.type,balance:ie.balance})),j=Object.keys(d[0]||{}),I=[j.join(","),...d.map(ie=>j.map(fe=>JSON.stringify(ie[fe]??"")).join(","))].join(`
`),J=new Blob([I],{type:"text/csv;charset=utf-8;"}),Q=URL.createObjectURL(J),re=document.createElement("a");re.href=Q,re.download=`reports-${t}-${n}.csv`,re.click(),URL.revokeObjectURL(Q)},children:"Export CSV"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:831,columnNumber:15},this),e.jsxDEV("button",{className:L("ml-2 px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",H?"bg-white border-black text-black shadow-none":""),onClick:()=>window.print(),children:"Print"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:852,columnNumber:15},this),e.jsxDEV("button",{className:L("px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",H?"bg-white border-black text-black shadow-none":""),onClick:Fe,children:"Export PDF"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:858,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:830,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:W,onChange:d=>se(d.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:869,columnNumber:17},this),"Keyboard shortcuts (1–4 tabs, X export)"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:868,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:B,onChange:d=>le(d.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:873,columnNumber:17},this),"Compact density"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:872,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:_,onChange:d=>P(d.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:877,columnNumber:17},this),"Compare period (adds Prev column)"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:876,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:H,onChange:d=>G(d.target.checked)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:881,columnNumber:17},this),"Print‑friendly mode"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:880,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:867,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4 text-sm",children:[e.jsxDEV("div",{className:"mb-2 text-foreground/80",children:"Columns"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:888,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-3",children:[t==="pnl"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.pnl.category,onChange:d=>k({...V,pnl:{...V.pnl,category:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:892,columnNumber:64},this)," Category"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:892,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.pnl.amount,onChange:d=>k({...V,pnl:{...V.pnl,amount:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:893,columnNumber:64},this)," Amount"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:893,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.pnl.prev,onChange:d=>k({...V,pnl:{...V.pnl,prev:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:894,columnNumber:64},this)," Prev"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:894,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:891,columnNumber:19},this),t==="balance"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.balance.section,onChange:d=>k({...V,balance:{...V.balance,section:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:899,columnNumber:64},this)," Section"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:899,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.balance.name,onChange:d=>k({...V,balance:{...V.balance,name:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:900,columnNumber:64},this)," Name"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:900,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.balance.amount,onChange:d=>k({...V,balance:{...V.balance,amount:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:901,columnNumber:64},this)," Amount"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:901,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.balance.prev,onChange:d=>k({...V,balance:{...V.balance,prev:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:902,columnNumber:64},this)," Prev"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:902,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:898,columnNumber:19},this),t==="trial"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.trial.code,onChange:d=>k({...V,trial:{...V.trial,code:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:907,columnNumber:64},this)," Code"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:907,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.trial.name,onChange:d=>k({...V,trial:{...V.trial,name:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:908,columnNumber:64},this)," Account"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:908,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.trial.debit,onChange:d=>k({...V,trial:{...V.trial,debit:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:909,columnNumber:64},this)," Debit"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:909,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.trial.credit,onChange:d=>k({...V,trial:{...V.trial,credit:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:910,columnNumber:64},this)," Credit"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:910,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.trial.prev,onChange:d=>k({...V,trial:{...V.trial,prev:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:911,columnNumber:64},this)," Prev"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:911,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:906,columnNumber:19},this),t==="coa"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.coa.code,onChange:d=>k({...V,coa:{...V.coa,code:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:916,columnNumber:64},this)," Code"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:916,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.coa.name,onChange:d=>k({...V,coa:{...V.coa,name:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:917,columnNumber:64},this)," Name"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:917,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.coa.type,onChange:d=>k({...V,coa:{...V.coa,type:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:918,columnNumber:64},this)," Type"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:918,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.coa.balance,onChange:d=>k({...V,coa:{...V.coa,balance:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:919,columnNumber:64},this)," Balance"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:919,columnNumber:21},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:V.coa.prev,onChange:d=>k({...V,coa:{...V.coa,prev:d.target.checked}})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:920,columnNumber:64},this)," Prev"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:920,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:915,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:889,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:887,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4 text-sm",children:[e.jsxDEV("div",{className:"mb-2 text-foreground/80",children:"Saved Views"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:928,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md",onClick:()=>{const d=prompt("Preset name?")?.trim();d&&Ee(t,{name:d,search:m,sortKey:u,sortDir:f,compact:B})},children:"Save Current"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:930,columnNumber:17},this),(ae[t]||[]).map((d,j)=>e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md",onClick:()=>je(t,d),children:d.name},j,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:939,columnNumber:19},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:929,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:927,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:821,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:819,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:537,columnNumber:7},this),g&&e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-3 sm:p-4",onClick:()=>N(null),children:e.jsxDEV("div",{onClick:d=>d.stopPropagation(),children:e.jsxDEV(q,{variant:"light",elevation:1,className:"p-0 max-w-4xl w-[96%] glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"px-5 py-4 border-b border-white/10 flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm text-primary/80 font-semibold",children:g.code},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:956,columnNumber:17},this),e.jsxDEV("div",{className:"text-lg sm:text-xl font-semibold",children:g.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:957,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:955,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:L("px-2 py-1 text-xs rounded border",g.type==="ASSET"?"bg-green-500/10 border-green-400/30 text-green-400":g.type==="LIABILITY"?"bg-amber-500/10 border-amber-400/30 text-amber-300":"bg-purple-500/10 border-purple-400/30 text-purple-300"),children:g.type},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:960,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:()=>N(null),children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:961,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:959,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:954,columnNumber:13},this),e.jsxDEV("div",{className:"p-5 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxDEV(q,{variant:"light",elevation:1,className:"p-3",hover:!1,children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast font-semibold mb-2",children:"ACCOUNT CLASSIFICATION"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:969,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Account Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:971,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:g.type==="ASSET"?"Asset Account":g.type.charAt(0)+g.type.slice(1).toLowerCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:971,columnNumber:95},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:971,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Normal Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:972,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:["ASSET","EXPENSE"].includes(g.type)?"Debit":"Credit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:972,columnNumber:97},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:972,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Financial Statement"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:973,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:g.type==="REVENUE"||g.type==="EXPENSE"?"Income Statement":"Balance Sheet"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:973,columnNumber:102},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:973,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:970,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:968,columnNumber:15},this),e.jsxDEV(q,{variant:"light",elevation:1,className:"p-3",hover:!1,children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast font-semibold mb-2",children:"CURRENT STATUS"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:979,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Current Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:981,columnNumber:70},this),e.jsxDEV("span",{className:L("font-semibold",g.balance>=0?"text-financial-revenue":"text-financial-expense"),children:[g.balance>=0?"$":"-$",Math.abs(g.balance).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:981,columnNumber:98},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:981,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Balance Type"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:982,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:g.balance>=0?"Debit Balance":"Credit Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:982,columnNumber:95},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:982,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Last Updated"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:983,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:new Date().toLocaleDateString("en-US")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:983,columnNumber:95},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:983,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:980,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:978,columnNumber:15},this),e.jsxDEV(q,{variant:"light",elevation:1,className:"p-3",hover:!1,children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast font-semibold mb-2",children:"ACCOUNT ACTIVITY"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:989,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Transactions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:991,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:"1 entries"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:991,columnNumber:95},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:991,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Period"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:992,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium",children:"Last 30 days"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:992,columnNumber:89},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:992,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:993,columnNumber:70},this),e.jsxDEV("span",{className:"font-medium text-green-400",children:"Active"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:993,columnNumber:89},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:993,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:990,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:988,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:966,columnNumber:13},this),e.jsxDEV("div",{className:"px-5",children:e.jsxDEV(q,{variant:"light",elevation:1,className:"p-4",hover:!1,children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-2",children:"🤖 AI Analysis"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1001,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm mb-2",children:[g.name," has current balance of ",g.balance>=0?"$":"-$",Math.abs(g.balance).toLocaleString(),"."]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1002,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1 font-semibold",children:"AI Suggestions:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1003,columnNumber:17},this),e.jsxDEV("ul",{className:"text-xs space-y-1",children:[e.jsxDEV("li",{children:"• Account shows activity"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1005,columnNumber:19},this),e.jsxDEV("li",{children:"• Balance will be managed in Phase 2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1006,columnNumber:19},this),e.jsxDEV("li",{children:"• Database integrity maintained"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1007,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1004,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1e3,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:999,columnNumber:13},this),e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-2",children:"Account Ledger"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1014,columnNumber:15},this),e.jsxDEV(q,{variant:"light",elevation:1,className:"p-0 overflow-hidden",hover:!1,children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"reports-thead",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1019,columnNumber:23},this),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Description"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1020,columnNumber:23},this),e.jsxDEV("th",{className:"px-3 py-2 text-right",children:"Debit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1021,columnNumber:23},this),e.jsxDEV("th",{className:"px-3 py-2 text-right",children:"Credit"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1022,columnNumber:23},this),e.jsxDEV("th",{className:"px-3 py-2 text-right",children:"Balance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1023,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1018,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1017,columnNumber:19},this),e.jsxDEV("tbody",{children:[E&&e.jsxDEV("tr",{className:"border-t border-white/10",children:e.jsxDEV("td",{colSpan:5,className:"px-3 py-4 text-center text-secondary-contrast",children:"Loading..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1028,columnNumber:64},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1028,columnNumber:23},this),C&&!E&&e.jsxDEV("tr",{className:"border-t border-white/10",children:e.jsxDEV("td",{colSpan:5,className:"px-3 py-4 text-center text-red-400",children:C},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1031,columnNumber:64},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1031,columnNumber:23},this),!E&&!C&&Array.isArray(p?.transactions)&&p.transactions.map((d,j)=>e.jsxDEV("tr",{className:"border-t border-white/10",children:[e.jsxDEV("td",{className:"px-3 py-2",children:new Date(d.date).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1035,columnNumber:25},this),e.jsxDEV("td",{className:"px-3 py-2",children:d.description},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1036,columnNumber:25},this),e.jsxDEV("td",{className:"px-3 py-2 text-right text-financial-revenue",children:d.debitAmount?`$${Number(d.debitAmount).toLocaleString()}`:"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1037,columnNumber:25},this),e.jsxDEV("td",{className:"px-3 py-2 text-right text-financial-expense",children:d.creditAmount?`$${Number(d.creditAmount).toLocaleString()}`:"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1038,columnNumber:25},this),e.jsxDEV("td",{className:"px-3 py-2 text-right font-semibold",children:(d.balance>=0?"$":"-$")+Math.abs(Number(d.balance)).toLocaleString()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1039,columnNumber:25},this)]},j,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1034,columnNumber:23},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1026,columnNumber:19},this),e.jsxDEV("tfoot",{children:e.jsxDEV("tr",{className:"border-t border-white/10 text-xs",children:[e.jsxDEV("td",{colSpan:2,className:"px-3 py-2 text-secondary-contrast",children:"Totals"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1045,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-right text-financial-revenue",children:p?.summary?`$${Number(p.summary.totalDebits||0).toLocaleString()}`:"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1046,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-right text-financial-expense",children:p?.summary?`$${Number(p.summary.totalCredits||0).toLocaleString()}`:"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1047,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-right font-semibold",children:p?.summary?(p.account?.currentBalance>=0?"$":"-$")+Math.abs(Number(p.account?.currentBalance||0)).toLocaleString():"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1048,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1044,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1043,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1016,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1015,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1013,columnNumber:13},this),e.jsxDEV("div",{className:"px-5 pb-4 flex items-center justify-between",children:[e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg bg-white/10 border border-white/10 hover:bg-white/15",onClick:()=>N(null),children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1057,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:async()=>{const d=prompt("New account name?",g.name);if(!d)return;const j=prompt("Type (ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE)?",g.type)?.toUpperCase();try{const I={name:d};["ASSET","LIABILITY","EQUITY","REVENUE","EXPENSE"].includes(j||"")&&(I.type=j),(await Cs.updateAccount(g.code,I))?.success&&(N({...g,name:d,type:I.type||g.type}),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Account updated",type:"success"}})))}catch(I){window.dispatchEvent(new CustomEvent("toast",{detail:{message:I?.message||"Update failed",type:"error"}}))}},children:"Edit Account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1059,columnNumber:17},this),e.jsxDEV("button",{className:"px-3 py-1.5 rounded-lg bg-red-500/15 text-red-400 border border-red-400/30",onClick:async()=>{if(confirm("Delete this account? Accounts with transactions or core accounts cannot be deleted."))try{(await Cs.deleteAccount(g.code))?.success&&(window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Account deleted",type:"success"}})),N(null),window.dispatchEvent(new Event("data:refresh")))}catch(d){window.dispatchEvent(new CustomEvent("toast",{detail:{message:d?.response?.data?.error||d?.message||"Delete failed",type:"error"}}))}},children:"Delete Account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1075,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1058,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:1056,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:952,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:951,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:950,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:949,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/reports/Reports.tsx",lineNumber:488,columnNumber:5},this)}function Wb({onSignIn:t,onGetStarted:s}){const[i,r]=c.useState(!0),n=c.useRef(0),[o,a]=c.useState(null),[l,m]=c.useState(!1),[h,u]=c.useState(0),b=h>.05,[f,x]=c.useState(0),[g,N]=c.useState({x:0,y:0}),[p,v]=c.useState(!1);c.useEffect(()=>{const D=()=>{const T=window.scrollY;n.current=T;const U=Math.max(0,Math.min(1,T/260));u(U);const W=Math.max(0,document.documentElement.scrollHeight-window.innerHeight),se=W>0?Math.max(0,Math.min(1,T/W)):0;x(se),r(!0),U>.05&&(a(null),m(!1))};return window.addEventListener("scroll",D,{passive:!0}),()=>window.removeEventListener("scroll",D)},[]),c.useEffect(()=>{const D=T=>{T.target.closest?.("#landing-topnav")||(a(null),m(!1))};return document.addEventListener("click",D),()=>document.removeEventListener("click",D)},[]);const E=1-.22*h,w=1-.14*h,C=16+12*h,S=h*140,Z=140-60*h;return e.jsxDEV("div",{id:"landing-topnav",className:"fixed top-0 left-0 right-0 z-40 px-4 sm:px-6 lg:px-8 pt-4",children:[e.jsxDEV(R.div,{initial:!1,animate:{scaleX:E,scaleY:w},transition:{type:"spring",stiffness:260,damping:24},style:{transformOrigin:"center top"},children:e.jsxDEV(q,{variant:"light",elevation:2,className:L("relative px-4 transition-all duration-500",b?"py-2 rounded-xl":"py-3 rounded-2xl",i?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"),style:{borderRadius:C},children:[e.jsxDEV(R.div,{className:"absolute left-0 top-0 h-[2px] rounded-t-2xl",style:{background:"linear-gradient(90deg, rgb(var(--color-primary-500) / 0.7), rgb(var(--color-secondary-500) / 0.7))"},initial:{width:0},animate:{width:`${Math.max(2,Math.round(f*100))}%`},transition:{type:"tween",duration:.15}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:73,columnNumber:6},this),e.jsxDEV(R.div,{className:"pointer-events-none absolute inset-0 overflow-hidden",style:{borderRadius:C},children:e.jsxDEV(R.div,{className:"absolute -inset-x-1/2 top-0 h-full",style:{background:"linear-gradient(90deg, rgba(168,85,247,0.10), rgba(6,182,212,0.10), rgba(168,85,247,0.10))",filter:"blur(18px)"},animate:{x:S},transition:{type:"spring",stiffness:120,damping:24}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:83,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:82,columnNumber:6},this),e.jsxDEV(R.div,{className:"pointer-events-none absolute inset-0",style:{borderRadius:C},animate:{opacity:p?1:0},transition:{duration:.25},children:e.jsxDEV("div",{className:"absolute",style:{left:0,top:0,right:0,bottom:0,background:`radial-gradient(${Math.max(80,Z)}px circle at ${g.x}px ${g.y}px, rgb(var(--color-neutral-0) / 0.12), transparent 60%)`}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:101,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:95,columnNumber:6},this),e.jsxDEV("div",{className:L("w-full grid items-center","grid-cols-2 xl:grid-cols-3",b?"gap-2":"gap-4"),children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:e.jsxDEV("div",{className:"text-sm font-bold tracking-tight whitespace-nowrap",children:[e.jsxDEV("span",{className:"text-primary",children:"AI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:116,columnNumber:76},this),"Ledgr"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:116,columnNumber:8},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:115,columnNumber:7},this),e.jsxDEV("nav",{className:L("hidden xl:flex items-center justify-center text-sm",b?"gap-3":"gap-5"),children:[e.jsxDEV(R.button,{whileHover:{y:-1,scale:1.05},whileTap:{scale:.98},className:L(b?"px-2.5 py-1":"px-3 py-1.5","rounded-lg hover:bg-white/10 text-secondary-contrast whitespace-nowrap"),onClick:D=>{D.stopPropagation(),a(T=>T==="business"?null:"business")},children:"For Business ▾"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:119,columnNumber:8},this),e.jsxDEV(R.button,{whileHover:{y:-1,scale:1.05},whileTap:{scale:.98},className:L(b?"px-2.5 py-1":"px-3 py-1.5","rounded-lg hover:bg-white/10 text-secondary-contrast whitespace-nowrap"),onClick:D=>{D.stopPropagation(),a(T=>T==="accountants"?null:"accountants")},children:"Accountants ▾"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:120,columnNumber:8},this),e.jsxDEV(R.button,{whileHover:{y:-1,scale:1.05},whileTap:{scale:.98},className:L(b?"px-2.5 py-1":"px-3 py-1.5","rounded-lg hover:bg-white/10 text-secondary-contrast whitespace-nowrap"),onClick:()=>{a(null);const D=document.querySelector("#pricing");D&&D.scrollIntoView({behavior:"smooth"})},children:"Pricing"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:121,columnNumber:8},this),e.jsxDEV(R.button,{whileHover:{y:-1,scale:1.05},whileTap:{scale:.98},className:L(b?"px-2.5 py-1":"px-3 py-1.5","rounded-lg hover:bg-white/10 text-secondary-contrast whitespace-nowrap"),onClick:D=>{D.stopPropagation(),a(T=>T==="learn"?null:"learn")},children:"Learn & Support ▾"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:122,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:118,columnNumber:7},this),e.jsxDEV("div",{className:L("flex items-center justify-end",b?"gap-2":"gap-3"),children:[e.jsxDEV("button",{className:L("hidden sm:inline-flex rounded-lg text-sm bg-white/10 border border-white/10 hover:bg-white/15 transition-colors",b?"px-3 py-1.5":"px-4 py-2"),onClick:t,children:"Sign In"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:125,columnNumber:8},this),e.jsxDEV("button",{className:L("rounded-lg text-sm bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25 glow-cta transition-all",b?"px-3.5 py-1.5":"px-4 py-2"),onClick:s,children:"Get Started"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:126,columnNumber:8},this),e.jsxDEV("button",{className:"xl:hidden px-3 py-2 rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 ml-1",onClick:D=>{D.stopPropagation(),m(T=>!T)},"aria-label":"Open menu",children:e.jsxDEV("span",{className:"relative inline-flex items-center justify-center w-5 h-4",children:[e.jsxDEV("span",{className:"absolute inline-block w-1.5 h-1.5 rounded-full bg-primary",style:{top:2,left:2}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:130,columnNumber:10},this),e.jsxDEV("span",{className:"absolute inline-block w-1.5 h-1.5 rounded-full bg-primary/70",style:{top:2,right:2}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:131,columnNumber:10},this),e.jsxDEV("span",{className:"absolute inline-block w-1.5 h-1.5 rounded-full bg-primary/50",style:{bottom:2,left:"50%",transform:"translateX(-50%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:132,columnNumber:10},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:129,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:128,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:124,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:114,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:62,columnNumber:5},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:56,columnNumber:4},this),e.jsxDEV(_e,{children:l&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(R.div,{className:"fixed inset-0 z-30",initial:{opacity:0},animate:{opacity:.12},exit:{opacity:0},style:{background:"black"},onClick:()=>m(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:143,columnNumber:7},this),e.jsxDEV(R.div,{className:"fixed top-16 left-4 right-4 z-40 xl:hidden",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:e.jsxDEV(q,{variant:"light",elevation:2,className:"p-3",children:e.jsxDEV("nav",{className:"flex flex-col text-sm",children:[e.jsxDEV("button",{className:"px-3 py-2 rounded-lg text-left hover:bg-white/10",onClick:()=>{m(!1),a(null);const D=document.querySelector("#how-it-helps");D&&D.scrollIntoView({behavior:"smooth"})},children:"For Business"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:147,columnNumber:10},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg text-left hover:bg-white/10",onClick:()=>{m(!1),a(null);const D=document.querySelector("#how-it-helps");D&&D.scrollIntoView({behavior:"smooth"})},children:"Accountants"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:148,columnNumber:10},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg text-left hover:bg-white/10",onClick:()=>{m(!1);const D=document.querySelector("#pricing");D&&D.scrollIntoView({behavior:"smooth"})},children:"Pricing"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:149,columnNumber:10},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg text-left hover:bg-white/10",onClick:()=>{m(!1);const D=document.querySelector("#resources")||document.querySelector("#faq");D&&D.scrollIntoView({behavior:"smooth"})},children:"Learn & Support"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:150,columnNumber:10},this),e.jsxDEV("div",{className:"mt-2 pt-2 border-t border-white/10",children:[e.jsxDEV("button",{className:"w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 mb-2",onClick:()=>{m(!1),t?.()},children:"Sign In"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:152,columnNumber:11},this),e.jsxDEV("button",{className:"w-full px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25",onClick:()=>{m(!1),s?.()},children:"Get Started"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:153,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:151,columnNumber:10},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:146,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:145,columnNumber:8},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:144,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:142,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:140,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingTopNav.tsx",lineNumber:55,columnNumber:3},this)}const Gb=c.memo(function(){const s=c.useRef(null),i=c.useRef(null),r=c.useRef(null),n=c.useRef(null),o=c.useRef(null),[a,l]=c.useState(!1),[m,h]=c.useState(null),u=c.useRef(0),b=c.useRef({x:0,y:0}),{session:f}=rr();return c.useEffect(()=>{l(!0),(async()=>{try{if(!f?.access_token)return;const p=await li.getDashboardData(),v=Number(p?.metrics?.totalRevenue);!isNaN(v)&&v>0&&h(v)}catch{}})();const x=()=>{if(!s.current)return;const p=u.current,{x:v,y:E}=b.current,w=p*10,C=p*18,S=p*12,Z=z=>Math.max(-1,Math.min(1,z)),D=Z(v),T=Z(E),U=D*6,W=-T*3,se=D*4,_=D*-10,P=-T*4,B=D*-6,le=D*8,H=-T*3,G=D*4;i.current&&(i.current.style.transform=`translateX(${U}px) translateY(${w}px) rotateX(${W}deg) rotateY(${se}deg)`),r.current&&(r.current.style.transform=`translateX(${_}px) translateY(${C}px) rotateX(${P}deg) rotateY(${B}deg)`),n.current&&(n.current.style.transform=`translateX(${le}px) translateY(${S}px) rotateX(${H}deg) rotateY(${G}deg)`)},g=()=>{s.current&&(o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{const p=s.current.getBoundingClientRect(),v=window.innerHeight||1;u.current=Math.max(-1,Math.min(1,1-(p.top+p.height/2)/v)),x()}))},N=p=>{if(!s.current)return;const v=s.current.getBoundingClientRect(),E=v.left+v.width/2,w=v.top+v.height/2;b.current={x:(p.clientX-E)/(v.width/2),y:(p.clientY-w)/(v.height/2)},o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(x)};return g(),window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("mousemove",N,{passive:!0}),()=>{o.current&&cancelAnimationFrame(o.current),window.removeEventListener("scroll",g),window.removeEventListener("mousemove",N)}},[f?.access_token]),e.jsxDEV("div",{ref:s,className:"relative w-full h-[320px] sm:h-[360px] lg:h-[420px]",style:{perspective:"1000px"},children:[e.jsxDEV("div",{className:"absolute right-2 -top-3 sm:right-4 sm:-top-4 glass-modal rounded-lg border border-white/10 px-3 py-1.5 text-xs shadow-xl",children:["MRR: ",e.jsxDEV("span",{className:"font-semibold",children:(m??48400).toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:93,columnNumber:10},this)," · +6.2%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:92,columnNumber:4},this),e.jsxDEV("div",{className:"absolute inset-0 rounded-2xl",style:{background:"radial-gradient(120% 80% at 20% 0%, rgb(var(--color-secondary-500) / 0.08), transparent 60%),radial-gradient(120% 80% at 100% 60%, rgb(var(--color-primary-500) / 0.10), transparent 65%)",filter:"saturate(1.1)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:97,columnNumber:4},this),e.jsxDEV("div",{ref:i,className:"absolute left-2 top-6 sm:left-4 sm:top-6 lg:left-6 lg:top-6 w-[62%] sm:w-[58%] lg:w-[50%] glass-modal liquid-glass rounded-xl border border-white/20 shadow-xl will-change-transform overflow-hidden",children:[e.jsxDEV(Vr,{title:"Dashboard"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:109,columnNumber:5},this),e.jsxDEV("div",{className:"p-3 sm:p-4 grid grid-cols-3 gap-3",children:Array.from({length:9}).map((x,g)=>e.jsxDEV("div",{className:"h-16 sm:h-20 rounded bg-white/20 overflow-hidden",children:e.jsxDEV("div",{className:"h-full w-full origin-bottom bg-primary/30",style:{transform:`scaleY(${.35+g*37%60/100})`}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:114,columnNumber:8},this)},g,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:113,columnNumber:7},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:110,columnNumber:5},this),e.jsxDEV("div",{className:"sheen"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:118,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:108,columnNumber:4},this),e.jsxDEV("div",{ref:r,className:"absolute right-2 top-10 sm:right-4 lg:right-8 w-[48%] sm:w-[44%] lg:w-[40%] glass-modal liquid-glass rounded-xl border border-white/20 shadow-xl will-change-transform overflow-hidden",children:[e.jsxDEV(Vr,{title:"Cash Flow"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:123,columnNumber:5},this),e.jsxDEV("div",{className:"p-3 sm:p-4",children:e.jsxDEV(Kb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:125,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:124,columnNumber:5},this),e.jsxDEV("div",{className:"sheen"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:127,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:122,columnNumber:4},this),e.jsxDEV("div",{ref:n,className:"absolute left-6 bottom-2 sm:left-10 lg:left-14 w-[42%] sm:w-[38%] lg:w-[34%] glass-modal liquid-glass rounded-xl border border-white/20 shadow-xl will-change-transform overflow-hidden",children:[e.jsxDEV(Vr,{title:"Invoices"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:132,columnNumber:5},this),e.jsxDEV("div",{className:"p-3 sm:p-4 space-y-2",children:["Acme Co.","Orbit Labs","Nova Studio","Pioneer LLC"].map((x,g)=>e.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("div",{className:"truncate pr-2",children:x},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:136,columnNumber:8},this),e.jsxDEV("div",{className:"text-financial-revenue",children:["$",(1200+g*480).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:137,columnNumber:8},this)]},x,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:135,columnNumber:7},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:133,columnNumber:5},this),e.jsxDEV("div",{className:"sheen"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:141,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:131,columnNumber:4},this),e.jsxDEV(R.div,{className:"absolute right-3 sm:right-6 top-[64%] sm:top-[61%] glass-modal rounded-lg border border-white/10 px-3 py-2 text-xs shadow-xl max-w-[240px] sm:max-w-[300px]",initial:{y:-6,opacity:0},animate:{y:0,opacity:1},transition:{duration:.35},children:[e.jsxDEV("div",{className:"font-medium mb-0.5",children:"AI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:151,columnNumber:5},this),e.jsxDEV("div",{className:"text-secondary-contrast leading-snug",children:"Revenue dipped due to an 18% drop in ACME services. Suggest: follow‑up and offer 5% off for renewal."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:152,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:145,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:90,columnNumber:3},this)});function Vr({title:t}){return e.jsxDEV("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-white/30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:164,columnNumber:5},this),e.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-white/30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:165,columnNumber:5},this),e.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-white/30"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:166,columnNumber:5},this),e.jsxDEV("div",{className:"ml-2 text-[10px] tracking-wide text-secondary-contrast",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:167,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:163,columnNumber:4},this),e.jsxDEV("div",{className:"text-[10px] text-secondary-contrast",children:"AI‑Ledgr"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:169,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:162,columnNumber:3},this)}function Kb(){return e.jsxDEV("svg",{viewBox:"0 0 240 60",className:"w-full h-16",children:[e.jsxDEV("defs",{children:e.jsxDEV("linearGradient",{id:"g",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"rgb(var(--color-primary-500))",stopOpacity:"0.35"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:179,columnNumber:6},this),e.jsxDEV("stop",{offset:"100%",stopColor:"rgb(var(--color-primary-500))",stopOpacity:"0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:180,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:178,columnNumber:5},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:177,columnNumber:4},this),e.jsxDEV("path",{d:"M0 40 C 30 10, 60 20, 90 28 S 150 46, 180 30 210 12, 240 26",fill:"none",stroke:"rgb(var(--color-primary-500))",strokeWidth:"2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:183,columnNumber:4},this),e.jsxDEV("path",{d:"M0 60 L0 40 C 30 10, 60 20, 90 28 S 150 46, 180 30 210 12, 240 26 L240 60 Z",fill:"url(#g)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:184,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingScreens.tsx",lineNumber:176,columnNumber:3},this)}const Jb=[{name:"Starter",monthly:9,annual:7,features:["1 user","Invoicing","OCR receipts (50/mo)","P&L & Balance Sheet"]},{name:"Growth",tag:"MOST POPULAR",monthly:19,annual:15,features:["3 users","AI categorization","OCR receipts (200/mo)","Trial Balance & COA tools"]},{name:"Team",monthly:39,annual:32,features:["5 users","Rules & automation","OCR receipts (600/mo)","Scheduled reports"]},{name:"Pro",monthly:79,annual:64,features:["10 users","Advanced permissions","OCR receipts (1500/mo)","Priority support"]}];function Yb(){const[t,s]=c.useState(!0),i=c.useMemo(()=>[{name:"Free",tag:"DEV ONLY",monthly:0,annual:0,features:["1 user","Basic invoicing","OCR receipts (10/mo)","P&L preview"]},...Jb],[]);return e.jsxDEV("div",{className:"w-full",id:"pricing",children:[e.jsxDEV("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsxDEV("button",{className:L("px-3 py-1.5 rounded-lg text-sm border",t?"bg-white/10 border-white/10":"bg-primary/20 border-primary/30 text-primary"),onClick:()=>s(!1),children:"Monthly"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:34,columnNumber:5},this),e.jsxDEV("button",{className:L("px-3 py-1.5 rounded-lg text-sm border",t?"bg-primary/20 border-primary/30 text-primary":"bg-white/10 border-white/10"),onClick:()=>s(!0),children:["Annual ",e.jsxDEV("span",{className:"ml-1 text-xs text-secondary-contrast",children:"(save)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:44,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:40,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:33,columnNumber:4},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(r=>e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4 flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"font-semibold",children:r.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:52,columnNumber:8},this),r.tag&&e.jsxDEV("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-primary/20 text-primary border border-primary/30",children:r.tag},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV("div",{className:"text-2xl font-bold mb-1",children:["US$ ",t?r.annual:r.monthly,e.jsxDEV("span",{className:"text-xs font-medium text-secondary-contrast",children:"/mo"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:59,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-3",children:["Billed ",t?"annually":"monthly"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:61,columnNumber:7},this),e.jsxDEV("ul",{className:"text-sm text-secondary-contrast space-y-1 mb-3",children:r.features.map(n=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"inline-block mt-1 w-1.5 h-1.5 rounded-full bg-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:65,columnNumber:10},this),e.jsxDEV("span",{children:n},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:66,columnNumber:10},this)]},n,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:64,columnNumber:9},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:62,columnNumber:7},this),e.jsxDEV("button",{className:"mt-auto px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25 transition-colors text-sm",onClick:()=>{if(r.monthly===0)try{window.history.pushState({view:"register"},"","/register"),window.dispatchEvent(new PopStateEvent("popstate"))}catch{}else window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Checkout coming soon (Stripe)",type:"info"}}))},children:"Select plan"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:70,columnNumber:7},this)]},r.name,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:50,columnNumber:6},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:48,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/PricingGrid.tsx",lineNumber:31,columnNumber:3},this)}const Qb=[{h:"Invoice Template",d:"Professional, brand-ready invoice starter."},{h:"Budget Template",d:"Plan cash with month-by-month view."},{h:"COA Starter",d:"Best-practice chart of accounts."},{h:"Close Checklist",d:"Monthly close, step-by-step."}];function Xb(){return e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-3",children:"Free tools & templates"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:13,columnNumber:4},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:Qb.map(t=>e.jsxDEV("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3",children:[e.jsxDEV("div",{className:"font-medium",children:t.h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:17,columnNumber:7},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:t.d},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:18,columnNumber:7},this)]},t.h,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:16,columnNumber:6},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:14,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/ToolsTemplates.tsx",lineNumber:12,columnNumber:3},this)}function ef(){return e.jsxDEV("footer",{className:"mt-16",children:e.jsxDEV(q,{variant:"light",elevation:1,className:"p-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 text-sm",children:[e.jsxDEV(Si,{title:"For Businesses",items:["Features","Plans & Pricing","Compare Products","Small Business Accounting"]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:8,columnNumber:6},this),e.jsxDEV(Si,{title:"Features & Benefits",items:["Invoicing","Accounting Reports","Inventory","Connect Your Apps"]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:9,columnNumber:6},this),e.jsxDEV(Si,{title:"Accountants",items:["Grow Your Practice","Accountant Features","Events","Resources"]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:10,columnNumber:6},this),e.jsxDEV(Si,{title:"Learn & Support",items:["Docs","FAQ","Accounting Glossary","Templates"]},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:11,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:7,columnNumber:5},this),e.jsxDEV("div",{className:"mt-4 text-xs text-secondary-contrast",children:["© ",new Date().getFullYear()," AI‑Ledgr. All rights reserved."]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:13,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:6,columnNumber:4},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:5,columnNumber:3},this)}function Si({title:t,items:s}){return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold mb-2",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:22,columnNumber:4},this),e.jsxDEV("ul",{className:"space-y-1",children:s.map(i=>e.jsxDEV("li",{className:"text-secondary-contrast hover:text-primary cursor-pointer",children:i},i,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:25,columnNumber:6},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:23,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/LandingFooter.tsx",lineNumber:21,columnNumber:3},this)}function sf(){return e.jsxDEV("div",{className:"relative mx-auto h-40 w-40 sm:h-48 sm:w-48 lg:h-56 lg:w-56",children:[e.jsxDEV("svg",{viewBox:"0 0 100 100",className:"absolute inset-0",children:[e.jsxDEV("defs",{children:e.jsxDEV("radialGradient",{id:"glow",cx:"50%",cy:"50%",r:"50%",children:[e.jsxDEV("stop",{offset:"0%",stopColor:"rgb(var(--color-secondary-500))",stopOpacity:"0.35"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:27,columnNumber:7},this),e.jsxDEV("stop",{offset:"100%",stopColor:"rgb(var(--color-primary-500))",stopOpacity:"0.05"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:28,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:26,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:25,columnNumber:5},this),e.jsxDEV("circle",{cx:"50",cy:"50",r:"48",fill:"url(#glow)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:31,columnNumber:5},this),e.jsxDEV(R.g,{animate:{rotate:360,originX:.5,originY:.5},transition:{duration:18,repeat:1/0,ease:"linear"},children:Array.from({length:10}).map((t,s)=>e.jsxDEV("circle",{cx:50+Math.sin(s/10*Math.PI*2)*28,cy:50,r:"0.8",fill:"rgb(var(--color-primary-500))"},s,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:34,columnNumber:7},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:32,columnNumber:5},this),e.jsxDEV(R.g,{animate:{rotate:-360,originX:.5,originY:.5},transition:{duration:28,repeat:1/0,ease:"linear"},children:[14,24,32].map((t,s)=>e.jsxDEV("ellipse",{cx:"50",cy:"50",rx:"34",ry:t,fill:"none",stroke:"rgb(var(--color-primary-500))",strokeOpacity:"0.15",strokeWidth:"0.5"},s,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:40,columnNumber:7},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:38,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:24,columnNumber:4},this),e.jsxDEV("div",{className:"absolute inset-0 rounded-full border border-white/20"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:44,columnNumber:4},this),e.jsxDEV("div",{className:"absolute inset-0 animate-spin-slow rounded-full",style:{boxShadow:"inset 0 0 20px rgba(0,0,0,0.12)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:45,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:23,columnNumber:3},this)}function To({onGetStarted:t,onSignIn:s}){return e.jsxDEV("div",{className:"min-h-screen w-full relative",children:[e.jsxDEV(Wb,{onGetStarted:t,onSignIn:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:55,columnNumber:4},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 sm:pt-32 pb-12 sm:pb-16",children:[e.jsxDEV(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsxDEV("h1",{className:"text-3xl sm:text-5xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-financial-profit bg-clip-text text-transparent",children:"AILedgr — AI‑First Accounting That Feels From The Future"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:64,columnNumber:6},this),e.jsxDEV("p",{className:"mt-4 text-base sm:text-lg text-secondary-contrast max-w-3xl mx-auto",children:"Automated bookkeeping, instant posting, and live insights — so you don’t have to."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:67,columnNumber:6},this),e.jsxDEV("div",{className:"mt-6 flex items-center justify-center gap-3",children:[e.jsxDEV("button",{onClick:t,className:L("px-5 py-2.5 rounded-xl text-sm font-semibold focus:ring-focus glow-cta","bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25 transition-all"),children:"Get Started"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:71,columnNumber:7},this),e.jsxDEV("button",{onClick:s,className:L("px-5 py-2.5 rounded-xl text-sm font-semibold focus:ring-focus","bg-white/10 border border-white/10 hover:bg-white/15 backdrop-blur-md transition-all"),children:"Sign In"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:72,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:70,columnNumber:6},this),e.jsxDEV("div",{className:"mt-8 flex items-center justify-center",children:e.jsxDEV(sf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:75,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:74,columnNumber:6},this),e.jsxDEV(R.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.45},className:"mt-6 max-w-2xl mx-auto",children:e.jsxDEV(tf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:79,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:78,columnNumber:6},this),e.jsxDEV(R.div,{initial:{opacity:0,y:8},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.4},className:"mt-4",children:e.jsxDEV(nf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:83,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:82,columnNumber:6},this),e.jsxDEV("div",{className:"mt-8",children:e.jsxDEV(Gb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:86,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:85,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:58,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:14},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV(q,{elevation:2,variant:"medium",className:"p-5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(or,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:99,columnNumber:53},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:"Command Center"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:99,columnNumber:99},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:99,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Real‑time KPIs with token‑driven sparklines and conic gauges."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:100,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:98,columnNumber:6},this),e.jsxDEV(q,{elevation:2,variant:"medium",className:"p-5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(wp,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:103,columnNumber:53},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:"Liquid Glass UI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:103,columnNumber:98},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:103,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Elevation tiers and glow effects — zero hardcoded values."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:104,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:102,columnNumber:6},this),e.jsxDEV(q,{elevation:2,variant:"medium",className:"p-5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV($i,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:107,columnNumber:53},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:"3D Financial Universe"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:107,columnNumber:95},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:107,columnNumber:7},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:"Explore assets, liabilities, and flows in an immersive canvas."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:108,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:106,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:91,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.55},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-4",id:"how-it-helps",children:[{h:"1 · Capture",p:"Upload invoices and receipts (PDF, images, CSV). Built‑in OCR extracts key fields."},{h:"2 · Classify",p:"AI suggests categories; our resolver maps to the right accounts with safeguards."},{h:"3 · Post",p:"Idempotent, balanced entries posted in one click. Previews ensure confidence."}].map((i,r)=>e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-1",children:i.h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:126,columnNumber:8},this),e.jsxDEV("p",{className:"text-sm text-secondary-contrast",children:i.p},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:127,columnNumber:8},this)]},r,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:125,columnNumber:7},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:113,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.6},className:"mt-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxDEV(of,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:148,columnNumber:6},this),e.jsxDEV(af,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:149,columnNumber:6},this),e.jsxDEV(lf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:150,columnNumber:6},this),e.jsxDEV(cf,{onGetStarted:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:151,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:141,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5},className:"mt-12",children:e.jsxDEV(uf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:162,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:155,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5},className:"mt-10",children:e.jsxDEV(mf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:173,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:166,columnNumber:5},this),e.jsxDEV("div",{className:"mt-12",children:e.jsxDEV(Yb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:178,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:177,columnNumber:5},this),e.jsxDEV("div",{className:"mt-12",id:"resources",children:e.jsxDEV(Xb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:183,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:182,columnNumber:5},this),e.jsxDEV(q,{elevation:2,variant:"medium",className:"mt-12 p-6 relative overflow-hidden",children:[e.jsxDEV(R.div,{className:"pointer-events-none absolute -top-8 -left-[10%] w-[130%] h-24 -rotate-2",style:{background:"linear-gradient(90deg, rgb(var(--color-primary-500) / 0.10), rgb(var(--color-secondary-500) / 0.08), transparent 80%)"},animate:{x:[0,18,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:189,columnNumber:6},this),e.jsxDEV("div",{className:"pointer-events-none absolute -bottom-24 -right-24 w-80 h-80 rounded-full blur-3xl",style:{background:"radial-gradient(closest-side, rgb(var(--color-primary-500) / 0.12), transparent)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:196,columnNumber:6},this),e.jsxDEV("div",{className:"relative grid items-center gap-4 md:grid-cols-[1.6fr_1fr]",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl sm:text-2xl font-semibold",children:"Ready to experience AI‑First Accounting?"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:200,columnNumber:8},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Start in minutes. No credit card required."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:201,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:199,columnNumber:7},this),e.jsxDEV("div",{className:"justify-self-end",children:e.jsxDEV("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/10 backdrop-blur-xl p-1.5",children:[e.jsxDEV("button",{onClick:t,className:L("rounded-full text-sm font-semibold focus:ring-focus glow-cta transition-all","px-4 py-2 bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25"),children:"Get Started"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:205,columnNumber:9},this),e.jsxDEV("button",{onClick:s,className:L("rounded-full text-sm font-semibold focus:ring-focus transition-all","px-4 py-2 bg-white/0 text-secondary-contrast hover:bg-white/10 border border-white/10"),children:"Sign In"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:206,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:204,columnNumber:8},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:203,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:198,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:187,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.6},className:"mt-12",id:"faq",children:e.jsxDEV(q,{elevation:1,variant:"light",className:"p-6",children:[e.jsxDEV("div",{className:"text-lg font-semibold mb-4",children:"Frequently asked questions"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:221,columnNumber:7},this),e.jsxDEV("div",{className:"text-sm columns-1 md:columns-2 gap-4",children:[{q:"What is AI‑First Accounting?",a:"A modern system that automates bookkeeping tasks and augments decisions with real‑time insights."},{q:"Is my data secure?",a:"Transactions are validated via double‑entry rules; access is scoped and audited. Upcoming: SSO & role‑based controls."},{q:"Do you support receipts and invoices?",a:"Yes. Upload receipts (PDF/images) for OCR; create invoices and record revenue with overpayment handling."},{q:"Can I switch later?",a:"Yes. Import your chart of accounts and start posting immediately using setup helpers."}].map((i,r)=>e.jsxDEV("div",{className:"break-inside-avoid mb-4",children:e.jsxDEV(rf,{question:i.q,answer:i.a},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:230,columnNumber:10},this)},r,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:229,columnNumber:9},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:222,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:220,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:213,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:56,columnNumber:4},this),e.jsxDEV(ef,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:238,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:52,columnNumber:3},this)}function tf(){const t=["Why is revenue down this month?","Show top 5 vendors by spend","Post $1,200 Adobe subscription for Mar 12"];return e.jsxDEV("div",{className:"relative glass-modal glass-strong rounded-2xl border border-white/10 shadow-xl p-2 sm:p-3 overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 sheen pointer-events-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:251,columnNumber:4},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"px-2 py-1 rounded-lg bg-white/10 text-[10px] uppercase tracking-wide border border-white/10 flex items-center gap-1",children:[e.jsxDEV("svg",{viewBox:"0 0 20 20",className:"w-3 h-3",children:e.jsxDEV("circle",{cx:"10",cy:"10",r:"9",fill:"rgb(var(--color-primary-500) / 0.25)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:254,columnNumber:51},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:254,columnNumber:6},this),e.jsxDEV("span",{children:"AI Command"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:255,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:253,columnNumber:5},this),e.jsxDEV("div",{className:"flex-1",children:e.jsxDEV("div",{className:"text-left text-xs text-secondary-contrast",children:"Type a command or pick a suggestion"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:258,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:257,columnNumber:5},this),e.jsxDEV("button",{className:"text-[10px] px-2 py-1 rounded-lg bg-primary/15 text-primary border border-primary/25 hover:bg-primary/20 transition-colors",children:"Try"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:260,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:252,columnNumber:4},this),e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(s=>e.jsxDEV(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"text-xs px-2.5 py-1.5 rounded-xl bg-white/8 border border-white/10 hover:bg-white/12 transition-colors backdrop-blur-sm",children:s},s,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:264,columnNumber:6},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:262,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:250,columnNumber:3},this)}function rf({question:t,answer:s}){const[i,r]=c.useState(!1);return e.jsxDEV("div",{className:"rounded-xl border border-white/10 bg-white/5 shadow-xl overflow-hidden",children:[e.jsxDEV("button",{type:"button",onClick:()=>r(n=>!n),className:"w-full flex items-center justify-between px-4 py-3 text-left font-medium","aria-expanded":i,children:[e.jsxDEV("span",{children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:288,columnNumber:5},this),e.jsxDEV(R.span,{className:"ml-4 inline-block text-secondary-contrast",animate:{rotate:i?180:0},transition:{duration:.2},children:"▾"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:289,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:282,columnNumber:4},this),e.jsxDEV(_e,{initial:!1,children:i&&e.jsxDEV(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"px-4 pb-4 text-secondary-contrast",children:s},"content",!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:299,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:297,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:281,columnNumber:3},this)}function nf(){const{session:t}=rr(),[s,i]=c.useState(null),[r,n]=c.useState(null),[o,a]=c.useState(null);return c.useEffect(()=>{(async()=>{if(!t?.access_token){a(!1);return}try{const l=await li.getDashboardData();i({revenue:l?.metrics?.totalRevenue,expenses:l?.metrics?.totalExpenses,profit:l?.metrics?.netProfit}),a(!0)}catch{}try{const l=await li.getAiUsage();n(l?.status||null),a(!0)}catch{o===null&&a(!1)}})()},[t?.access_token]),e.jsxDEV("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[e.jsxDEV("div",{className:"glass-modal rounded-xl border border-white/10 px-3 py-1.5 text-xs shadow",children:[e.jsxDEV("strong",{className:"mr-1",children:"Summary:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:361,columnNumber:5},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:["Rev ",(s?.revenue??48400).toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:362,columnNumber:5},this),e.jsxDEV("span",{className:"mx-1",children:"·"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:363,columnNumber:5},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:["Exp ",(s?.expenses??31800).toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:364,columnNumber:5},this),e.jsxDEV("span",{className:"mx-1",children:"·"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:365,columnNumber:5},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:["Profit ",(s?.profit??16600).toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:366,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:360,columnNumber:4},this),e.jsxDEV("div",{className:"glass-modal rounded-xl border border-white/10 px-3 py-1.5 text-xs shadow",children:[e.jsxDEV("strong",{className:"mr-1",children:"AI"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:369,columnNumber:5},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:[r?.minute?.remaining??15,"/",r?.minute?.limit??15," min"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:370,columnNumber:5},this),e.jsxDEV("span",{className:"mx-1",children:"·"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:371,columnNumber:5},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:[r?.day?.remaining??200,"/",r?.day?.limit??200," day"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:372,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:368,columnNumber:4},this),o===!1&&e.jsxDEV("div",{className:"glass-modal rounded-xl border border-white/10 px-3 py-1.5 text-xs shadow text-amber-300",children:"Server offline — showing sample data"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:375,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:359,columnNumber:3},this)}function of(){const[t,s]=c.useState(!1),[i,r]=c.useState(""),[n,o]=c.useState(""),[a,l]=c.useState(""),[m,h]=c.useState(""),u=async b=>{if(b){s(!0),o(""),r("");try{const f=await Nl(b),g=String(f?.text||"").trim();r(g.slice(0,300));const N=g.match(/\b\d{4}-\d{2}-\d{2}\b/),p=g.match(/\b(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})\b/),v=g.match(/\b([A-Za-z]{3,9})\s+(\d{1,2})(?:,?\s*(\d{2,4}))?\b/);let E="";if(N)E=N[0];else if(p){let C=parseInt(p[1],10),S=parseInt(p[2],10),Z=parseInt(p[3],10);Z<100&&(Z=2e3+Z),C>=1&&C<=12&&S>=1&&S<=31&&(E=`${Z}-${String(C).padStart(2,"0")}-${String(S).padStart(2,"0")}`)}else if(v){const C=new Date,S=new Date(`${v[1]} ${v[2]} ${v[3]||C.getFullYear()}`);isNaN(S.getTime())||(E=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`)}l(E);const w=g.match(/\$\s*([0-9]{1,3}(?:,[0-9]{3})*(?:\.[0-9]{1,2})?|[0-9]+(?:\.[0-9]{1,2})?)/);h(w?w[1].replace(/,/g,""):"")}catch(f){o(f?.message||"OCR failed")}finally{s(!1)}}};return e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsxDEV(Zp,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:448,columnNumber:68},this)," AI Extract"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:448,columnNumber:5},this),e.jsxDEV("label",{className:L("text-xs px-2 py-1 rounded-lg border transition-colors cursor-pointer","bg-white/10 border-white/10 hover:bg-white/15"),children:["Choose",e.jsxDEV("input",{type:"file",accept:".pdf,.png,.jpg,.jpeg,.csv,.txt,.docx",className:"hidden",onChange:b=>u(b.target.files?.[0]||void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:450,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:449,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:447,columnNumber:4},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Upload a receipt/invoice — a smart preview shows key fields."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:453,columnNumber:4},this),e.jsxDEV("div",{className:"mt-2 text-[11px] rounded-lg bg-white/5 border border-white/10 p-2 min-h-[56px]",children:t?"Extracting…":n?e.jsxDEV("span",{className:"text-red-400",children:n},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:455,columnNumber:43},this):e.jsxDEV("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-secondary-contrast",children:[e.jsxDEV(wn,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:457,columnNumber:72},this),e.jsxDEV("span",{className:"truncate",children:i?i.slice(0,90):"No file uploaded yet."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:458,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:457,columnNumber:7},this),i&&e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV("span",{className:"px-1.5 py-0.5 rounded bg-white/10 border border-white/10 inline-flex items-center gap-1",children:[e.jsxDEV(mp,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:462,columnNumber:115},this),e.jsxDEV("span",{children:["Date: ",a||"—"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:463,columnNumber:10},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:462,columnNumber:9},this),e.jsxDEV("span",{className:"px-1.5 py-0.5 rounded bg-white/10 border border-white/10 inline-flex items-center gap-1",children:[e.jsxDEV(yn,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:465,columnNumber:115},this),e.jsxDEV("span",{children:["Amount: ",m?`$${Number(m).toLocaleString()}`:"—"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:466,columnNumber:10},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:465,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:461,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:456,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:454,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:446,columnNumber:3},this)}function af(){const[t,s]=c.useState("Adobe Creative Cloud annual subscription"),[i,r]=c.useState(!1),[n,o]=c.useState(null),[a,l]=c.useState(""),m=async()=>{r(!0),l(""),o(null);try{const h=await Ib(t,"Adobe");o(h)}catch(h){l(h?.message||"Suggestion failed")}finally{r(!1)}};return e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-2",children:"AI Category"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:495,columnNumber:4},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-2",children:"Enter an expense description and get a suggested category."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:496,columnNumber:4},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{value:t,onChange:h=>s(h.target.value),className:"flex-1 text-xs px-2 py-1 rounded-lg bg-white/10 border border-white/10 focus:outline-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:498,columnNumber:5},this),e.jsxDEV("button",{onClick:m,className:"text-xs px-2 py-1 rounded-lg bg-primary/15 text-primary border border-primary/25 hover:bg-primary/20 transition-colors disabled:opacity-60",disabled:i,children:i?"Thinking…":"Suggest"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:499,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:497,columnNumber:4},this),e.jsxDEV("div",{className:"mt-2 text-[11px] rounded-lg bg-white/5 border border-white/10 p-2 min-h-[56px]",children:a?e.jsxDEV("span",{className:"text-red-400",children:a},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:504,columnNumber:12},this):n?e.jsxDEV("div",{children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Name:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:506,columnNumber:12},this)," ",n?.category?.name||n?.suggestion?.name||"—"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:506,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Account:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:507,columnNumber:12},this)," ",n?.category?.accountCode||n?.suggestion?.accountCode||"—"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:507,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Confidence:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:508,columnNumber:12},this)," ",(n?.category?.confidence??n?.suggestion?.confidence??0).toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:508,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:505,columnNumber:6},this):"No suggestion yet."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:503,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:494,columnNumber:3},this)}function lf(){const{session:t}=rr(),[s,i]=c.useState("Loading…"),[r,n]=c.useState("flat"),[o,a]=c.useState(0),[l,m]=c.useState(""),[h,u]=c.useState(!1),b=async()=>{try{if(u(!0),!t?.access_token){i("Revenue $20,137.88 — steady upward trend. Consider upselling top clients."),n("up"),a(.07),m("Subscriptions");return}const f=await li.getDashboardData(),g=(Array.isArray(f?.aiInsights)?f.aiInsights:[])[0]||{message:"Revenue $20,137.88 — steady upward trend. Consider upselling top clients.",trend:"up",delta:.08,driver:"Top 3 customers"};i(g.message),n(g.trend==="down"?"down":g.trend==="up"?"up":"flat"),a(Math.abs(Number(g.delta))||.08),m(g.driver||"Enterprise renewals")}catch{i("Revenue $20,137.88 — steady upward trend. Consider upselling top clients."),n("up"),a(.07),m("Subscriptions")}finally{u(!1)}};return c.useEffect(()=>{b()},[t?.access_token]),e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:"Anomaly Alert"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:555,columnNumber:5},this),e.jsxDEV("button",{onClick:b,className:"text-xs px-2 py-1 rounded-lg bg-white/10 border border-white/10 hover:bg-white/15 transition-colors disabled:opacity-60",disabled:h,children:[e.jsxDEV(bl,{className:"w-3 h-3 inline mr-1"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:557,columnNumber:6},this)," Refresh"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:556,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:554,columnNumber:4},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-2 min-h-[36px]",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:560,columnNumber:4},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-2",children:[e.jsxDEV("div",{className:"text-[10px] uppercase tracking-wide text-secondary-contrast",children:"Trend"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:563,columnNumber:6},this),e.jsxDEV("div",{className:L("text-sm font-semibold",r==="up"?"text-financial-profit":r==="down"?"text-financial-expense":""),children:r.toUpperCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:564,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:562,columnNumber:5},this),e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-2",children:[e.jsxDEV("div",{className:"text-[10px] uppercase tracking-wide text-secondary-contrast",children:"Delta"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:567,columnNumber:6},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:[(o*100).toFixed(1),"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:568,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:566,columnNumber:5},this),e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-2",children:[e.jsxDEV("div",{className:"text-[10px] uppercase tracking-wide text-secondary-contrast",children:"Driver"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:571,columnNumber:6},this),e.jsxDEV("div",{className:"text-sm font-semibold truncate",children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:572,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:570,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:561,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:553,columnNumber:3},this)}function cf({onGetStarted:t}){const[s,i]=c.useState("Post $500 AWS for Mar 10"),[r,n]=c.useState(!1),[o,a]=c.useState(null),[l,m]=c.useState("");function h(b){const f=b.match(/\$\s*([0-9]+(?:\.[0-9]{1,2})?)/i),x=f?parseFloat(f[1]):NaN;let N=b.replace(/post|\$[\d\.]+|for|on|\bin\b/gi," ").trim().split(/\s+/).filter(Boolean).slice(0,3).join(" ");const p=b.match(/\b([A-Za-z]{3,9}\s+\d{1,2}(?:,?\s*\d{2,4})?)\b/i),v=new Date;let E=v.toISOString().slice(0,10);if(p){const w=new Date(p[1]+(p[1].match(/\d{4}/)?"":` ${v.getFullYear()}`));isNaN(w.getTime())||(E=w.toISOString().slice(0,10))}return(!N||N.toLowerCase()==="post")&&(N="Vendor"),{amount:x,vendorName:N,date:E,description:b}}const u=async()=>{n(!0),m(""),a(null);try{const b=h(s);if(!(b.amount>0))throw new Error("Could not parse amount");const f=await xl({vendorName:b.vendorName,amount:b.amount.toFixed(2),date:b.date,description:b.description});a(f)}catch{m(""),a({dateUsed:new Date().toISOString().slice(0,10),policy:"Sample — balanced entries",entries:[{type:"debit",accountCode:"6110",accountName:"Software Subscriptions",amount:500},{type:"credit",accountCode:"1010",accountName:"Cash",amount:500}]})}finally{n(!1)}};return e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-2",children:"Natural‑Language Posting"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:629,columnNumber:4},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-2",children:"Type a command and preview balanced entries (no data saved)."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:630,columnNumber:4},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{value:s,onChange:b=>i(b.target.value),className:"flex-1 text-xs px-2 py-1 rounded-lg bg-white/10 border border-white/10 focus:outline-none"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:632,columnNumber:5},this),e.jsxDEV("button",{onClick:u,className:"text-xs px-2 py-1 rounded-lg bg-primary/15 text-primary border border-primary/25 hover:bg-primary/20 transition-colors disabled:opacity-60",disabled:r,children:[e.jsxDEV(kp,{className:"w-3 h-3 inline mr-1"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:634,columnNumber:6},this)," ",r?"Previewing…":"Preview"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:633,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:631,columnNumber:4},this),e.jsxDEV("div",{className:"mt-2 text-[11px] rounded-lg bg-white/5 border border-white/10 p-2 min-h-[56px]",children:l?e.jsxDEV("span",{className:"text-red-400",children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:638,columnNumber:12},this):o?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"mb-1",children:[e.jsxDEV("strong",{children:"Date:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:640,columnNumber:29},this)," ",o?.dateUsed||"—"," ",e.jsxDEV("span",{className:"ml-2 text-secondary-contrast",children:o?.policy},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:640,columnNumber:79},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:640,columnNumber:7},this),e.jsxDEV("div",{className:"font-semibold mb-1",children:"Entries"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:641,columnNumber:7},this),e.jsxDEV("ul",{className:"space-y-1",children:Array.isArray(o?.entries)?o.entries.map((b,f)=>e.jsxDEV("li",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:L("rounded px-1",b.type==="debit"?"text-financial-revenue":"text-financial-expense"),children:b.type.toUpperCase()},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:645,columnNumber:10},this),e.jsxDEV("span",{className:"text-secondary-contrast",children:[b.accountCode," — ",b.accountName]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:646,columnNumber:10},this),e.jsxDEV("span",{className:"font-semibold",children:["$",Number(b.amount).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:647,columnNumber:10},this)]},f,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:644,columnNumber:9},this)):"—"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:642,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:639,columnNumber:6},this):e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"No preview yet."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:654,columnNumber:7},this),e.jsxDEV("button",{onClick:t,className:"text-xs px-2 py-1 rounded-lg bg-primary/15 text-primary border border-primary/25 hover:bg-primary/20 transition-colors",children:"Create an account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:655,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:653,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:637,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:628,columnNumber:3},this)}function uf(){return e.jsxDEV(q,{elevation:2,variant:"medium",className:"p-5",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxDEV(yp,{className:"w-5 h-5 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:666,columnNumber:50},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:"Security & Compliance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:666,columnNumber:98},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:666,columnNumber:4},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs",children:[e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-3",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Encryption"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:669,columnNumber:6},this),e.jsxDEV("div",{className:"text-secondary-contrast",children:"TLS in transit · scoped access · signed URLs"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:670,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:668,columnNumber:5},this),e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-3",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Posting Engine"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:673,columnNumber:6},this),e.jsxDEV("div",{className:"text-secondary-contrast",children:"Balanced double‑entry invariants · idempotency"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:674,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:672,columnNumber:5},this),e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-3",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Compliance"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:677,columnNumber:6},this),e.jsxDEV("div",{className:"text-secondary-contrast",children:"SOC2 in progress · regional data residency (soon)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:678,columnNumber:6},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:676,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:667,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:665,columnNumber:3},this)}function mf(){const t=[{name:"Avery — CFO",quote:"The only accounting UI my team actually enjoys using."},{name:"Jordan — Founder",quote:"Setup took minutes and the insights are instant."},{name:"Casey — Controller",quote:"Posting engine caught things our old system missed."}];return e.jsxDEV(q,{elevation:1,variant:"light",className:"p-4",children:[e.jsxDEV("div",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsxDEV(Cp,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:693,columnNumber:72},this)," What leaders say"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:693,columnNumber:4},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:t.map((s,i)=>e.jsxDEV("div",{className:"rounded-lg bg-white/6 border border-white/10 p-3",children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-1",children:["“",s.quote,"”"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:697,columnNumber:7},this),e.jsxDEV("div",{className:"text-[11px] font-medium",children:s.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:698,columnNumber:7},this)]},i,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:696,columnNumber:6},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:694,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/landing/Landing.tsx",lineNumber:692,columnNumber:3},this)}function Vn({title:t,subtitle:s,children:i}){return e.jsxDEV("div",{className:L("relative w-full max-w-md mx-auto"),children:[e.jsxDEV(q,{variant:"heavy",elevation:3,glow:!0,className:L("p-6 sm:p-8 glass-modal relative z-10"),children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-primary-contrast",children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:15,columnNumber:6},this),s&&e.jsxDEV("div",{className:"text-sm text-secondary-contrast mt-1",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:16,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:14,columnNumber:5},this),i]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:13,columnNumber:4},this),e.jsxDEV("div",{className:"pointer-events-none absolute -top-6 -left-8 w-28 h-28 rounded-full opacity-30",style:{background:"radial-gradient(circle, rgb(var(--color-primary-500) / 0.20), transparent 60%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:20,columnNumber:4},this),e.jsxDEV("div",{className:"pointer-events-none absolute -bottom-8 -right-10 w-36 h-36 rounded-full opacity-20",style:{background:"radial-gradient(circle, rgb(var(--color-secondary-500) / 0.18), transparent 60%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:21,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/AuthCard.tsx",lineNumber:12,columnNumber:3},this)}function df({open:t,onClose:s,defaultEmail:i=""}){const[r,n]=c.useState(i),[o,a]=c.useState(!1),[l,m]=c.useState(""),[h,u]=c.useState(""),b=async()=>{if(r){a(!0),m(""),u("");try{const f=`${window.location.origin}/reset-password`,{error:x}=await hs.auth.resetPasswordForEmail(r,{redirectTo:f});if(x)throw x;m("Password reset link sent. Check your email."),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Reset link sent",type:"success"}}))}catch(f){const x=f?.message||"Failed to send reset email";u(x),window.dispatchEvent(new CustomEvent("toast",{detail:{message:x,type:"error"}}))}finally{a(!1)}}};return t?e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",role:"dialog","aria-modal":"true",children:[e.jsxDEV(R.div,{className:"absolute inset-0 bg-black/40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:43,columnNumber:5},this),e.jsxDEV(R.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.2},className:"relative w-full max-w-md",children:e.jsxDEV(q,{variant:"heavy",elevation:3,className:"p-6 sm:p-7",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold text-primary-contrast",children:"Forgot password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Enter your email to receive a reset link"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:51,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:49,columnNumber:8},this),e.jsxDEV("button",{className:"p-1 rounded-md hover:bg-white/10",onClick:s,"aria-label":"Close",children:e.jsxDEV(Ft,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:53,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:58,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80",children:e.jsxDEV(Cn,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:60,columnNumber:95},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV("input",{value:r,onChange:f=>n(f.target.value),type:"email",className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"you@example.com"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:61,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:59,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV(_e,{children:[h&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-red-400 mt-2",children:h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:66,columnNumber:9},this),l&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-green-400 mt-2",children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:69,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV(R.button,{type:"button",disabled:o||!r,whileTap:{scale:.98},onClick:b,className:"mt-4 w-full px-4 py-3 rounded-2xl bg-primary/20 text-primary border border-primary/30 hover:bg-primary/25 disabled:opacity-60 transition-all duration-300",children:o?"Sending…":"Send reset link"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:72,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:47,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:46,columnNumber:5},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:41,columnNumber:4},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ForgotPasswordModal.tsx",lineNumber:40,columnNumber:3},this):null}function Po({onRegister:t}){const[s,i]=c.useState(""),[r,n]=c.useState(""),[o,a]=c.useState(!1),[l,m]=c.useState(""),[h,u]=c.useState(""),[b,f]=c.useState(0),[x,g]=c.useState(!1),N=E=>{try{const w=getComputedStyle(document.documentElement).getPropertyValue(E).trim();if(!w)return"#a855f7";const[C,S,Z]=w.split(" ").map(T=>parseInt(T,10)),D=T=>T.toString(16).padStart(2,"0");return`#${D(C)}${D(S)}${D(Z)}`}catch{return"#a855f7"}},p=async()=>{try{const E=await Vt(()=>import("./confetti.module-SFXlHgBM.js"),[]),w=E.default||E,C=["--color-primary-500","--color-financial-profit","--color-secondary-500","--color-warning-500"].map(N);w({particleCount:80,spread:60,origin:{y:.5},colors:C}),w({particleCount:60,angle:60,spread:55,origin:{x:0},colors:C}),w({particleCount:60,angle:120,spread:55,origin:{x:1},colors:C})}catch{}},v=async()=>{a(!0),m("");try{const{error:E}=await hs.auth.signInWithPassword({email:s,password:r});if(E)throw E;u("Signed in successfully"),await p(),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Signed in",type:"success"}})),setTimeout(()=>{window.history.pushState({view:"dashboard"},"","/dashboard"),window.dispatchEvent(new PopStateEvent("popstate"))},450)}catch(E){const w=E?.message||"Sign in failed";m(w),window.dispatchEvent(new CustomEvent("toast",{detail:{message:w,type:"error"}})),f(Math.random())}finally{a(!1)}};return e.jsxDEV("div",{className:"relative min-h-[70vh] flex items-center justify-center px-4",children:[e.jsxDEV(R.div,{className:"pointer-events-none absolute -top-12 -right-10 w-72 h-72 rounded-full",style:{background:"radial-gradient(circle, rgb(var(--color-primary-500) / 0.18), transparent 60%)"},animate:{x:[0,6,0],y:[0,-4,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:66,columnNumber:4},this),e.jsxDEV(R.div,{className:"pointer-events-none absolute -bottom-10 -left-8 w-64 h-64 rounded-full",style:{background:"radial-gradient(circle, rgb(var(--color-secondary-500) / 0.14), transparent 60%)"},animate:{x:[0,-4,0],y:[0,5,0]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:67,columnNumber:4},this),e.jsxDEV(R.div,{initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1,x:l?[0,-8,8,-6,6,-3,3,0]:0},transition:{duration:.5,ease:[.23,1,.32,1]},className:"w-full",children:e.jsxDEV(Vn,{title:"Welcome back",subtitle:"Sign in to your account",children:e.jsxDEV("form",{className:"space-y-4",onSubmit:E=>{E.preventDefault(),v()},children:[e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:78,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(R.span,{"aria-hidden":!0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full",initial:!1,animate:{opacity:s?.35:.15,scale:s?1:.9},style:{background:"rgb(var(--color-primary-500) / 0.20)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:80,columnNumber:9},this),e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80 transition-colors",style:{color:s?"rgb(var(--color-primary-500))":void 0},children:e.jsxDEV(Cn,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:81,columnNumber:184},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV("input",{value:s,onChange:E=>i(E.target.value),type:"email",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"you@example.com"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV(R.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl",initial:!1,animate:{boxShadow:s?"inset 0 0 0 1px rgba(255,255,255,0.08)":"none"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:83,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:79,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:87,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(R.span,{"aria-hidden":!0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full",initial:!1,animate:{opacity:r?.35:.15,scale:r?1:.9},style:{background:"rgb(var(--color-primary-500) / 0.20)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80 transition-colors",style:{color:r?"rgb(var(--color-primary-500))":void 0},children:e.jsxDEV(qi,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:90,columnNumber:187},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:90,columnNumber:9},this),e.jsxDEV("input",{value:r,onChange:E=>n(E.target.value),type:"password",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"Enter password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV(R.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl",initial:!1,animate:{boxShadow:r?"inset 0 0 0 1px rgba(255,255,255,0.08)":"none"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:88,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(_e,{children:l&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-red-400",children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:95,columnNumber:7},this),e.jsxDEV(R.button,{type:"submit",disabled:o,whileTap:{scale:.98},className:"relative overflow-hidden group w-full mt-2 px-4 py-3 rounded-2xl bg-primary/20 text-primary border border-primary/30 focus:ring-primary disabled:opacity-60 transition-all duration-300 hover:bg-primary/25 hover:shadow-[0_8px_40px_rgba(0,0,0,0.15)]",children:[e.jsxDEV(R.div,{className:"absolute inset-0 -translate-x-full group-hover:translate-x-0 transition-transform duration-700 opacity-60",style:{background:"linear-gradient(90deg, transparent, rgb(var(--color-primary-500) / 0.30), transparent)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:103,columnNumber:8},this),e.jsxDEV(R.span,{initial:!1,animate:{scale:o?.98:1},className:"relative inline-flex items-center justify-center gap-2",children:o?"Signing in…":"Sign in"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:104,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:102,columnNumber:7},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast text-center flex flex-col gap-1",children:[e.jsxDEV("button",{type:"button",className:"underline",onClick:()=>g(!0),children:"Forgot your password?"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:109,columnNumber:8},this),e.jsxDEV("div",{children:["Don't have an account? ",e.jsxDEV("button",{type:"button",className:"underline",onClick:t,children:"Sign up"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:111,columnNumber:37},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:110,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:108,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:76,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:75,columnNumber:5},this)},b,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:68,columnNumber:4},this),e.jsxDEV(df,{open:x,onClose:()=>g(!1),defaultEmail:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:118,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/LoginView.tsx",lineNumber:64,columnNumber:3},this)}function hf({onLogin:t}){const[s,i]=c.useState(""),[r,n]=c.useState(""),[o,a]=c.useState(""),[l,m]=c.useState(!1),[h,u]=c.useState(""),[b,f]=c.useState(""),[x,g]=c.useState(""),[N,p]=c.useState(0),v=C=>{try{const S=getComputedStyle(document.documentElement).getPropertyValue(C).trim();if(!S)return"#a855f7";const[Z,D,T]=S.split(" ").map(W=>parseInt(W,10)),U=W=>W.toString(16).padStart(2,"0");return`#${U(Z)}${U(D)}${U(T)}`}catch{return"#a855f7"}},E=async()=>{try{const C=await Vt(()=>import("./confetti.module-SFXlHgBM.js"),[]),S=C.default||C,Z=["--color-primary-500","--color-financial-profit","--color-secondary-500","--color-warning-500"].map(v);S({particleCount:90,spread:70,origin:{y:.5},colors:Z}),S({particleCount:60,angle:60,spread:65,origin:{x:0},colors:Z}),S({particleCount:60,angle:120,spread:65,origin:{x:1},colors:Z})}catch{}},w=async()=>{m(!0),u(""),f("");try{const C=`${window.location.origin}/login`,{data:S,error:Z}=await hs.auth.signUp({email:s,password:o,options:{data:{name:r},emailRedirectTo:C}});if(Z)throw Z;S?.user&&!S.user?.email_confirmed_at&&(f("Check your email to verify your address and activate your account. After confirming, you will land on the sign‑in page."),g("Verification email sent"),await E()),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Account created",type:"success"}}))}catch(C){const S=C?.message||"Sign up failed";u(S),window.dispatchEvent(new CustomEvent("toast",{detail:{message:S,type:"error"}})),p(Math.random())}finally{m(!1)}};return e.jsxDEV("div",{className:"relative min-h-[70vh] flex items-center justify-center px-4",children:[e.jsxDEV(R.div,{className:"pointer-events-none absolute -top-12 -right-10 w-72 h-72 rounded-full",style:{background:"radial-gradient(circle, rgb(var(--color-primary-500) / 0.18), transparent 60%)"},animate:{x:[0,6,0],y:[0,-4,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:63,columnNumber:4},this),e.jsxDEV(R.div,{className:"pointer-events-none absolute -bottom-10 -left-8 w-64 h-64 rounded-full",style:{background:"radial-gradient(circle, rgb(var(--color-secondary-500) / 0.14), transparent 60%)"},animate:{x:[0,-4,0],y:[0,5,0]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:64,columnNumber:4},this),e.jsxDEV(R.div,{initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1,x:h?[0,-8,8,-6,6,-3,3,0]:0},transition:{duration:.5,ease:[.23,1,.32,1]},className:"w-full",children:e.jsxDEV(Vn,{title:"Create your account",subtitle:"Start your AI‑First finance journey",children:e.jsxDEV("form",{className:"space-y-4",onSubmit:C=>{C.preventDefault(),w()},children:[e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:69,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(R.span,{"aria-hidden":!0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full",initial:!1,animate:{opacity:r?.35:.15,scale:r?1:.9},style:{background:"rgb(var(--color-primary-500) / 0.20)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80 transition-colors",style:{color:r?"rgb(var(--color-primary-500))":void 0},children:e.jsxDEV(Sp,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:72,columnNumber:183},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV("input",{value:r,onChange:C=>n(C.target.value),className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"Your full name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV(R.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl",initial:!1,animate:{boxShadow:r?"inset 0 0 0 1px rgba(255,255,255,0.08)":"none"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:70,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:68,columnNumber:7},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Email"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:78,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(R.span,{"aria-hidden":!0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full",initial:!1,animate:{opacity:s?.35:.15,scale:s?1:.9},style:{background:"rgb(var(--color-primary-500) / 0.20)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:80,columnNumber:9},this),e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80 transition-colors",style:{color:s?"rgb(var(--color-primary-500))":void 0},children:e.jsxDEV(Cn,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:81,columnNumber:184},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV("input",{value:s,onChange:C=>i(C.target.value),type:"email",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"you@example.com"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV(R.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl",initial:!1,animate:{boxShadow:s?"inset 0 0 0 1px rgba(255,255,255,0.08)":"none"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:83,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:79,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:87,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV(R.span,{"aria-hidden":!0,className:"absolute left-2 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full",initial:!1,animate:{opacity:o?.35:.15,scale:o?1:.9},style:{background:"rgb(var(--color-primary-500) / 0.20)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80 transition-colors",style:{color:o?"rgb(var(--color-primary-500))":void 0},children:e.jsxDEV(qi,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:90,columnNumber:187},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:90,columnNumber:9},this),e.jsxDEV("input",{value:o,onChange:C=>a(C.target.value),type:"password",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"Enter password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV(R.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl",initial:!1,animate:{boxShadow:o?"inset 0 0 0 1px rgba(255,255,255,0.08)":"none"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:88,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(_e,{children:[h&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-red-400",children:h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:97,columnNumber:9},this),b&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-green-400",children:b},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:102,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:95,columnNumber:7},this),e.jsxDEV(R.button,{type:"submit",disabled:l,whileTap:{scale:.98},className:"relative overflow-hidden group w-full mt-2 px-4 py-3 rounded-2xl bg-primary/20 text-primary border border-primary/30 focus:ring-primary disabled:opacity-60 transition-all duration-300 hover:bg-primary/25 hover:shadow-[0_8px_40px_rgba(0,0,0,0.15)]",children:[e.jsxDEV(R.div,{className:"absolute inset-0 -translate-x-full group-hover:translate-x-0 transition-transform duration-700 opacity-60",style:{background:"linear-gradient(90deg, transparent, rgb(var(--color-primary-500) / 0.30), transparent)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:108,columnNumber:8},this),e.jsxDEV(R.span,{initial:!1,animate:{scale:l?.98:1},className:"relative inline-flex items-center justify-center gap-2",children:l?"Creating…":"Create account"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:109,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:107,columnNumber:7},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast text-center",children:["Already have an account? ",e.jsxDEV("button",{type:"button",className:"underline",onClick:t,children:"Sign in"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:114,columnNumber:33},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:113,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:67,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:66,columnNumber:5},this)},N,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:65,columnNumber:4},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/RegisterView.tsx",lineNumber:61,columnNumber:3},this)}function pf({onDone:t}){const[s,i]=c.useState(""),[r,n]=c.useState(""),[o,a]=c.useState(!1),[l,m]=c.useState(""),[h,u]=c.useState(""),[b,f]=c.useState(!1);c.useEffect(()=>{const g=hs.auth.onAuthStateChange((N,p)=>{p&&f(!0)}).data?.subscription;return(async()=>{try{const{data:N}=await hs.auth.getSession();if(N?.session){f(!0);return}const p=hs.auth;if(typeof p.getSessionFromUrl=="function")try{const{data:Z,error:D}=await p.getSessionFromUrl({storeSession:!0});if(!D&&Z?.session){f(!0);return}}catch{}const v=new URL(window.location.href),E=v.searchParams.get("type")||v.hash.match(/type=([^&]+)/)?.[1],w=v.searchParams.get("access_token")||v.hash.match(/access_token=([^&]+)/)?.[1],C=v.searchParams.get("refresh_token")||v.hash.match(/refresh_token=([^&]+)/)?.[1];if(w&&C){const{data:Z,error:D}=await hs.auth.setSession({access_token:w,refresh_token:C});if(!D&&Z?.session){f(!0);return}}const S=v.searchParams.get("code")||v.hash.match(/code=([^&]+)/)?.[1];if(S&&hs.auth.exchangeCodeForSession){const{data:Z,error:D}=await hs.auth.exchangeCodeForSession({code:S});if(!D&&Z?.session){f(!0);return}}}catch{}f(!1)})(),()=>{try{g?.unsubscribe()}catch{}}},[]);const x=async()=>{if(!s||s.length<8){m("Password must be at least 8 characters");return}if(s!==r){m("Passwords do not match");return}a(!0),m(""),u("");try{const{data:g,error:N}=await hs.auth.updateUser({password:s});if(N)throw N;u("Password updated. You can now sign in."),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Password updated",type:"success"}})),setTimeout(()=>{t?.();try{window.history.pushState({view:"login"},"","/login"),window.dispatchEvent(new PopStateEvent("popstate"))}catch{}},800)}catch(g){m(g?.message||"Failed to update password"),window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Failed to update password",type:"error"}}))}finally{a(!1)}};return e.jsxDEV("div",{className:"relative min-h-[70vh] flex items-center justify-center px-4",children:e.jsxDEV(R.div,{initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full",children:e.jsxDEV(Vn,{title:"Set a new password",subtitle:"Enter your new password below",children:e.jsxDEV("form",{className:"space-y-4",onSubmit:g=>{g.preventDefault(),x()},children:[e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"New Password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:87,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80",children:e.jsxDEV(qi,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:89,columnNumber:95},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV("input",{value:s,onChange:g=>i(g.target.value),type:"password",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"Enter new password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:88,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV("label",{className:"block text-sm",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Confirm Password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:94,columnNumber:8},this),e.jsxDEV("div",{className:"relative mt-1",children:[e.jsxDEV("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary-contrast/80",children:e.jsxDEV(qi,{size:16},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:96,columnNumber:95},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV("input",{value:r,onChange:g=>n(g.target.value),type:"password",required:!0,className:L("w-full pl-9 pr-3 py-3 rounded-xl bg-white/10 border border-white/10 focus:ring-focus backdrop-blur-sm transition-all duration-200 focus:shadow-[0_0_0_4px_rgb(var(--color-primary-500)_/_0.15)]"),placeholder:"Confirm new password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:97,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:95,columnNumber:8},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:93,columnNumber:7},this),e.jsxDEV(_e,{children:[l&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-red-400",children:l},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:101,columnNumber:19},this),h&&e.jsxDEV(R.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-xs text-green-400",children:h},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:102,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:100,columnNumber:7},this),!b&&e.jsxDEV("div",{className:"text-xs text-red-400",children:"Auth session missing! Please open the link directly from your email again."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:105,columnNumber:8},this),e.jsxDEV(R.button,{type:"submit",disabled:o||!b,whileTap:{scale:.98},className:"relative overflow-hidden group w-full mt-2 px-4 py-3 rounded-2xl bg-primary/20 text-primary border border-primary/30 focus:ring-primary disabled:opacity-60 transition-all duration-300 hover:bg-primary/25",children:o?"Updating…":"Update password"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:107,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:85,columnNumber:6},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:84,columnNumber:5},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:83,columnNumber:4},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/auth/ResetPasswordView.tsx",lineNumber:82,columnNumber:3},this)}const Mo=["Add $500 Adobe subscription expense","Show me profit trends for last quarter","Create invoice for ACME Corp $5000","Set budget alert for marketing at $2000","Generate cash flow report","Record $1200 freelancer payment"];function bf({isActive:t,onToggle:s}){const[i,r]=c.useState(!1),[n,o]=c.useState(""),[a,l]=c.useState([]),[m,h]=c.useState(0),[u,b]=c.useState(!0),f=c.useRef(null),x=c.useRef();c.useEffect(()=>{const Z=window.SpeechRecognition||window.webkitSpeechRecognition;b(!!Z)},[]),c.useEffect(()=>{if(i){const Z=()=>{h(Math.random()*100),x.current=requestAnimationFrame(Z)};Z()}else x.current&&cancelAnimationFrame(x.current),h(0);return()=>{x.current&&cancelAnimationFrame(x.current)}},[i]);const g=()=>{if(!u){alert("Speech recognition is not supported in your browser");return}i?p():N()},N=()=>{try{const Z=window.SpeechRecognition||window.webkitSpeechRecognition;if(!Z){v();return}f.current=new Z,f.current.continuous=!0,f.current.interimResults=!0,f.current.lang="en-US",f.current.onstart=()=>{r(!0),o("")},f.current.onresult=D=>{let T="";for(let U=D.resultIndex;U<D.results.length;U++)D.results[U].isFinal?T+=D.results[U][0].transcript:o(D.results[U][0].transcript);T&&E(T,D.results[D.resultIndex][0].confidence)},f.current.onerror=D=>{console.error("Speech recognition error:",D.error),r(!1)},f.current.onend=()=>{r(!1),o("")},f.current.start()}catch(Z){console.error("Error starting speech recognition:",Z),v()}},p=()=>{f.current&&f.current.stop(),r(!1),o("")},v=()=>{r(!0),o("Listening..."),setTimeout(()=>{const Z=Mo[Math.floor(Math.random()*Mo.length)];o(Z),setTimeout(()=>{E(Z,.95),r(!1),o("")},1500)},2e3)},E=async(Z,D)=>{const T={id:`cmd-${Date.now()}`,transcript:Z,command:w(Z),confidence:D,timestamp:Date.now(),status:"processing"};l(U=>[T,...U.slice(0,4)]),setTimeout(()=>{const U=Math.random()>.2;l(W=>W.map(se=>se.id===T.id?{...se,status:U?"success":"error",result:U?C(T.command):"Command failed to execute"}:se))},2e3)},w=Z=>{const D=Z.toLowerCase();return D.includes("add")&&D.includes("expense")?"ADD_EXPENSE":D.includes("show")&&D.includes("trend")?"SHOW_TRENDS":D.includes("create")&&D.includes("invoice")?"CREATE_INVOICE":D.includes("budget")&&D.includes("alert")?"SET_BUDGET_ALERT":D.includes("generate")&&D.includes("report")?"GENERATE_REPORT":D.includes("record")&&D.includes("payment")?"RECORD_PAYMENT":"GENERAL_QUERY"},C=Z=>{switch(Z){case"ADD_EXPENSE":return"Expense added successfully!";case"SHOW_TRENDS":return"Displaying profit trends...";case"CREATE_INVOICE":return"Invoice created and sent!";case"SET_BUDGET_ALERT":return"Budget alert configured!";case"GENERATE_REPORT":return"Report generated successfully!";case"RECORD_PAYMENT":return"Payment recorded!";default:return"Command executed successfully!"}},S=Z=>{switch(Z){case"ADD_EXPENSE":return"💳";case"SHOW_TRENDS":return"📈";case"CREATE_INVOICE":return"📄";case"SET_BUDGET_ALERT":return"⚠️";case"GENERATE_REPORT":return"📊";case"RECORD_PAYMENT":return"💰";default:return"🤖"}};return t?e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] modal-overlay flex items-center justify-center p-4",children:e.jsxDEV(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full max-w-md",children:e.jsxDEV(q,{variant:"light",className:"p-6 glass-modal liquid-glass",hover:!1,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsxDEV(Rp,{className:"w-4 h-4 text-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:280,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:279,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold",children:"Voice Commands"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-muted-contrast",children:"AI-powered voice interface"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:284,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:278,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>s(!1),className:"p-1 rounded-md hover:bg-surface/50 transition-colors",children:"✕"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:277,columnNumber:11},this),e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV(R.button,{onClick:g,whileHover:{scale:1.05},whileTap:{scale:.95},className:L("relative w-20 h-20 rounded-full transition-all duration-300 mx-auto mb-4",i?"bg-red-500 hover:bg-red-600 shadow-lg shadow-red-500/25":"bg-primary hover:bg-primary/90 shadow-lg shadow-primary/25"),children:[i?e.jsxDEV(gp,{className:"w-8 h-8 text-white mx-auto"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:309,columnNumber:17},this):e.jsxDEV(Vo,{className:"w-8 h-8 text-white mx-auto"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:311,columnNumber:17},this),e.jsxDEV(_e,{children:i&&e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full border-4 border-white/30",animate:{scale:[1,1+m/100,1],opacity:[.3,.6,.3]},transition:{duration:.3}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:317,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:315,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:297,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast mb-2",children:i?"Listening...":"Click to start speaking"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:329,columnNumber:13},this),e.jsxDEV(_e,{children:n&&e.jsxDEV(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-surface/50 rounded-lg text-sm min-h-[40px] flex items-center justify-center",children:['"',n,'"']},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:336,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:334,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:296,columnNumber:11},this),a.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[e.jsxDEV(Gt,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:352,columnNumber:17},this),"Recent Commands"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:351,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e.jsxDEV(_e,{children:a.map(Z=>e.jsxDEV(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:L("p-3 rounded-lg border text-sm",Z.status==="processing"&&"border-yellow-500/30 bg-yellow-500/5",Z.status==="success"&&"border-green-500/30 bg-green-500/5",Z.status==="error"&&"border-red-500/30 bg-red-500/5"),children:e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"text-lg",children:S(Z.command)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:372,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium truncate",children:Z.transcript},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:374,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-contrast",children:[(Z.confidence*100).toFixed(0),"% confidence"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:378,columnNumber:29},this),Z.status==="processing"&&e.jsxDEV("div",{className:"w-3 h-3 border-2 border-yellow-500/50 border-t-yellow-500 rounded-full animate-spin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:382,columnNumber:31},this),Z.status==="success"&&e.jsxDEV("span",{className:"text-xs text-green-400",children:"✓"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:385,columnNumber:31},this),Z.status==="error"&&e.jsxDEV("span",{className:"text-xs text-red-400",children:"✗"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:388,columnNumber:31},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:377,columnNumber:27},this),Z.result&&e.jsxDEV("div",{className:L("text-xs mt-1",Z.status==="success"?"text-green-400":"text-red-400"),children:Z.result},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:392,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:373,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:371,columnNumber:23},this)},Z.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:359,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:357,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:350,columnNumber:13},this),e.jsxDEV("div",{className:"mt-6 pt-4 border-t border-border/20",children:e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Try saying:"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:411,columnNumber:15},this),e.jsxDEV("div",{children:'"Add $500 Adobe subscription"'},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:412,columnNumber:15},this),e.jsxDEV("div",{children:'"Show me profit trends"'},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:413,columnNumber:15},this),e.jsxDEV("div",{children:'"Create invoice for $5000"'},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:414,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:410,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:409,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:275,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:269,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:268,columnNumber:5},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:267,columnNumber:5},this):e.jsxDEV(R.button,{onClick:()=>s(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:L("p-2 rounded-lg transition-all duration-200","bg-primary/10 text-primary hover:bg-primary/20","hover:shadow-lg hover:shadow-primary/20"),title:"Activate Voice Commands",children:e.jsxDEV(Vo,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:261,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/voice/VoiceCommandInterface.tsx",lineNumber:250,columnNumber:7},this)}const ff=(t,s)=>{const i=[];switch(t<60?i.push({id:"health-concern",type:"warning",content:"I notice your business health score could use attention. Would you like me to analyze the key factors affecting it?",action:"Analyze Health Factors",confidence:92,icon:ul}):t>80&&i.push({id:"health-excellent",type:"suggestion",content:"Your business is thriving! This might be a great time to explore expansion opportunities or optimize your tax strategy.",action:"Explore Growth Options",confidence:87,icon:jt}),s){case"dashboard":i.push({id:"dashboard-insight",type:"insight",content:"I see you're reviewing your dashboard. Based on your recent transactions, there's a potential 15% savings opportunity in your software subscriptions.",action:"Review Subscriptions",confidence:84,icon:hl});break;case"universe":i.push({id:"universe-guide",type:"suggestion",content:"The 3D visualization shows strong revenue-to-profit correlation. Would you like me to identify which revenue streams are most profitable?",action:"Analyze Revenue Streams",confidence:91,icon:dl});break;case"transactions":i.push({id:"transaction-pattern",type:"insight",content:"I've detected an unusual spending pattern this month. Your office expenses are 40% higher than average. Should I investigate?",action:"Investigate Spending",confidence:88,icon:ar});break}const r=[{id:"tax-optimization",type:"suggestion",content:"Based on your current profit trajectory, you might benefit from accelerating some expenses before year-end to optimize your tax position.",action:"Tax Planning Assistant",confidence:79,icon:gl},{id:"cash-flow-prediction",type:"insight",content:"Your cash flow pattern suggests you'll have excess liquidity next month. Consider investment opportunities or debt reduction.",action:"Investment Suggestions",confidence:82,icon:jt},{id:"efficiency-insight",type:"question",content:"I noticed you process invoices manually. Would you like me to set up automated invoice workflows to save 2-3 hours per week?",action:"Setup Automation",confidence:95,icon:Gt}],n=r[Math.floor(Math.random()*r.length)];return i.push(n),i.slice(0,2)};function gf({businessHealth:t,currentView:s,onDismiss:i}){const[r,n]=c.useState([]),[o,a]=c.useState(0),[l,m]=c.useState(!0),[h,u]=c.useState(!1);c.useEffect(()=>{m(!0);const x=setTimeout(()=>{const g=ff(t,s);n(g),a(0),m(!1),u(!0)},1500);return()=>clearTimeout(x)},[t,s]),c.useEffect(()=>{if(r.length>1&&!l){const x=setInterval(()=>{a(g=>(g+1)%r.length)},8e3);return()=>clearInterval(x)}},[r.length,l]);const b=r[o],f=x=>{switch(x){case"suggestion":return{bg:"from-blue-500/20 to-indigo-500/10",border:"border-blue-500/30",icon:"text-blue-400"};case"insight":return{bg:"from-green-500/20 to-emerald-500/10",border:"border-green-500/30",icon:"text-green-400"};case"warning":return{bg:"from-yellow-500/20 to-orange-500/10",border:"border-yellow-500/30",icon:"text-yellow-400"};case"question":return{bg:"from-purple-500/20 to-pink-500/10",border:"border-purple-500/30",icon:"text-purple-400"}}};return e.jsxDEV(R.div,{initial:{opacity:0,scale:.8,x:100},animate:{opacity:1,scale:1,x:0,width:h?400:60},exit:{opacity:0,scale:.8,x:100},className:"fixed bottom-6 right-6 z-40",transition:{duration:.5,ease:[.23,1,.32,1],width:{duration:.3}},children:e.jsxDEV(q,{variant:"heavy",className:L("relative overflow-hidden transition-all duration-300",h?"p-6":"p-3"),children:[e.jsxDEV(_e,{children:!h&&e.jsxDEV(R.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!0),className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center group hover:scale-105 transition-transform",children:[e.jsxDEV(yr,{className:"w-6 h-6 text-white group-hover:rotate-12 transition-transform"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:229,columnNumber:15},this),e.jsxDEV("div",{className:"absolute inset-0 rounded-full bg-primary/30 animate-ping"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:232,columnNumber:15},this),r.length>0&&e.jsxDEV("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-background animate-pulse"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:236,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:222,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:220,columnNumber:9},this),e.jsxDEV(_e,{children:h&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center",children:e.jsxDEV(yr,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:255,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:254,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-sm",children:"AI Assistant"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:258,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-muted-contrast",children:l?"Analyzing...":"Ready to help"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:259,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:257,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:253,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{onClick:()=>u(!1),className:"p-1 rounded-md hover:bg-surface/50 transition-colors",children:e.jsxDEV(yr,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:270,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:266,columnNumber:19},this),e.jsxDEV("button",{onClick:i,className:"p-1 rounded-md hover:bg-surface/50 transition-colors",children:e.jsxDEV(Ft,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:276,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:272,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:252,columnNumber:15},this),e.jsxDEV(_e,{children:l&&e.jsxDEV(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 p-4 rounded-lg bg-surface/30",children:[e.jsxDEV(R.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-6 h-6 rounded-full border-2 border-primary/30 border-t-primary"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-muted-contrast",children:"Analyzing your financial patterns..."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:284,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:282,columnNumber:15},this),e.jsxDEV(_e,{mode:"wait",children:!l&&b&&e.jsxDEV(R.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:1.05},transition:{duration:.3},className:L("p-4 rounded-lg border bg-gradient-to-r",f(b.type).bg,f(b.type).border),children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:L("w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center flex-shrink-0"),children:e.jsxDEV(b.icon,{className:L("w-4 h-4",f(b.type).icon)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:321,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:318,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1 space-y-3",children:[e.jsxDEV("p",{className:"text-sm leading-relaxed",children:b.content},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:328,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:[b.confidence,"% confidence"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:334,columnNumber:27},this),b.action&&e.jsxDEV(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1.5 text-xs bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center gap-1",children:[e.jsxDEV(Gt,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:344,columnNumber:31},this),b.action]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:339,columnNumber:29},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:333,columnNumber:25},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:327,columnNumber:23},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:317,columnNumber:21},this)},b.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:305,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:303,columnNumber:15},this),r.length>1&&!l&&e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:r.map((x,g)=>e.jsxDEV("button",{onClick:()=>a(g),className:L("w-2 h-2 rounded-full transition-all",g===o?"bg-primary":"bg-surface")},g,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:360,columnNumber:23},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:358,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-contrast",children:[o+1," of ",r.length]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:371,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:357,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2 pt-2 border-t border-border/20",children:[e.jsxDEV(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 p-2 text-xs bg-surface/50 hover:bg-surface text-foreground rounded-md transition-colors flex items-center justify-center gap-1",children:[e.jsxDEV(pl,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:384,columnNumber:19},this),"Chat"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:379,columnNumber:17},this),e.jsxDEV(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 p-2 text-xs bg-surface/50 hover:bg-surface text-foreground rounded-md transition-colors flex items-center justify-center gap-1",children:[e.jsxDEV(ar,{className:"w-3 h-3"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:393,columnNumber:19},this),"Insights"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:378,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:245,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:243,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:Array.from({length:3}).map((x,g)=>e.jsxDEV(R.div,{className:"absolute w-1 h-1 bg-primary/40 rounded-full",animate:{x:[0,100,0],y:[0,-50,0],opacity:[0,.8,0]},transition:{duration:4+g,repeat:1/0,delay:g*1.5,ease:"easeInOut"},style:{left:`${20+g*30}%`,top:`${80-g*20}%`}},g,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:404,columnNumber:13},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:402,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:212,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/PredictiveAssistant.tsx",lineNumber:196,columnNumber:5},this)}const Nf=()=>{const{currentTheme:t,setTheme:s,toggleTheme:i,isDark:r,availableThemes:n}=Rs(),[o,a]=c.useState(!1),l=x=>{switch(x){case"light":return jp;case"dark":return Np;default:return xp}},m=x=>({light:"Light Mode",dark:"Dark Mode",blue:"Corporate Blue",green:"Finance Green"})[x]||x,h=x=>({light:"text-blue-500",dark:"text-blue-400",blue:"text-blue-500",green:"text-emerald-500"})[x]||"text-purple-500",u=()=>{o?a(!1):i()},b=x=>{s(x),a(!1)},f=l(t);return e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(R.div,{className:"flex items-center",layout:!0,children:[e.jsxDEV(R.button,{className:L("relative flex items-center gap-2 p-3 rounded-xl","bg-surface/80 backdrop-blur-md border border-border/50","text-foreground hover:text-primary","hover:bg-surface/90 hover:border-border/70","transition-all duration-200",t==="light"&&"shadow-lg hover:shadow-xl border-gray-300/60",t!=="light"&&"shadow-md hover:shadow-lg"),onClick:u,whileHover:{scale:1.02,y:-1,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},layout:!0,children:[e.jsxDEV(R.div,{animate:{rotate:r?180:0},transition:{duration:parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--animation-duration-slow").replace("ms",""))/1e3,ease:[.4,0,.2,1]},children:e.jsxDEV(f,{className:L("w-5 h-5",h(t))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:91,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:84,columnNumber:11},void 0),e.jsxDEV(_e,{children:o&&e.jsxDEV(R.span,{className:"text-sm font-medium whitespace-nowrap",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.2},children:m(t)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:97,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:64,columnNumber:9},void 0),e.jsxDEV(R.button,{className:L("p-2 rounded-lg ml-1","text-slate-600 dark:text-slate-400","hover:text-slate-800 dark:hover:text-slate-200","hover:bg-white/[var(--glass-opacity-light)]","transition-all duration-[var(--animation-duration-normal)]"),onClick:()=>a(!o),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(R.div,{animate:{rotate:o?180:0},transition:{duration:.2},children:e.jsxDEV(ml,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:127,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:123,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:111,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:59,columnNumber:7},void 0),e.jsxDEV(_e,{children:o&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(R.div,{className:"fixed inset-0 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:137,columnNumber:13},void 0),e.jsxDEV(R.div,{className:"absolute top-full right-0 mt-2 z-50",initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--animation-duration-normal").replace("ms",""))/1e3,ease:[.4,0,.2,1]},children:e.jsxDEV(q,{className:"p-2 min-w-[200px] backdrop-blur-3xl shadow-2xl",variant:"heavy",elevation:3,glow:!0,children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"px-3 py-2 text-sm font-medium text-muted-contrast",children:"Choose Theme"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:163,columnNumber:19},void 0),n.map(x=>{const g=l(x),N=t===x,p=h(x);return e.jsxDEV(R.button,{className:L("w-full flex items-center space-x-3 px-3 py-2 rounded-lg","text-left transition-all duration-200",N?"bg-primary/20 text-primary border border-primary/30":"hover:bg-surface/50 text-foreground hover:text-primary"),onClick:()=>b(x),whileHover:{x:2},whileTap:{scale:.98},layout:!0,children:[e.jsxDEV(g,{className:L("w-4 h-4 flex-shrink-0",N?"text-primary":p)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:187,columnNumber:25},void 0),e.jsxDEV("span",{className:"flex-1 text-sm font-medium",children:m(x)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:188,columnNumber:25},void 0),N&&e.jsxDEV(R.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:e.jsxDEV(dp,{className:"w-4 h-4 text-emerald-500"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:198,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:193,columnNumber:27},void 0)]},x,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:173,columnNumber:23},void 0)})]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:162,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-2 pt-2 border-t border-white/10 dark:border-white/10",children:e.jsxDEV("button",{className:L("w-full px-3 py-2 text-sm","text-neutral-400 dark:text-neutral-300","hover:text-neutral-600 dark:hover:text-white","transition-all duration-200","rounded-md hover:bg-white/5 dark:hover:bg-white/10"),onClick:()=>a(!1),children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:208,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:207,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:156,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:135,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:133,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ThemeSwitcher.tsx",lineNumber:57,columnNumber:5},void 0)};function xf({count:t=20,colors:s=["primary","financial-revenue","financial-profit"],className:i,enabled:r=!0}){const[n,o]=c.useState([]);return c.useEffect(()=>{if(!r){o([]);return}o(Array.from({length:t},(l,m)=>({id:`particle-${m}`,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,color:s[Math.floor(Math.random()*s.length)],duration:Math.random()*20+10,delay:Math.random()*5})))},[t,s,r]),r?e.jsxDEV("div",{className:L("fixed inset-0 pointer-events-none overflow-hidden",i),children:e.jsxDEV(_e,{children:n.map(a=>e.jsxDEV(R.div,{className:L("absolute rounded-full opacity-20",`bg-${a.color}`),style:{width:a.size,height:a.size,left:`${a.x}%`,top:`${a.y}%`},initial:{opacity:0,scale:0,y:0},animate:{opacity:[0,.3,0],scale:[0,1,0],y:[-20,-100],x:[0,Math.random()*40-20]},transition:{duration:a.duration,delay:a.delay,repeat:1/0,ease:"easeOut"}},a.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/effects/FloatingParticles.tsx",lineNumber:57,columnNumber:11},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/effects/FloatingParticles.tsx",lineNumber:55,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/effects/FloatingParticles.tsx",lineNumber:54,columnNumber:5},this):null}function Ef({actions:t,className:s,onExpandedChange:i}){const[r,n]=c.useState(!1),[o,a]=c.useState(!0),{scrollY:l}=Bo(),{isDark:m}=Rs();c.useEffect(()=>{let u=0,b=!1;return l.onChange(x=>{b||(requestAnimationFrame(()=>{const g=x>u,N=x<u;g&&x>100?(a(!1),n(p=>(p&&i?.(!1),!1))):(N||x<50)&&a(!0),u=x,b=!1}),b=!0)})},[l]);const h=()=>{const u=!r;n(u),i?.(u)};return o?e.jsxDEV(R.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:L("fixed bottom-6 right-6 z-[9999] flex flex-col items-end gap-3",s),children:[e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{type:"spring",stiffness:300,damping:25,staggerChildren:.1},className:"flex flex-col gap-3 relative z-[2]",children:t.map((u,b)=>e.jsxDEV(R.div,{initial:{opacity:0,x:20,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.8},transition:{delay:b*.05},children:e.jsxDEV(R.button,{onClick:()=>{u.action(),n(f=>(f&&i?.(!1),!1))},className:L("group relative overflow-hidden","flex items-center gap-3 px-4 py-3 text-sm font-medium","bg-background/90 hover:bg-primary/10 transition-all duration-300","border border-border/30 rounded-xl","backdrop-blur-xl shadow-lg hover:shadow-xl","min-w-[160px] justify-start","before:absolute before:inset-0 before:bg-gradient-to-br before:from-white/20 before:via-white/5 before:to-transparent before:opacity-0 hover:before:opacity-100 before:transition-opacity before:duration-300"),whileHover:{scale:1.02,x:-2},whileTap:{scale:.98},style:{background:m?"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 50%, transparent 100%)":"linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.1) 100%)",backdropFilter:"blur(20px)",border:m?"1px solid rgba(255,255,255,0.1)":"1px solid rgba(0,0,0,0.1)"},children:[e.jsxDEV("span",{className:"text-lg relative z-10",children:u.icon},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:138,columnNumber:19},this),e.jsxDEV("span",{className:"text-foreground relative z-10",children:u.label},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:139,columnNumber:19},this),e.jsxDEV(R.div,{className:"absolute inset-0 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",layoutId:`hover-${u.label}`},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/20 to-transparent opacity-60 rounded-t-xl"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:148,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:108,columnNumber:17},this)},u.label,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:101,columnNumber:15},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:88,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(R.button,{onClick:h,className:L("w-14 h-14 rounded-full flex items-center justify-center relative group","shadow-lg hover:shadow-xl transition-all duration-300","backdrop-blur-xl overflow-hidden"),style:{background:m?"linear-gradient(135deg, rgba(124, 58, 237, 0.3) 0%, rgba(168, 85, 247, 0.2) 50%, rgba(124, 58, 237, 0.1) 100%)":"linear-gradient(135deg, rgba(124, 58, 237, 0.2) 0%, rgba(168, 85, 247, 0.15) 50%, rgba(124, 58, 237, 0.1) 100%)",backdropFilter:"blur(20px)",border:m?"1px solid rgba(124, 58, 237, 0.3)":"1px solid rgba(124, 58, 237, 0.2)"},whileHover:{scale:1.05},whileTap:{scale:.95},animate:{rotate:r?45:0},transition:{type:"spring",stiffness:300,damping:25},children:[e.jsxDEV(R.div,{className:"relative z-10",animate:{rotate:r?45:0},transition:{type:"spring",stiffness:300,damping:25},children:[e.jsxDEV("div",{className:"w-6 h-0.5 bg-primary rounded-full"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:188,columnNumber:11},this),e.jsxDEV("div",{className:"w-0.5 h-6 bg-primary rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:189,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:183,columnNumber:9},this),e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full bg-primary/20",initial:{scale:0,opacity:0},animate:{scale:r?1.2:0,opacity:r?.3:0},transition:{duration:.3}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:193,columnNumber:9},this),e.jsxDEV("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/30 to-transparent opacity-60 rounded-t-full"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:201,columnNumber:9},this),e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:m?"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%)":"linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:205,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-1 rounded-full bg-gradient-to-br from-primary/10 to-transparent"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:215,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:159,columnNumber:7},this),e.jsxDEV(_e,{children:r&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-[1]",onClick:()=>{n(!1),i?.(!1)}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:221,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:219,columnNumber:7},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/CollapsibleFloatingActionButton.tsx",lineNumber:72,columnNumber:5},this):null}function vf({open:t,onClose:s}){const[r,n]=c.useState("picker"),[o,a]=c.useState(null),[l,m]=c.useState(!1),[h,u]=c.useState(!1),[b,f]=c.useState(0),[x,g]=c.useState("");c.useRef(null);const[N,p]=c.useState(""),[v,E]=c.useState(""),[w,C]=c.useState(""),[S,Z]=c.useState(""),[D,T]=c.useState(""),[U,W]=c.useState(""),[se,_]=c.useState(!1),[P,B]=c.useState("percentage"),[le,H]=c.useState(""),[G,z]=c.useState(""),[V,k]=c.useState(""),[Y,ae]=c.useState(""),[de,Ee]=c.useState(""),[je,Fe]=c.useState(""),[ee,A]=c.useState(""),[oe,Ne]=c.useState(""),[we,Ae]=c.useState([{description:"",qty:"1",rate:"",amount:""}]),[Ve,Be]=c.useState(""),[Re,$]=c.useState(null),[te,ce]=c.useState(!1),[ge,he]=c.useState(!1),[Te,Me]=c.useState(null),[Ze,pe]=c.useState(null),[ze,Le]=c.useState(!1),[He,Ds]=c.useState(!1),[y,F]=c.useState("expense"),[K,O]=c.useState(!1),[be,ue]=c.useState(""),[ne,Ce]=c.useState(""),[ke,We]=c.useState(""),[Se,Qe]=c.useState("invoice"),[ps,lt]=c.useState(!1),[Us,ct]=c.useState("percentage"),[fi,St]=c.useState(""),[Ps,Rt]=c.useState(""),[Ms,Ge]=c.useState(""),[Gs,$s]=c.useState(""),[Ks,ut]=c.useState(""),[d,j]=c.useState([{description:"",qty:"1",rate:"",amount:""}]),[I,J]=c.useState([]),[Q,re]=c.useState(!1),[ie,fe]=c.useState(!1),[,os]=c.useState(null),[Ke,Xe]=c.useState(!1),[Je,mt]=c.useState(null),[ks,cs]=c.useState(!1),[Ls,Zn]=c.useState(null),[gi,Ff]=c.useState(""),[Uf,$f]=c.useState({});c.useEffect(()=>{r!=="form"||!(Je&&typeof Je.confidence=="number"&&Je.confidence>=.75||ks)||Re||Rl().catch(()=>{})},[r,ks,Je?.confidence]),c.useEffect(()=>{(async()=>{if(r==="form"&&y==="invoice"&&!(ke&&ke.trim()))try{let ys=await Vs.nextSequentialInvoiceNumber();ys||(ys=await Vs.suggestInvoiceNumber()),ys&&We(ys)}catch{}})()},[r,y]),c.useEffect(()=>{if(r==="form"&&y==="invoice"&&!(Gs&&String(Gs).trim()!==""))try{const us=`${x||""}`.match(/\b(?:net\s*-?\s*(\d{1,3})|net(\d{1,3})|due\s*(?:in|within)\s*(\d{1,3})\s*days?|payment\s*terms?\s*[:\-]?\s*(\d{1,3})\s*days?)\b/i),bs=us?us[1]||us[2]||us[3]||us[4]:null;if(bs){const xe=Math.max(0,Math.min(365,parseInt(bs,10)));Number.isNaN(xe)||$s(String(xe))}else if(S&&ne){const xe=new Date(S),ms=new Date(ne);if(!isNaN(xe.getTime())&&!isNaN(ms.getTime())){const js=Math.round((ms.getTime()-xe.getTime())/864e5);js>=0&&js<=365&&$s(String(js))}}}catch{}},[r,y,Gs,x,S,ne]);const Rl=async()=>{try{Me(null);const ys=Je&&typeof Je.confidence=="number"&&Je.confidence>=.75;if(!ks&&!ys){Me("Please confirm the detected document type before previewing.");return}if((Je&&String(Je.docType||"").toLowerCase()==="invoice"?"invoice":y)==="invoice"){const bs=parseFloat(w);if(!be.trim()||!w||isNaN(bs)||bs<=0||!S){const Oe="Please fill Customer, Amount (>0), and Date";Me(Oe);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:Oe,type:"error"}}))}catch{}return}let xe=Ls||{};if((!Ls||Object.values(Ls||{}).every(Oe=>Oe==null))&&x)try{const Oe=x,Ue="([0-9]+(?:[, .']*[0-9]{3})*(?:[.,][0-9]{1,2})?)",Js=Ys=>{if(!Ys)return;let Ye=Ys;if(Ye.includes(",")&&Ye.includes("."))Ye=Ye.replace(/,/g,"");else if(Ye.includes(" "))Ye=Ye.replace(/\s/g,"").replace(",",".");else if(Ye.includes(",")&&!Ye.includes(".")){const bt=Ye.split(",");Ye=bt[bt.length-1].length<=2?Ye.replace(",","."):Ye.replace(/,/g,"")}const kt=parseFloat(Ye);return Number.isFinite(kt)?parseFloat(kt.toFixed(2)):void 0},Pe=Oe.match(new RegExp(`Subtotal[:\\s]*\\$?\\s*${Ue}`,"i")),As=Oe.match(new RegExp(`Tax[^\\n]*[:\\s]*\\$?\\s*${Ue}`,"i")),pt=Oe.match(new RegExp(`Total[:\\s]*\\$?\\s*${Ue}`,"i")),cr=Oe.match(new RegExp(`Amount\\s*Paid[:\\s]*\\$?\\s*${Ue}`,"i")),ur=Oe.match(new RegExp(`Balance\\s*Due[:\\s]*\\$?\\s*(-?${Ue})`,"i"));if(xe={subtotal:Js(Pe?.[1]||null),taxAmount:Js(As?.[1]||null),total:Js(pt?.[1]||null),amountPaid:Js(cr?.[1]||null),balanceDue:Js(ur?.[1]||null)},[xe.subtotal,xe.taxAmount,xe.amountPaid,xe.balanceDue].every(Ys=>Ys==null)){const Ys=Oe.replace(/\u00A0/g," "),Ye=kt=>{const bt=Ys.match(new RegExp(`${kt}[\\s:]*\\$?\\s*([-0-9,.]+)`,"i"));return Js(bt?.[1]||null)};xe={subtotal:Ye("subtotal")??xe.subtotal,taxAmount:Ye("tax")??xe.taxAmount,total:Ye("total")??xe.total,amountPaid:Ye("amount\\s*paid")??xe.amountPaid,balanceDue:Ye("balance\\s*due")??xe.balanceDue}}}catch{}let ms=typeof xe.amountPaid=="number"?xe.amountPaid:Se==="paid"||Se==="overpaid"?bs:Se==="partial"?Math.max(0,Math.round(bs*.5)):0,js=typeof xe.balanceDue=="number"?xe.balanceDue:bs-ms,qs=Se;(typeof xe.amountPaid=="number"||typeof xe.balanceDue=="number")&&(ms>bs+.01?qs="overpaid":ms>0&&js>.01?qs="partial":ms<=.01?qs="invoice":qs="paid");try{const Oe=gi&&S&&new Date(gi).getTime()>new Date(S).getTime(),Ue=/deferred|billed\s*not\s*paid|unearned/i.test(x||"");(Oe||Ue)&&ms>0}catch{}const dt={customerName:be.trim(),amount:bs,amountPaid:ms,balanceDue:js,date:S,description:Ks||`Invoice for ${be.trim()}`,invoiceNumber:ke,paymentStatus:qs,subtotal:typeof xe.subtotal=="number"?xe.subtotal:void 0,taxSettings:typeof xe.taxAmount=="number"?{enabled:!0,amount:xe.taxAmount}:ps?Us==="percentage"?{enabled:!0,type:"percentage",rate:Number(fi||0)}:{enabled:!0,type:"amount",amount:Number(Ps||0)}:void 0,ocrText:x,categoryKey:"PROFESSIONAL_SERVICES"};try{const Oe=(d||[]).filter(Ue=>Ue.description&&Ue.description.trim()||Ue.amount&&!isNaN(parseFloat(Ue.amount))).map(Ue=>({description:Ue.description||"Line",amount:parseFloat(Ue.amount||Ue.rate||"0"),quantity:Ue.qty!=null&&Ue.qty!==""?parseFloat(Ue.qty):void 0,rate:Ue.rate!=null&&Ue.rate!==""?parseFloat(Ue.rate):void 0,accountCode:Ue.accountCode||void 0}));Oe.length&&(dt.lineItems=Oe)}catch{}const ht=await es.previewExpense(dt);$(ht)}else{const bs=parseFloat(w);if(!N.trim()||!w||isNaN(bs)||bs<=0||!S){const Pe="Please fill Vendor, Amount (>0), and Date";Me(Pe);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:Pe,type:"error"}}))}catch{}return}let xe=Ls||{};if((!Ls||Object.values(Ls||{}).every(Pe=>Pe==null))&&x)try{const Pe=x.replace(/\u00A0/g," "),As="([0-9]+(?:[, .']*[0-9]{3})*(?:[.,][0-9]{1,2})?)",pt=bt=>{if(!bt)return;let fs=bt;if(fs.includes(",")&&fs.includes("."))fs=fs.replace(/,/g,"");else if(fs.includes(" "))fs=fs.replace(/\s/g,"").replace(",",".");else if(fs.includes(",")&&!fs.includes(".")){const Rn=fs.split(",");fs=Rn[Rn.length-1].length<=2?fs.replace(",","."):fs.replace(/,/g,"")}const Sn=parseFloat(fs);return Number.isFinite(Sn)?parseFloat(Sn.toFixed(2)):void 0},cr=Pe.match(new RegExp(`\\bSubtotal\\b[\\s:]*\\$?\\s*(-?${As})`,"i")),ur=Pe.match(new RegExp(`\\b(?:Tax|VAT)\\b[^
$]*\\$?\\s*(-?${As})`,"i")),Ys=Pe.match(new RegExp(`\\bTotal\\b[\\s:]*\\$?\\s*(-?${As})`,"i")),Ye=Pe.match(new RegExp(`\\b(?:Amount\\s*Paid|Payments?\\s*Made)\\b[\\s:\\-]*\\$?\\s*(-?${As})`,"i")),kt=Pe.match(new RegExp(`\\bBalance\\s*Due\\b[\\s:]*\\$?\\s*(-?${As})`,"i"));xe={subtotal:pt(cr?.[1]||null),taxAmount:pt(ur?.[1]||null),total:pt(Ys?.[1]||null),amountPaid:pt(Ye?.[1]||null),balanceDue:pt(kt?.[1]||null)},xe.total==null&&typeof xe.subtotal=="number"&&typeof xe.taxAmount=="number"&&(xe.total=parseFloat((xe.subtotal+xe.taxAmount).toFixed(2)))}catch{}const ms=typeof xe.total=="number"?xe.total:bs;let js=typeof xe.amountPaid=="number"?xe.amountPaid:ms;if(x&&xe.amountPaid==null)try{const Pe=x.match(/\bCredit\s*(?:Available|Memo)\b[\s:]*\$?\s*(-?[0-9,\.]+)/i);if(Pe){const As=parseFloat(Pe[1].replace(/,/g,""));Number.isFinite(As)&&(js=Math.max(0,ms+As))}}catch{}const qs=parseFloat((ms-js).toFixed(2)),dt=.01;let ht="paid";js>ms+dt?ht="overpaid":Math.abs(qs)<=dt?ht="paid":js>dt&&qs>dt?ht="partial":ht="invoice";const Oe={vendorName:N.trim(),amount:ms,amountPaid:js,balanceDue:qs,date:S,paymentStatus:ht,description:Ve,ocrText:x};try{window._aiSuggestedExpenseAccount&&(Oe.suggestedAccountCode=window._aiSuggestedExpenseAccount)}catch{}const Ue=we.filter(Pe=>Pe.description&&Pe.description.trim()||Pe.amount&&!isNaN(parseFloat(Pe.amount))).map(Pe=>({description:Pe.description||"Line",amount:parseFloat(Pe.amount||Pe.rate||"0"),quantity:Pe.qty!=null&&Pe.qty!==""?parseFloat(Pe.qty):void 0,rate:Pe.rate!=null&&Pe.rate!==""?parseFloat(Pe.rate):void 0,accountCode:Pe.accountCode||void 0}));Ue.length&&(Oe.lineItems=Ue);try{JSON.parse(localStorage.getItem("settings.apSplitLines")||"false")&&(Oe.splitByLineItems=!0)}catch{}oe&&!isNaN(parseFloat(oe))&&(Oe.discount={enabled:!0,amount:parseFloat(oe)}),ee&&!isNaN(parseFloat(ee))&&(Oe.shipping=parseFloat(ee)),de&&(Oe.notes=de),je&&je.trim()&&(Oe.tags=je.split(",").map(Pe=>Pe.trim()).filter(Boolean)),typeof xe.taxAmount=="number"&&xe.taxAmount>0&&(Oe.taxSettings={enabled:!0,amount:xe.taxAmount}),D&&(Oe.dueDays=Math.max(0,Math.min(365,Number(D)||0))),U&&(Oe.dueDate=U),v.trim()&&(Oe.vendorInvoiceNo=v.trim());const Js=await es.previewExpense(Oe);$(Js)}}catch(ys){Me(ys?.message||"Preview failed")}};return c.useEffect(()=>{(async()=>{try{const ys=(be||"").trim();if(!ys)return;const{data:us}=await X.get(`/api/customers/${encodeURIComponent(ys)}/defaults`);us&&us.taxEnabled&&(lt(!0),us.taxMode==="percentage"?(ct("percentage"),typeof us.taxRate=="number"&&St(String(us.taxRate))):us.taxMode==="amount"&&(ct("amount"),typeof us.taxAmount=="number"&&Rt(String(us.taxAmount))))}catch{}})()},[be]),e.jsxDEV(ls,{children:e.jsxDEV("div",{className:`fixed inset-0 z-[10000] ${t?"":"hidden"}`,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px]",onClick:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1175,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-0 p-4 overflow-auto",children:e.jsxDEV("div",{className:"max-w-5xl mx-auto",children:e.jsxDEV(q,{variant:"light",className:"p-5 md:p-6",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"AI Document"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1182,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Upload → OCR → Review → Post"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1183,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1181,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[y==="expense"&&e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded bg-white/10 border border-white/10 hover:bg-white/15",onClick:()=>{try{window.dispatchEvent(new CustomEvent("asset:new",{detail:{seed:{vendor:N,amount:w,date:S}}}))}catch{}try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Opening Asset creator…",type:"info"}}))}catch{}},children:"Capitalize as Asset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1187,columnNumber:21},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1195,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1185,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1180,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1179,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1178,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1177,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1173,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/AiDocumentModal.tsx",lineNumber:1172,columnNumber:5},this)}const Lo="eze.ai.chat.threads",Oo="eze.ai.chat.active";function Df({open:t,onClose:s,onOpenAiDocument:i}){const[r,n]=c.useState(()=>{try{return JSON.parse(localStorage.getItem(Lo)||"[]")}catch{return[]}}),[o,a]=c.useState(()=>localStorage.getItem(Oo)||""),[l,m]=c.useState(""),h=c.useMemo(()=>r.find(f=>f.id===o)||r[0],[r,o]);c.useEffect(()=>{localStorage.setItem(Lo,JSON.stringify(r))},[r]),c.useEffect(()=>{h&&localStorage.setItem(Oo,h.id)},[h?.id]);const u=()=>{const f=`t-${Date.now()}`,x={id:f,title:"New Chat",messages:[],createdAt:Date.now()};n([x,...r]),a(f)},b=()=>{if(!h||!l.trim())return;const f={id:`m-${Date.now()}`,role:"user",content:l.trim(),ts:Date.now()},x={id:`m-${Date.now()+1}`,role:"assistant",content:"This is a demo response. Backend integration will automate actions.",ts:Date.now()+1},g=r.map(N=>N.id===h.id?{...N,title:N.messages.length?N.title:l.slice(0,30),messages:[...N.messages,f,x]}:N);n(g),m("")};return t?e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 modal-overlay",onClick:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV(R.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"pointer-events-auto fixed right-0 top-0 bottom-0 w-full sm:w-[520px] p-3 sm:p-4",children:e.jsxDEV(q,{variant:"light",className:"h-full glass-modal liquid-glass p-0 overflow-hidden",hover:!1,children:[e.jsxDEV("div",{className:"p-4 border-b border-white/10 flex items-center justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"AI Chat"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:70,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:"Automate your finance with natural language"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:71,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:69,columnNumber:15},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV("div",{className:"p-3 flex gap-2 border-b border-white/10",children:e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-primary/15 text-primary border border-primary/30",onClick:i,children:"Open AI Document"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV("div",{className:"flex h-[calc(100%-112px)]",children:[e.jsxDEV("div",{className:"w-40 sm:w-48 border-r border-white/10 p-2 overflow-y-auto",children:[e.jsxDEV("button",{className:"w-full mb-2 px-2 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15",onClick:u,children:"+ New Chat"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:82,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-1",children:r.map(f=>e.jsxDEV("button",{className:L("w-full text-left px-2 py-1.5 text-sm rounded-lg border",f.id===(h?.id||"")?"bg-primary/15 text-primary border-primary/30":"bg-white/5 border-white/10 hover:bg-white/10"),onClick:()=>a(f.id),children:f.title||"Untitled"},f.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:85,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:83,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 flex flex-col",children:[e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:(h?.messages||[]).map(f=>e.jsxDEV("div",{className:L("max-w-[80%] px-3 py-2 rounded-lg border",f.role==="user"?"ml-auto bg-primary/15 text-primary border-primary/30":"bg-white/10 border-white/10"),children:[e.jsxDEV("div",{className:"text-xs text-secondary-contrast mb-0.5",children:f.role==="user"?"You":"Assistant"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:97,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm whitespace-pre-wrap",children:f.content},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:98,columnNumber:23},this)]},f.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:96,columnNumber:21},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:94,columnNumber:17},this),e.jsxDEV("div",{className:"p-3 border-t border-white/10 flex items-center gap-2",children:[e.jsxDEV("input",{className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",placeholder:"Ask anything…",value:l,onChange:f=>m(f.target.value),onKeyDown:f=>{f.key==="Enter"&&b()}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("button",{className:"px-3 py-2 rounded-lg bg-primary/20 text-primary border border-primary/30",onClick:b,children:"Send"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:104,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:93,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:59,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/ai/ChatDrawer.tsx",lineNumber:50,columnNumber:5},this):null}function yf({onClick:t,bottomOffset:s=24,shiftUp:i=!1}){const{isDark:r}=Rs(),{scrollY:n}=Bo(),[o,a]=c.useState(!0);if(c.useEffect(()=>{let m=0,h=!1;return n.onChange(b=>{h||(requestAnimationFrame(()=>{const f=b>m,x=b<m;f&&b>100?a(!1):(x||b<50)&&a(!0),m=b,h=!1}),h=!0)})},[n]),!o)return null;const l=s+(i?120:0);return e.jsxDEV("div",{className:L("fixed right-6 z-[9999]"),style:{bottom:l},children:e.jsxDEV(R.button,{onClick:t,className:"w-14 h-14 rounded-full flex items-center justify-center relative group shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-xl overflow-hidden",style:{background:r?"linear-gradient(135deg, rgba(124, 58, 237, 0.3) 0%, rgba(168, 85, 247, 0.2) 50%, rgba(124, 58, 237, 0.1) 100%)":"linear-gradient(135deg, rgba(124, 58, 237, 0.2) 0%, rgba(168, 85, 247, 0.15) 50%, rgba(124, 58, 237, 0.1) 100%)",backdropFilter:"blur(20px)",border:r?"1px solid rgba(124, 58, 237, 0.3)":"1px solid rgba(124, 58, 237, 0.2)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxDEV(pl,{className:"w-6 h-6 text-primary relative z-10"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full bg-primary/20",initial:{scale:0,opacity:0},animate:{scale:[0,1.15,0],opacity:[0,.25,0]},transition:{duration:2.2,repeat:1/0}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:59,columnNumber:9},this),e.jsxDEV("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/30 to-transparent opacity-60 rounded-t-full"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:65,columnNumber:9},this),e.jsxDEV(R.div,{className:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:r?"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%)":"linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%)"}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("div",{className:"absolute inset-1 rounded-full bg-gradient-to-br from-primary/10 to-transparent"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV(R.div,{className:"absolute -top-9 right-0 px-2 py-0.5 text-xs rounded bg-primary/20 text-primary border border-primary/30",initial:{y:6,opacity:0},animate:{y:[6,0,6],opacity:[0,1,0]},transition:{duration:2.4,repeat:1/0},children:"New"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/ChatFab.tsx",lineNumber:42,columnNumber:5},this)}const wf=()=>{const[t,s]=c.useState({isMobile:!1,isTablet:!1,isDesktop:!1,contentWidth:0,contentHeight:0,hasFloatingElements:!1});return c.useEffect(()=>{const i=()=>{const r=window.innerWidth,n=window.innerHeight;s({isMobile:r<768,isTablet:r>=768&&r<1024,isDesktop:r>=1024,contentWidth:r,contentHeight:n,hasFloatingElements:!0})};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),t},Cf=()=>{const[t,s]=c.useState([]),[i,r]=c.useState(!1);return c.useEffect(()=>{const n=()=>{const a=document.querySelectorAll('[data-important], .financial-metric-card, .chart-container, .important-content, [class*="grid"]'),l=Array.from(a).map(u=>u.getBoundingClientRect());s(l);const m=window.innerHeight,h=l.length/(m/100);r(h>5)};n();const o=new IntersectionObserver(()=>{n()},{threshold:.1});return document.querySelectorAll("[data-important], .financial-metric-card").forEach(a=>{o.observe(a)}),window.addEventListener("resize",n),window.addEventListener("scroll",n),()=>{o.disconnect(),window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}},[]),{contentBounds:t,shouldAdjustLayout:i}},jf=({children:t,floatingElements:s,className:i})=>{const r=wf(),{shouldAdjustLayout:n}=Cf(),[o,a]=c.useState({top:0,right:0,bottom:0,left:0});return c.useEffect(()=>{let l={top:0,right:0,bottom:0,left:0};r.isMobile?l={top:80,right:20,bottom:80,left:16}:r.isTablet?l={top:80,right:24,bottom:80,left:24}:l={top:32,right:32,bottom:100,left:32},a(l)},[r,n]),e.jsxDEV("div",{className:L("relative min-h-screen",i),children:[e.jsxDEV(R.div,{className:"main-content transition-all duration-300 ease-out",style:{paddingTop:`${o.top}px`,paddingRight:`${o.right}px`,paddingBottom:`${o.bottom}px`,paddingLeft:`${o.left}px`},layout:!0,children:t},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/SmartFloatingElements.tsx",lineNumber:366,columnNumber:7},void 0),s&&e.jsxDEV("div",{className:"floating-elements-container",children:s},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/SmartFloatingElements.tsx",lineNumber:381,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/layout/SmartFloatingElements.tsx",lineNumber:364,columnNumber:5},void 0)};function Vf({toast:t,onClose:s}){c.useEffect(()=>{const a=setTimeout(()=>s(t.id),t.duration??3e3);return()=>clearTimeout(a)},[t.id]);const i=(()=>{const a=t.variant||"default";return a==="revenue"?{main:"var(--color-financial-revenue)",border:"rgba(16,185,129,0.35)"}:a==="expense"?{main:"var(--color-financial-expense)",border:"rgba(239,68,68,0.35)"}:a==="invoice"?{main:"var(--color-primary-500)",border:"rgba(139,92,246,0.35)"}:t.type==="success"?{main:"var(--color-financial-revenue)",border:"rgba(16,185,129,0.35)"}:t.type==="error"?{main:"var(--color-financial-expense)",border:"rgba(239,68,68,0.35)"}:{main:"var(--color-primary-500)",border:"rgba(139,92,246,0.35)"}})(),r={background:"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.04) 60%, transparent 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",borderColor:i.border,boxShadow:`0 10px 25px rgba(0,0,0,0.25), 0 0 0 1px ${i.border}`},n={background:`rgb(${i.main})`},o=t.icon||(t.variant==="revenue"?"💰":t.variant==="expense"?"💳":t.variant==="invoice"?"🧾":t.type==="error"?"⚠️":t.type==="success"?"✅":"ℹ️");return e.jsxDEV(R.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-l-xl z-10 pointer-events-none",style:n},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV(q,{variant:"light",className:"pl-5 pr-4 py-3 rounded-xl border relative",hover:!1,style:r,children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"text-base leading-none mt-0.5","aria-hidden":"true",children:o},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:60,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm font-medium",children:t.message},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:61,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:46,columnNumber:5},this)}function Zf({toasts:t,onClose:s}){return e.jsxDEV("div",{className:"fixed bottom-4 right-4 z-[99999] flex flex-col gap-2",children:e.jsxDEV(_e,{children:t.map(i=>e.jsxDEV(Vf,{toast:i,onClose:s},i.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:74,columnNumber:11},this))},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:72,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/themed/Toast.tsx",lineNumber:71,columnNumber:5},this)}function Sf(){const[t,s]=c.useState([]),i=c.useCallback(n=>{s(o=>o.filter(a=>a.id!==n))},[]),r=c.useCallback((n,o="info",a=3e3,l="default",m)=>{const h=`${Date.now()}-${Math.random().toString(36).slice(2,7)}`;s(u=>[...u,{id:h,message:n,type:o,duration:a,variant:l,icon:m}])},[]);return{toasts:t,push:r,remove:i}}async function Rf(t){const{data:s}=await X.post("/api/assets",t);return s}async function kf(){const{data:t}=await X.get("/api/assets");return Array.isArray(t?.assets)?t.assets:[]}async function Af(t){const{data:s}=await X.post("/api/assets/run-depreciation",t?{limit:t}:{});return s}async function If(){const{data:t}=await X.get("/api/asset-categories");return Array.isArray(t?.categories)?t.categories:[]}async function _f(t){const{data:s}=await X.post("/api/asset-categories",t);return s?.category}async function Tf(t){const{data:s}=await X.get(`/api/assets/${encodeURIComponent(t)}/events`);return Array.isArray(s?.events)?s.events:[]}const it={createAsset:Rf,listAssets:kf,runDepreciation:Af,listCategories:If,createCategory:_f,getAssetEvents:Tf};function Pf({open:t,onClose:s,seed:i}){const[r,n]=c.useState(""),[o,a]=c.useState(""),[l,m]=c.useState(""),[h,u]=c.useState([]),[b,f]=c.useState(()=>new Date().toISOString().slice(0,10)),[x,g]=c.useState(()=>new Date().toISOString().slice(0,10)),[N,p]=c.useState(""),[v,E]=c.useState("0"),[w,C]=c.useState("36"),[S,Z]=c.useState("SL"),[D,T]=c.useState(!1),[U,W]=c.useState(null);if(c.useEffect(()=>{if(t){(async()=>{try{const P=await it.listCategories();u(P)}catch{}})();try{if(i?.vendorName&&a(i.vendorName),i?.amount!=null&&String(i.amount)&&p(String(i.amount)),i?.date){const P=new Date(i.date);isNaN(P.getTime())||(f(P.toISOString().slice(0,10)),g(P.toISOString().slice(0,10)))}r||n("Fixed Asset")}catch{}}},[t]),!t)return null;const se=async()=>{try{const P=prompt("New category name (e.g., Computers)");if(!P)return;const B=await it.createCategory({name:P}),le=await it.listCategories();u(le),m(B?.id||"")}catch{}},_=async()=>{try{T(!0),W(null);const P=parseFloat(N||"0");if(!r.trim()){W("Name is required");return}if(isNaN(P)||P<=0){W("Enter a valid cost");return}const B=await it.createAsset({name:r.trim(),vendorName:o.trim()||void 0,acquisitionDate:b,inServiceDate:x,cost:P,residualValue:parseFloat(v||"0")||0,method:S,usefulLifeMonths:Math.max(1,parseInt(w||"36",10)||36),categoryId:l||void 0});try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Asset created",type:"success"}}))}catch{}return s(),B}catch(P){const B=P?.message||"Failed to create asset";W(B);try{window.dispatchEvent(new CustomEvent("toast",{detail:{message:B,type:"error"}}))}catch{}}finally{T(!1)}};return e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[10000] modal-overlay flex items-center justify-center p-4",onClick:s,children:e.jsxDEV("div",{onClick:P=>P.stopPropagation(),className:"w-[92%] max-w-xl",children:e.jsxDEV(q,{variant:"light",className:"p-6",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"New Asset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:94,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"Capitalize a fixed asset and start depreciation"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:95,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:93,columnNumber:15},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:97,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:102,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:r,onChange:P=>n(P.target.value),placeholder:"MacBook Pro 14"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:103,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:101,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Vendor (optional)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:106,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:o,onChange:P=>a(P.target.value),placeholder:"Apple"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:107,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:105,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Category"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:110,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("select",{className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none",value:l,onChange:P=>m(P.target.value),children:[e.jsxDEV("option",{value:"",children:"(none)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:113,columnNumber:21},this),h.map(P=>e.jsxDEV("option",{value:P.id,children:P.name},P.id,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:114,columnNumber:44},this))]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:112,columnNumber:19},this),e.jsxDEV("button",{type:"button",className:"px-2 py-1 rounded bg-white/10 border border-white/10 hover:bg-white/15",onClick:se,children:"New"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:116,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:111,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Acquisition Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:b,onChange:P=>f(P.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:119,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"In-Service Date"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:124,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:x,onChange:P=>g(P.target.value)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:125,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:123,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Cost"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:128,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:N,onChange:P=>p(P.target.value),placeholder:"1999.00"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:129,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:127,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Residual Value"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV("input",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:v,onChange:P=>E(P.target.value),placeholder:"0"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:131,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Useful Life (months)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:136,columnNumber:17},this),e.jsxDEV("input",{type:"number",min:1,className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:w,onChange:P=>C(P.target.value),placeholder:"36"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:137,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col gap-1",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:"Method"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:140,columnNumber:17},this),e.jsxDEV("select",{className:"px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:bg-white/15 outline-none backdrop-blur-md",value:S,onChange:P=>Z(P.target.value),children:[e.jsxDEV("option",{value:"SL",children:"Straight-line"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("option",{value:"DB",disabled:!0,children:"Declining-balance (coming soon)"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:143,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:141,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:100,columnNumber:13},this),U&&e.jsxDEV("div",{className:"mt-3 text-sm text-red-400",children:U},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:148,columnNumber:23},this),e.jsxDEV("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg border transition backdrop-blur-glass bg-white/10 hover:bg-white/15 border-white/10 text-foreground",onClick:s,children:"Cancel"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:150,columnNumber:15},this),e.jsxDEV("button",{disabled:D,className:"px-3 py-1.5 text-sm rounded-lg bg-primary/20 text-primary border border-primary/30 disabled:opacity-60",onClick:_,children:D?"Saving…":"Create Asset"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:151,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:149,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:91,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:90,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:89,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetModal.tsx",lineNumber:88,columnNumber:5},this)}function Mf({open:t,onClose:s}){const[i,r]=c.useState([]),[n,o]=c.useState(!1);if(c.useEffect(()=>{if(!t)return;let l=!1;return(async()=>{try{const m=await it.listAssets();l||r(m)}catch{}})(),()=>{l=!0}},[t]),!t)return null;const a=async()=>{try{o(!0),await it.runDepreciation(25)}catch{}finally{o(!1)}};return e.jsxDEV(ls,{children:e.jsxDEV("div",{className:"fixed inset-0 z-[10000] modal-overlay flex items-center justify-center p-4",onClick:s,children:e.jsxDEV("div",{onClick:l=>l.stopPropagation(),className:"w-[92%] max-w-3xl",children:e.jsxDEV(q,{variant:"light",className:"p-6",hover:!1,children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:"Asset Register"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:35,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-secondary-contrast",children:"View assets and status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:36,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:34,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"px-3 py-1.5 text-sm rounded-lg bg-white/10 border border-white/10 hover:bg-white/15",onClick:a,disabled:n,children:n?"Running…":"Run Depreciation"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:39,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-surface/60 hover:bg-surface",onClick:s,children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:40,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:38,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:33,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-auto rounded-lg border border-white/10",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"bg-surface/60",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:48,columnNumber:21},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Cost"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:49,columnNumber:21},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Accum Dep"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:50,columnNumber:21},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:51,columnNumber:21},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Next Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:52,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:47,columnNumber:19},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:46,columnNumber:17},this),e.jsxDEV("tbody",{children:[i.map(l=>e.jsxDEV("tr",{className:"border-t border-white/10",children:[e.jsxDEV("td",{className:"px-3 py-2 text-left",children:l.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:58,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-right",children:["$",Number(l.cost||0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:59,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-right",children:["$",Number(l.accumulatedDepreciation||0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:60,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-center",children:l.status},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:61,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-center",children:l.nextRunOn?String(l.nextRunOn).slice(0,10):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:62,columnNumber:23},this)]},l.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:57,columnNumber:21},this)),i.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"px-3 py-6 text-center text-secondary-contrast",children:"No assets yet."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:66,columnNumber:25},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:66,columnNumber:21},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:55,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:45,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:44,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:32,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:31,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:30,columnNumber:7},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetRegister.tsx",lineNumber:29,columnNumber:5},this)}function Lf(){const[t,s]=c.useState([]),[i,r]=c.useState(null),[n,o]=c.useState([]);return c.useEffect(()=>{let a=!1;return(async()=>{try{const l=await it.listAssets();a||s(l)}catch{}})(),()=>{a=!0}},[]),c.useEffect(()=>{let a=!1;return(async()=>{if(i)try{const l=await it.getAssetEvents(i.id);a||o(l)}catch{}})(),()=>{a=!0}},[i]),e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"text-xl font-semibold mb-3",children:"Assets"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:29,columnNumber:7},this),e.jsxDEV(q,{variant:"light",className:"p-3",children:e.jsxDEV("div",{className:"overflow-auto rounded-lg border border-white/10",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"bg-surface/60",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Name"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:35,columnNumber:17},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Cost"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:36,columnNumber:17},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Accum Dep"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:37,columnNumber:17},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Status"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:38,columnNumber:17},this),e.jsxDEV("th",{className:"px-3 py-2",children:"Next Run"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:39,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:34,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:33,columnNumber:13},this),e.jsxDEV("tbody",{children:[t.map(a=>e.jsxDEV("tr",{className:"border-t border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>r(a),children:[e.jsxDEV("td",{className:"px-3 py-2 text-left",children:a.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:45,columnNumber:19},this),e.jsxDEV("td",{className:"px-3 py-2 text-right",children:["$",Number(a.cost||0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:46,columnNumber:19},this),e.jsxDEV("td",{className:"px-3 py-2 text-right",children:["$",Number(a.accumulatedDepreciation||0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:47,columnNumber:19},this),e.jsxDEV("td",{className:"px-3 py-2 text-center",children:a.status},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:48,columnNumber:19},this),e.jsxDEV("td",{className:"px-3 py-2 text-center",children:a.nextRunOn?String(a.nextRunOn).slice(0,10):"-"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:49,columnNumber:19},this)]},a.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:44,columnNumber:17},this)),t.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"px-3 py-6 text-center text-secondary-contrast",children:"No assets yet."},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:53,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:53,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:32,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:31,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:30,columnNumber:7},this),i&&e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(q,{variant:"light",className:"p-3",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold",children:i.name},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:65,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-secondary-contrast",children:["Vendor: ",i.vendorName||"-"," • In-service: ",String(i.inServiceDate).slice(0,10)," • Cost: $",Number(i.cost||0).toLocaleString()]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:66,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:64,columnNumber:15},this),e.jsxDEV("button",{className:"px-2 py-1 rounded bg-white/10 border border-white/10 hover:bg-white/15",onClick:()=>r(null),children:"Close"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:68,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:63,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-1",children:"Events"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:71,columnNumber:15},this),e.jsxDEV("ul",{className:"text-sm space-y-1",children:[n.map(a=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"text-secondary-contrast",children:[a.type.toUpperCase()," • ",String(a.runOn).slice(0,10)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:75,columnNumber:21},this),e.jsxDEV("span",{children:["$",Number(a.amount||0).toFixed(2)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:76,columnNumber:21},this)]},a.id,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:74,columnNumber:19},this)),n.length===0&&e.jsxDEV("li",{className:"text-secondary-contrast",children:"No events"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:80,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:72,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:62,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:61,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/components/assets/AssetsPage.tsx",lineNumber:28,columnNumber:5},this)}function Of(){const[t,s]=c.useState("landing"),[i,r]=c.useState(!1),[n,o]=c.useState(!1),[a,l]=c.useState(!1),[m,h]=c.useState(!1),[u,b]=c.useState(!1),[f,x]=c.useState(!1),[g,N]=c.useState(!1);c.useEffect(()=>{const z=k=>{try{z._seed=k?.detail?.seed||null}catch{}x(!0)},V=k=>{k.altKey&&k.key.toLowerCase()==="a"&&N(!0)};return window.addEventListener("asset:new",z),window.addEventListener("keydown",V),()=>{window.removeEventListener("asset:new",z),window.removeEventListener("keydown",V)}},[]);const{currentTheme:p,isDark:v}=Rs(),[E,w]=c.useState(!1),{toasts:C,push:S,remove:Z}=Sf(),{session:D,loading:T}=rr(),[U,W]=c.useState(null);c.useEffect(()=>{const z=V=>{const k=V?.detail||{};k?.message&&S(k.message,k.type||"info",k.duration||3e3)};return window.addEventListener("toast",z),()=>window.removeEventListener("toast",z)},[S]),c.useEffect(()=>{const z=V=>{try{const k=V?.detail||{},Y=k?.message||"Something went wrong. Please try again.";W({message:Y,status:k?.status}),window.clearTimeout(z._t),z._t=window.setTimeout(()=>W(null),6e3)}catch{}};try{window.addEventListener("api:error",z)}catch{}return()=>{try{window.removeEventListener("api:error",z)}catch{}}},[]);const[se,_]=c.useState(78),P={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.8,ease:[.23,1,.32,1]}},exit:{opacity:0,scale:1.05,transition:{duration:.3}}},B={initial:{opacity:0,x:20,scale:.98},animate:{opacity:1,x:0,scale:1,transition:{duration:.5,ease:[.23,1,.32,1]}},exit:{opacity:0,x:-20,scale:1.02,transition:{duration:.3}}};c.useEffect(()=>{const z=setInterval(()=>{_(V=>{const k=(Math.random()-.5)*1;return Math.max(60,Math.min(85,V+k))})},3e4);return()=>clearInterval(z)},[]);const le=z=>{switch(z.replace(/\/$/,"")||"/"){case"/":return"landing";case"/login":return"login";case"/register":return"register";case"/reset-password":return"reset-password";case"/dashboard":return"dashboard";case"/admin":return"admin";case"/universe":return"universe";case"/transactions":return"transactions";case"/reports":return"reports";case"/customers":return"customers";case"/settings":return"settings";case"/assets":return"assets";default:return"landing"}},H=z=>{switch(z){case"landing":return"/";case"login":return"/login";case"register":return"/register";case"reset-password":return"/reset-password";case"dashboard":return"/dashboard";case"admin":return"/admin";case"universe":return"/universe";case"transactions":return"/transactions";case"reports":return"/reports";case"customers":return"/customers";case"settings":return"/settings";case"assets":return"/assets";default:return"/"}};c.useEffect(()=>{try{const z=le(window.location.pathname);z!==t&&s(z),window.history.replaceState({view:z},"",H(z));const V=()=>s(le(window.location.pathname));return window.addEventListener("popstate",V),()=>window.removeEventListener("popstate",V)}catch{}},[]),c.useEffect(()=>{try{const z=H(t);window.location.pathname!==z&&window.history.pushState({view:t},"",z),document.title=`AILedgr — ${t.charAt(0).toUpperCase()}${t.slice(1)}`}catch{}},[t]),c.useEffect(()=>{if(T)return;if(D&&(t==="landing"||t==="login"||t==="register"||t==="reset-password")){s("dashboard");try{window.history.replaceState({view:"dashboard"},"","/dashboard")}catch{}}},[D,T,t]);const G=()=>{if(!T&&!D&&!(t==="landing"||t==="login"||t==="register"||t==="reset-password"))return s("login"),e.jsxDEV(Po,{onRegister:()=>s("register")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:229,columnNumber:14},this);switch(t){case"landing":return e.jsxDEV(To,{onGetStarted:()=>s("register"),onSignIn:()=>s("login")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:233,columnNumber:16},this);case"login":return e.jsxDEV(Po,{onRegister:()=>s("register")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:235,columnNumber:16},this);case"register":return e.jsxDEV(hf,{onLogin:()=>s("login")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:237,columnNumber:16},this);case"reset-password":return e.jsxDEV(pf,{onDone:()=>s("login")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:239,columnNumber:16},this);case"dashboard":return e.jsxDEV(nb,{businessHealth:se},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:241,columnNumber:16},this);case"universe":return e.jsxDEV(db,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:243,columnNumber:16},this);case"transactions":return e.jsxDEV(yb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:245,columnNumber:16},this);case"reports":return e.jsxDEV(Hb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:247,columnNumber:16},this);case"customers":return e.jsxDEV(jb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:249,columnNumber:16},this);case"settings":return e.jsxDEV(qb,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:251,columnNumber:16},this);case"admin":return e.jsxDEV(Bb,{onBack:()=>s("dashboard")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:253,columnNumber:16},this);case"assets":return e.jsxDEV(Lf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:255,columnNumber:16},this);default:return e.jsxDEV(To,{onGetStarted:()=>s("register"),onSignIn:()=>s("login")},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:257,columnNumber:16},this)}};return e.jsxDEV(R.div,{variants:P,initial:"initial",animate:"animate",className:L("min-h-screen w-full bg-background transition-all duration-300 ease-out",v&&"dark-theme-animated-bg"),children:[e.jsxDEV("div",{className:"fixed inset-0 pointer-events-none",children:e.jsxDEV("div",{className:"absolute inset-0 opacity-5 animate-pulse bg-gradient-conic from-primary/5 via-transparent to-primary/5"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:275,columnNumber:9},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:273,columnNumber:7},this),!(t==="landing"||t==="login"||t==="register"||t==="reset-password")&&e.jsxDEV(Ip,{currentView:t,onViewChange:s,businessHealth:se},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:280,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 min-h-screen",children:[U&&e.jsxDEV("div",{className:"fixed top-0 left-0 right-0 z-[10000] flex justify-center pointer-events-none",children:e.jsxDEV("div",{className:"pointer-events-auto m-3 max-w-2xl w-[92%] rounded-lg border border-white/10 bg-red-500/10 text-red-200 backdrop-blur-xl shadow-lg",onMouseEnter:()=>{window.clearTimeout(null)},children:e.jsxDEV("div",{className:"px-4 py-2 text-sm flex items-center justify-between gap-3",children:[e.jsxDEV("div",{className:"truncate",children:[U.status?`[${U.status}] `:"",U.message]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:297,columnNumber:17},this),e.jsxDEV("button",{className:"px-2 py-1 text-xs rounded bg-white/10 hover:bg-white/15 border border-white/10",onClick:()=>W(null),children:"Dismiss"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:300,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:296,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:292,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:291,columnNumber:11},this),e.jsxDEV("main",{className:"relative overflow-hidden transition-all duration-500 ease-out",children:e.jsxDEV(jf,{floatingElements:t==="landing"||t==="login"||t==="register"||t==="reset-password"?null:e.jsxDEV("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-3",children:[e.jsxDEV(q,{variant:"light",className:"p-2",children:e.jsxDEV(bf,{isActive:i,onToggle:r},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:312,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:311,columnNumber:19},this),e.jsxDEV(q,{variant:"light",className:"p-2",children:e.jsxDEV(Nf,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:318,columnNumber:21},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:317,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:310,columnNumber:17},this),children:e.jsxDEV(_e,{mode:"wait",children:e.jsxDEV(R.div,{variants:B,initial:"initial",animate:"animate",exit:"exit",className:"h-full",children:G()},t,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:326,columnNumber:15},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:325,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:307,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:306,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:288,columnNumber:7},this),e.jsxDEV(_e,{children:n&&e.jsxDEV(gf,{businessHealth:se,currentView:t,onDismiss:()=>o(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:344,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:342,columnNumber:7},this),e.jsxDEV(_e,{children:i&&e.jsxDEV(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/20 backdrop-blur-sm flex items-center justify-center",onClick:()=>r(!1),children:e.jsxDEV(q,{variant:"heavy",className:"p-8 text-center max-w-md mx-4",children:[e.jsxDEV("div",{className:"text-lg font-semibold text-gradient-primary mb-4",children:"🎙️ Voice Command Active"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:366,columnNumber:15},this),e.jsxDEV("div",{className:"text-secondary-contrast mb-6",children:'Try saying: "Add $500 Adobe subscription" or "Show me profit trends"'},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:369,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("div",{className:"w-16 h-16 rounded-full border-4 border-primary/30 border-t-primary animate-spin"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:373,columnNumber:17},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:372,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:362,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:355,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:353,columnNumber:7},this),e.jsxDEV(xf,{count:15,colors:["primary","financial-revenue","financial-profit"],enabled:t==="dashboard"},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:381,columnNumber:7},this),!(t==="landing"||t==="login"||t==="register"||t==="reset-password")&&e.jsxDEV(Ef,{actions:[{icon:"📄",label:"AI Document",action:()=>l(!0)},{icon:"🔁",label:"Recurring",action:()=>h(!0)},{icon:"🏗️",label:"Add Asset",action:()=>x(!0)},{icon:"📦",label:"Asset Register",action:()=>N(!0)}],onExpandedChange:w},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:389,columnNumber:9},this),!E&&!(t==="landing"||t==="login"||t==="register"||t==="reset-password")&&e.jsxDEV(yf,{onClick:()=>b(!0),bottomOffset:96},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:402,columnNumber:9},this),e.jsxDEV(vf,{open:a,onClose:()=>{l(!1)}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:406,columnNumber:7},this),e.jsxDEV(Zl,{open:m,onClose:()=>h(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:407,columnNumber:7},this),e.jsxDEV(Pf,{open:f,onClose:()=>x(!1),seed:window.onAssetNew?._seed||null},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:408,columnNumber:7},this),e.jsxDEV(Mf,{open:g,onClose:()=>N(!1)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:409,columnNumber:7},this),e.jsxDEV(Zf,{toasts:C,onClose:Z},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:410,columnNumber:7},this),!(t==="landing"||t==="login"||t==="register"||t==="reset-password")&&e.jsxDEV(Df,{open:u,onClose:()=>b(!1),onOpenAiDocument:()=>{b(!1),l(!0)}},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:412,columnNumber:9},this),!(t==="landing"||t==="login"||t==="register"||t==="reset-password")&&e.jsxDEV("div",{className:"fixed bottom-4 left-4 md:left-6 z-40 max-w-[200px] md:max-w-none",children:e.jsxDEV(q,{variant:"heavy",className:"px-4 py-2 shadow-lg",children:e.jsxDEV("div",{className:"text-xs font-medium text-primary-contrast whitespace-nowrap",children:["Theme: ",e.jsxDEV("span",{className:"text-primary",children:p},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:420,columnNumber:22},this)," | Health: ",e.jsxDEV("span",{className:"text-financial-profit",children:[se.toFixed(0),"%"]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:420,columnNumber:85},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:419,columnNumber:13},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:418,columnNumber:11},this)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:417,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Codes/EZE/ailegr-publish/src/App.tsx",lineNumber:262,columnNumber:5},this)}if(typeof window<"u"){const t=()=>{try{ws.invalidateQueries({queryKey:["dashboard"]}),ws.invalidateQueries({queryKey:["reports"]}),ws.invalidateQueries({queryKey:["pnl"]}),ws.invalidateQueries({queryKey:["balance-sheet"]}),ws.invalidateQueries({queryKey:["trial-balance"]}),ws.invalidateQueries({queryKey:["chart-of-accounts"]}),ws.invalidateQueries({queryKey:["invoices"]}),ws.invalidateQueries({queryKey:["expenses"]}),ws.invalidateQueries({queryKey:["customers"]})}catch{}};try{window.addEventListener("data:refresh",t)}catch{}}Bl.createRoot(document.getElementById("root")).render(e.jsxDEV(Fo.StrictMode,{children:e.jsxDEV(pc,{client:ws,children:e.jsxDEV(Rc,{defaultTheme:"light",children:e.jsxDEV(jh,{children:e.jsxDEV(Of,{},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/main.tsx",lineNumber:35,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/main.tsx",lineNumber:34,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/main.tsx",lineNumber:33,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/main.tsx",lineNumber:32,columnNumber:5},void 0)},void 0,!1,{fileName:"D:/Codes/EZE/ailegr-publish/src/main.tsx",lineNumber:31,columnNumber:3},void 0));
